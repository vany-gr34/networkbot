mot_cl√©,post_et_reponses
how to monitor network,"i have a customer who we did a network design for just over a year ago. we talked them through all the pros and cons as part of the design process and they selected to terminate all the vlans onto their cisco switches and then just have a layer 3 transit up to the firewall. this firewall was easy to spec as it was essentially just a case of how big are your internet pipes, how much might they grow over the next 56 years. boom there is a firewall. we are now 12 months layer and they are saying we want to terminate all the vlans and they have a lot, and want more onto the firewall. i agree this is a superior and potentially more secure design but i suspect if we do this it will just overload the firewall as it just wasnt speced for that use case. the customer, and rightfully so, is saying give us some figures to backup that statement. that got me thinking.... what is the best way to do this? my initial thought process is put netflow in on the core switch and look at the traffic levels between the various vlans. we could also monitor the traffic levels on the svis its a cisco core switch and see what traffic levels they get. currently the customer is using prtg but is there some other tools that could give us better reporting? but what does reddit think? what have i missed? what else could i consider? ||  || you dont say anything about the fw capabilities. its very difficult to answer the question in the title if you dont specify the firewall itself. and i do agree with other comments it all depends what you want to do with the traffic when it hits the firewall. do you just want to do regular l4 filtering or are they going with something like l7 filtering appid with pa, ssl decryption? are you going to employ security profiles to filter ew traffic as well? is the firewall doing any ipsec tunneling or ravpn? basically, its not just the amount of traffic, its also what youre going to do with it. newer fortigates and pa series starting with 400 series are small beasts and can handle a lot of abuse of course, the more you need, the higher you go on the ladder when speccing the fw as well. as for routing, i disagree with some of the comments unless youre talking about very specific routing usually reserved for datacenters, firewalls are more than capable of doing it, at least major vendors in the field are. if youre talking about just intervlan routing, then double that. ive been in networking field for past 20 years, last 10 years mostly security engineering firewalls and unless im working with a very specific type of a company that absolutely needs to have line speed for intervlan traffic, all vlans are terminated on the firewall, no exception im done with the days of 2010 years ago when i was trying to figure out which acl on a switch is blocking something. || group networks inside a vrf and use the firewall as the gateway. this reduces the number of vlans on the firewall and allows east west between like networks with minimal security concern."
how to monitor network,"hey all, i dont have a plethora of experience in specifics in networking. ive used and set up vlans, nats, and subnets multiple times. i work in the industrial automatic space for an oem that makes packaging equipment. our customers are often bigger companies that have their own specifications for networking. generally it makes sense and aligns with my understanding of networking hierarchy and security. but we have one customer who requires us to use managed switches, and will dictate to us which ip addresses we can use and often get down to the specifics of which deviceip is connected to which port on the switch. they require us to ship them the switch were using so they can provision and configure it, then they ship it back. all of that is fine, and makes sense. the confusing part for me is that in their specifications documentation, it specifies that a nat cannot be used anywhere in the system. what inevitably happens is the systems principal controller plc first port is on a specified subnet with the rest of the equipmentdevices. the controllers second port is configured to a different subnet, which then connects to the customers intranet through the managed switch to be monitored and maintained. i recently asked the person who essentially leads all automation equipment purchasing for that customer, and i asked if he knew why the company has a firm requirement of not using a nat. he just said, ohhh, no no no. nats are a big nono. since then, ive been reading and i, for the life of me, cannot understand why this could be. but i also admit i dont know enough to know where to look. in my mind, the way the second port is configured and then connected through the switch mimics the actions of a nat. can someone explain how im a silly goose thats overlooking something? thanks in advance! || ot equipment and their vendors are notoriously bad at anything security related. especially the vpn devices the vendors love to try to sneak on to the network to have remote access to their stuff. there is no need for nat if i give you the address space to use and a gateway to route traffic to. also, when i have to yank that vpn device out because the vendor has been hacked again i can easily replace it with my own. ifwhen we want to expand or connect or add additional automation or collect data i can do that with out having to rely on you to come back and readdress the equipment so that its routable on my network. ive seen ot equipment using insane subnets that are routable over the public internet. no your plc cannot have an address of 1.1.1.1 or 1.2.3.4 and no your hmi cannot be 8.8.8.8 or any other random address ive seen outside of rfc1918. long story short, its our network, if your equipment cant handle different ip addresses from whatever you think it should be, it is not welcome in our environment. that being said i bend over backwards to get ot vendors to see the light and do things the right way. || nat sometimes breaks applications. || for mei can see a couple reasons. one is to make sure devices stay physically isolated. no gateway to the outside world. only the plc and its endpoints. i also know plcs and vfds can be harsh on a network and having nat manage that net can cause issues with its broadcast multicast storms. and it may be a security red safety system policy that isolated networks are in place with no possible way to interfere with the safety control endpoints. the absence of nat also means no openvpn, openssl, wireguard, ipsec etc. can possibly gain access."
how to monitor network,"hello fellow networking folks, im currently trying to build a small monitoring solution for multicasts. in our lab we have a nexus9000 c93108tcex running version 7.0. i want to start with this device and maybe later continue supporting others. the goal is to see for each interface which multicasts are entering and which are leaving. sflow seems to be a viable solution for this problem since it just samples a defined subset of all the packets passing through the monitored interfaces. for each sampled packets sflow provides some additional information. for me the source id index and the input interface value are most interesting. i am keeping to the field descriptions provided by wireshark since different sources call them differently. when a packets arrives from outside the switch on one monitored interface, everything works flawlessly. i can compare the two values to the values in the mibii interface description. both values match as they should. when a packets is leaving the switch the story goes differently. the input interface value is correct so i can still see, on which physical interface a packet entered the switch. source id index always displays hex 0x80000000. it should show the interface i am monitoring right now, the interface from wich the packet was sampled. if the situation stays like that i can only properly monitor incoming multicasts but i cannot monitor through which interfaces packets leave the switch. in my opinion the cisco documentation is not really clear if this behavior is expected or not. for nxos 10.5 i found sflow does not support egress sampling for multicast, broadcast, or unknown unicast packets. but the nxos 7 documentation states egress sflow of multicast traffic requires hardware multicast globaltxspan configuration. which i tried. the other sentence in there drove me totally nuts for an ingress sflow sample of multicast packets, the out port is reported as multiple ports with the exact number of egress ports. this is not supported on cisco nexus 9300ex and fxp platform switches. like, what does this even mean? i would interpret it as you can see how many interfaces an incoming packet will go to, but not on your device. but that should not affect what i can see on the sampled egress packet, right? i assume that either i am not smart enough to read the documentation correctly or the documentation is not coherent. so my question is is it possible to correctly sample the information for egress multicast traffic with my switch and if so, what needs to be done. if it is not possible i am interested how well other vendors support sflow monitoring of multicast packet especially arista. is it only cisco implementing it weirdly or is there a bigger reason for this. im also thinking about possible alternatives for my implementation and if you think they could be possible 1. combine the snooping and group report with the input data show ip igmp snooping groups. this would be possible but is no true monitoring. i wouldnt know when the switch does not pass a packet. 2. cycle the sflow monitoring port. if i monitor only one port at a time i always know where a one multicast enters and where it leaves 3. i look at some other interface data counters or something similar if there are any correlations i can use to match output multicasts to interfaces in some way. if you have any ideas id appreciate your help. || "
how to monitor network,"hey everyone, with two of my friends, we wanted to set up a shared subnet across our three homelabs, each in a different physical location. to do this, we used our existing infrastructure with proxmox and opnsense. i followed the vxlan bridge guide from the official opnsense documentation for the underlay, i decided to go with wireguard which ive been using for years and set up the vteps just like in the tutorial. at first, for a proof of concept, i just wanted to route the network between our three sites using vni 15. between two sites, everything worked perfectly. i set the mtu of my wireguard interfaces to 1600, as recommended in the opnsense forums, so that my bridges and vxlan interfaces could stay at 1500 mtu. that way, i didnt have to deal with custom mtus or tcp mss normalization issues. i also tested with dont fragment df flag across the internet, and mtu 1600 worked fine without fragmentation between the vtep interfaces of each site through the wireguard tunnel. but when i tried adding the third site, things got complicated. initially, i set up one wireguard interface per site with two peers one for each of the other two sites. then, on each firewall, i created two vxlan interfaces site 1 vxlan1 for vtepsite1 to vtepsite2 vxlan2 for vtepsite1 to vtepsite3 site 2 vxlan1 for vtepsite2 to vtepsite1 vxlan2 for vtepsite2 to vtepsite3 site 3 vxlan1 for vtepsite3 to vtepsite1 vxlan2 for vtepsite3 to vtepsite2 but then i hit a limitation in unicast mode as described in the opnsense guide, i cant use the same vni 15 on two vxlan interfaces. i get this error network identifier x already exists in this socket this caused some really weird behavior fw1 can communicate with fw2 and fw3 fw2 and fw3 cant communicate with each other over vxlan to fix this, i had to do something a bit weird with network bridges by assigning different vni ids per pair of sites fw1 to fw2 vni 15 fw1 to fw3 vni 16 fw2 to fw3 vni 17 i know this is not a standard vxlan setup at all, but its the only solution i found for now ive never done vxlan before . so, on each firewall, i now have a network bridge bridge0 that links the two vxlan interfaces and the physical nic fw1 bridge0 fw2 bridge0 fw3 bridge0 right now, this works, but im starting to realize its not maintainable at all. if i want to transport other networks like 10.8.16.024, 10.8.17.024, 10.8.18.024, id have to either create at least 3 new interfaces on each opnsense firewall 2 vxlan interfaces 1 nicvlan and another bridge. or create vlans on bridge0, but as far as i know, opnsense doesnt support vlans on a bridge interface. or use vxlans native vlan transport, but i dont really know how to do that on opnsense. i looked into multicast vxlan, which seems like the perfect solution for my use case, but wireguard doesnt support multicast, so thats not an option. id really like to avoid using ipsec if possible. so now im trying to figure out the best way to design this network so that its functional reliable fault tolerant and easy to monitor maintainable without adding too much complexity if i want to add a new subnet and ideally performant we have great fiber network it should be great to use it if anyone has experience with vxlan on opnsense or a similar setup, id love to hear your thoughts! im open to discussions about every part of my setup. thanks for your help! || functional reliable fault tolerant and easy to monitor maintainable without adding too much complexity if i want to add a new subnet and ideally performant we have great fiber network it should be great to use it honestly? abandon layer 2 and go for layer 3. then run bgp with your friends and you can exchange routes. everything is better at layer 3. if you are crazy enough to do layer 2, ideally your opnsense should not have any vxlan configuration on it. usually only the endpoints of a vxlan network here proxmox are aware of the layer 2 vxlan aspect, and all the nodes in the middle here opnsense and wireguard only see a plain layer 3 udp packet. || this boils down to how do you extend l2 between sites which is a question that engineers have been trying to answer for 20 years. the right answer is dont. the fun answer is vxlan like you want to do. the easy and expensive answer is metroe. the cluster fuck answer is routing individual hosts between sites and have a hub site. the hacky answer is mpls over gres. but seriously, if you arent familiar with vxlan, let alone a dynamic protocol for an underlay just avoid it and do layer 3. it saves a lot of heartache especially if you dont get any benefit from extending l2. || im a big vxlan guy. probably setup a dozen very large ip fabrics in my time. but it works best as a lan tool, low latency, with many paths supported by a layer 3 underlay. for your use case you are over complicating what you need. just go l3. vxlan isnt meant to bridge a broadcast domain over the wan."
how to monitor network,"goodmorning, i come with a question about network structure for a project. i would like to implement my own remote monitor and control web interface for my 3d printer farm. my current setup is the 3d printers are connected to raspberrypis with octoprint instances. some raspberrypis use octoprintdeploy this allows to run multiple octoprint instances on the same rp. with the 4 usb ports of a rp i have 4 3d printers connected. other rps run with a standard octoprint image connected to one printer. all the printers are in the same lan. i wrote a python flask api to communicate with the different octoprint instances thanks to their api keys. also a htmlcssjs frontend to be able to monitor and control the printers via web interface. everything works but only in the lan. now my question what is the best way to put the api and frontend in the cloud? how can i still have bidirectional communicate between my cloud flask api and my printers connected to my local wifi? do i need to add an extra lan api to make the bridge between cloud and private network? did somebody already work on a project similar? would love to hear your experiences || first i dont think this is quite the right sub for that. second read up on vpn and connect your cloud service with one to your local network || id recommend tailscale or cloudflare zero trust. you can connect raspberry to your own overlay vpn network and access it from any device within the same network. || i would advise against using flask in production environments as it is dev only framework. you can use fastapi instead, it is also faster, supports asynchronous calls and is more widely used, so you will find more exampleschatgpt will be more reliable. if you want cloud public frontend to connect to your internal endpoints, that will be very difficult if you dont already have any hybrid setup in place. in general, for the frontend you can try and experiment with vitereactjs. it is easy and straightforward to setup. for authentication, best practice is to use jwt."
how to monitor network,are pvst implementations different? even so how is a loop created without another connection on the 1300? network monitoring definitely shows large number of inbound broadcast packets on the port the c1300 is connectrd to... anyway my challenge for the day...start going through the config files with a fine tooth comb. || how is stp configured on this switch? how is stp configured on the switches that this switch connects to? how are the interfaces configured on each end? what were the log events recorded on both ends? || youre not giving us the whole picture. you must have two links between the devices. || sounds fishy.
how to monitor network,"hey guys. i rent a dedicated server for some projects with one ipv4 ip that, due to the nature of my projects, is exposed and not behind any sort of cloudflare proxy. recently, some skript kiddie messaged me on discord that he downed my entire network. sure enough, he did. contacted my antiddos provider royalehosting and they say they cant detect anything on their end. well anyway i set up something similar to to dump pcap files to send to my provider. got hit again, then once the server came back online i downloaded the pcap files and sent them to my provider. of course, they said the provided packet captures do not seem to indicate an attack. bruh. since then ive installed netdata and spun up a cloudflare zero trust tunnel so the system can be monitored and i can just send them the url to the netdata dashboard. 1. how can ddos attacks just completely bypass an antiddos provider, and is this provider just completely trash or could they really not detect it? how do attackers mask their attacks? 2. is there anything else i can do to prove to these nincompoops that my server was indeed taken offline? for context, we had 100 packet loss, and my ssh connections were blocked for hours. all web deployments were unreachable as well. 3. should i drop these guys for their incompetence? 4. since the botnet was chinese, is there anyway to just deny all traffic from china entirely, like with iptables? or is that a pointless operation? i am no expert in networking, just a humble selftaught sysadmin running my own projects. thanks for any insights you guys can provide. || cloud flare proxy wont stop a ddos attack towards an ip if the attacker knows the real public ip. cloud flare hosts your dns, provides a new public ip to hide the true public ip behind and force all traffic destined to the fqdn through its system. but if they arent attacking the fqdn, the traffic wont go through cloudflare. ask your isp to change your public ip, make sure there is nothing announcing dns for the new ip. setup cloudflare dns so that the cloudflare proxy forwards traffic to the new ip. || are you showing an increase in network traffic during the outages? if yes, probable ddos. if no, probably something cleverermake sure your system and all software are up to date. there are databases of ip address geolocation maxmind is a well known one, where you can create a rule to deny all traffic from addresses listed as being in china hong kong, etc.. results vary. || "
how to monitor network,"if youre interested in geopolitics, finding news articles, opinion columns, and background information on who does what, why, whats going on and what the big narratives are is easy. however, when it comes to making sense of the broad and everevolving it market, i feel there is a lack of such coverage if there is, please direct me to it. heres the kind of commentary im looking for. the ideas below reflect my understanding of the market and might be flawed theyre what ive pieced together from years of working in the industry. im looking forward to reading constructive criticism. the evolution of corporate networks from complex to smart to is there still a network? in the 90s, corporate networks used to be a collection of lans switching linked together by wans routing. then sdwan entered the picture in the late 00s and there was this idea that switching and routing were going to merge. as a consequence, cheap, commoditized switches lost ground to smarter solutions like meraki. then the cloud entered the picture in the mid10s and physical corporate networks barely exist anymore. sure, switches and routers are still physically present, but as long as traffic is secured through casb solutions or a zerotrust posture, one can default back to dumb switches and routers. corporate networks have become collections of corporate data flows carried on generic andor public infrastucture, whereas it used to be data canals first hardware, infrastructure that had to be managed in order to adequately support data flows the actual corporate data. i could sum it all up by saying that corporate networks now corporate data flows only, whereas corporate networks then private infra corporate data flows. the ebb and flow of cloud computing from move to cloud to back onprem until the late 00s, companies who wanted their apps to be available on the public internettheir private networks had to essentially build operate their own dcs, buying costly servers capital expenditure and having dc network engineers manageupgradedeploy apps on them. dell, hp, cisco etc. were quite happy to sell them the required hardware, and vmware et al., the required software. then the hyperscalers entered the picture in the 10s, offering instantlyadjustable computestorage capacity the promise that theyd abstract away all management tasks so that customers could focus on delivering business value. customers were seduced by the idea that capital expenditure and hard strategic hardware purchasing decisions would go away, replaced by operational expenditure giving access to always bestinclass technical solutions, and eagerly moved to the cloud often following a lift and shift pattern. then in the 20s customers realized their cloud costs had gone out of control because planning and enforcing app computestorage limits fell into no ones beat within their organization also, they resented being locked in their hyperscalers platform. as a consequence, they started moving back some key apps to their onprem dcs and monitoring cloud app computestorage usage more closely. im pretty sure my understanding is rough and could be improved upon quite a lot. also, ive only broached 2 topics many, many more could be covered collaboration devices and software, from standalone to bundled solutions the evolution of cybersecurity postures throughout the last 30 years onprem apps vs saas how telecom providershardware manufacturerseditorsdistributorsintegrators used to make money currently make money will make money tomorrow . id love to find a media where such topics are discussed. please share if you know any. thank you. || every situation is so broad it entirely depends on the context of your business, what they do, what they have and what they need. thats why most it news is buzzword sales bs. keeping up with security stuff is valuable though. palo docco? || this guy is great at cloud || for it security security now and risky business are good podcasts. if youre uk centric the register is worth a look."
how to monitor network,"im looking at domotz for monitoring the health of a network, and especially the wifi performance like maybe retries or dropped frames how are you guys handling this? any specific snmp oids to look after? || hey there ujwblant can definitely help out with this. you may have better luck connecting with other domotz users on rdomotz should you like to join us there. im going to ask around here about the snmp oids which may be useful. in the meantime, dont hesitate to crosspost over there. || hey ujwblant back again. to help on this, we need to undestand the brandmodel of your wifi access points. can you share these details with our support team on mailtosupportdomotz.com which will open a ticket? then we can report back here anything we determine! thank you || you can check out manageengine opmanager."
how to monitor network,"hi fellow network people, i am going to be evaluating some monitoring tools. goals is to find a tool which will suit monitoring about 30ish locations, with a mix of network vendors. budget is a bit of an issue.. the organisation is a non profit organisation heavily relying on government and local funding. edit this doesnt mean it needs to be a free tool, but it needs to be affordable and usable without to many customization work or expert knowledge prtg and zabbix seem to be for the two id like to get started with, also open to other alternatives in that class random question does anyone have any insights about how expensive solarwinds is? looking forward to hearing your experiences || the same company who bought prtg and increased their pricing just bought solarwinds, so i honestly would not look to either solution if cost management is a big concern. there are plenty of purely free open source tools in the network space that are perfectly capably with lots of history and existing documentation like zabbix or librenms. at that scale i probably wouldnt implement something like prometheus because its just a bit more of a chore to manage and a non profit with 30 locations probably isnt big enough to leverage the benefits of those kind of technologies and would have a hard time affording the kind of staff who are already familiar with them. || anything but solar winds. prtg if you want to spend money on licensing. zabbix if you want to spend money on labor hours. || zabbix is great once you get over the learning curve. ptrg is more user friendly at the beginning. zabbix can do more once you understand how to setup the triggers. you can also do live network maps like cacti, which ptrg is weirdly missing. i got rid of our prtg setup for zabbix."
