mot_cl√©,post_et_reponses
monitoring ports with Telegraf,"hey all, just thinking about setting up some network monitoring and id like to monitor intrazone traffic within an esxi environment. after some research, it looks like promiscuous mode on a port group is viable however, it would only capture broadcast, multicast and the traffic hitting the physical nics. as far as i know, this wouldnt capture any unicast traffic between vms in the same port group for example. have any of ye gone down this route with standard v switches or is the req. simply distrubuted switches? || "
monitoring ports with Telegraf,"hi! with a dropbox and a script like nacbypass from scipag it is possible to bypass 802.1x. so the dropbox sits in the middle of an authenticated device and the 802.1x network port. general question can such a bypass in general be prevented? are there additional hardening measures that can make the exploitation harder? if it cannot be prevented, can it be detected through monitoring? thanks || 1 physical security is always paramount 2 having additional layers in place i.e. following the zero trust model in assuming the network is hostile || this why tls must be used || my opinion which people seem to hate here is treat every network like a coffee shop... all users must vpn, no network is special. everything else is a massive waste of time and effort. || so this seems conceptually similar to what p0ny plug did years ago and yes these types of infiltrations are hard to spot unless you are looking at flow data and see the unusual ports coming from the attacking client or your daclsgaclrole for the legitimate connected client is restrictive enough to contain the potential ports being used by the attacker device. in general, many shops have trouble with pc type client controls since people do different to things on different days and its hard to account for variance. big hvd shops solve this by saying hvd is the legitimate destination and then use software controls on the hvd for additional protection of legitimate traffic. the attacker might still have a window into the underlay though and its a difficult thing to solve at scale in a large enterprise. welcome to the rationale of defenseexpense in depth and zero trust to help place protection on critical data and start assuming the internal networks are always in some level of potential compromise. || this can be a tough one to defend against. one option is to have all the clients you manage use ipsec to communicate. definitely a time investment to get that all setup and configured though. || you could enable macsec on the access ports to encrypt traffic between the switch and the computer. however i dont see this use case often as switches having macsec on access port may cost much more and you need to manage end to end the encryption key with computers. could you monitor that ? most of the time, those equipment are hardened to not do any noise in the network, difficult to see on profiling part or even to block multiple mac address per port as they just spoof the one from the end device. an idea would be to introduce intelligent ndr, so you monitor traffic and when something deviate from your baseline, you can generate an alert and start investigating on this behavior. || yes. by using mac auth instead of port auth. althought i suppose its still possible to spoof the mac by the intermediate device. makes it harder though"
monitoring ports with Telegraf,"hey all, i dont have a plethora of experience in specifics in networking. ive used and set up vlans, nats, and subnets multiple times. i work in the industrial automatic space for an oem that makes packaging equipment. our customers are often bigger companies that have their own specifications for networking. generally it makes sense and aligns with my understanding of networking hierarchy and security. but we have one customer who requires us to use managed switches, and will dictate to us which ip addresses we can use and often get down to the specifics of which deviceip is connected to which port on the switch. they require us to ship them the switch were using so they can provision and configure it, then they ship it back. all of that is fine, and makes sense. the confusing part for me is that in their specifications documentation, it specifies that a nat cannot be used anywhere in the system. what inevitably happens is the systems principal controller plc first port is on a specified subnet with the rest of the equipmentdevices. the controllers second port is configured to a different subnet, which then connects to the customers intranet through the managed switch to be monitored and maintained. i recently asked the person who essentially leads all automation equipment purchasing for that customer, and i asked if he knew why the company has a firm requirement of not using a nat. he just said, ohhh, no no no. nats are a big nono. since then, ive been reading and i, for the life of me, cannot understand why this could be. but i also admit i dont know enough to know where to look. in my mind, the way the second port is configured and then connected through the switch mimics the actions of a nat. can someone explain how im a silly goose thats overlooking something? thanks in advance! || ot equipment and their vendors are notoriously bad at anything security related. especially the vpn devices the vendors love to try to sneak on to the network to have remote access to their stuff. there is no need for nat if i give you the address space to use and a gateway to route traffic to. also, when i have to yank that vpn device out because the vendor has been hacked again i can easily replace it with my own. ifwhen we want to expand or connect or add additional automation or collect data i can do that with out having to rely on you to come back and readdress the equipment so that its routable on my network. ive seen ot equipment using insane subnets that are routable over the public internet. no your plc cannot have an address of 1.1.1.1 or 1.2.3.4 and no your hmi cannot be 8.8.8.8 or any other random address ive seen outside of rfc1918. long story short, its our network, if your equipment cant handle different ip addresses from whatever you think it should be, it is not welcome in our environment. that being said i bend over backwards to get ot vendors to see the light and do things the right way. || nat sometimes breaks applications. || for mei can see a couple reasons. one is to make sure devices stay physically isolated. no gateway to the outside world. only the plc and its endpoints. i also know plcs and vfds can be harsh on a network and having nat manage that net can cause issues with its broadcast multicast storms. and it may be a security red safety system policy that isolated networks are in place with no possible way to interfere with the safety control endpoints. the absence of nat also means no openvpn, openssl, wireguard, ipsec etc. can possibly gain access. || if i had to take a guess, its because the natd subnet wouldnt be advertised through their routing protocol, and thus unroutable. i cant think of any reason you would want to use a nat. but i also cant think of a security concern that it would create. so my conclusion is its a routing issue. || sounds like its a closed network. as nat is used to translate internal ip to external ip. so assuming no nat this is an environment thats specifically locked down. so dod, ot, or high security environment. this is common in these environments. as nat is done at the routerfirewall level. so they most likely have separate isp line for external communication and an internal network that is not connected to route to isp gateway next hop. || is there a certain nat operation that they dont want to have done? for example dnat from wan? that would make sense. other than that, as a network technican im a bit stumbled by that. we supply ipsec routers for a machine manufacturer which sell their machines globally and every router performs various nat operations 11nat, snat. it has never been a problem, why would it? it happens in our part of the network. but i would restrain on requering the customers to create nat rules on their routing equipment. we just need a list of permitted outgoing ports ntp, dns, ipsec"
monitoring ports with Telegraf,"hello fellow networking folks, im currently trying to build a small monitoring solution for multicasts. in our lab we have a nexus9000 c93108tcex running version 7.0. i want to start with this device and maybe later continue supporting others. the goal is to see for each interface which multicasts are entering and which are leaving. sflow seems to be a viable solution for this problem since it just samples a defined subset of all the packets passing through the monitored interfaces. for each sampled packets sflow provides some additional information. for me the source id index and the input interface value are most interesting. i am keeping to the field descriptions provided by wireshark since different sources call them differently. when a packets arrives from outside the switch on one monitored interface, everything works flawlessly. i can compare the two values to the values in the mibii interface description. both values match as they should. when a packets is leaving the switch the story goes differently. the input interface value is correct so i can still see, on which physical interface a packet entered the switch. source id index always displays hex 0x80000000. it should show the interface i am monitoring right now, the interface from wich the packet was sampled. if the situation stays like that i can only properly monitor incoming multicasts but i cannot monitor through which interfaces packets leave the switch. in my opinion the cisco documentation is not really clear if this behavior is expected or not. for nxos 10.5 i found sflow does not support egress sampling for multicast, broadcast, or unknown unicast packets. but the nxos 7 documentation states egress sflow of multicast traffic requires hardware multicast globaltxspan configuration. which i tried. the other sentence in there drove me totally nuts for an ingress sflow sample of multicast packets, the out port is reported as multiple ports with the exact number of egress ports. this is not supported on cisco nexus 9300ex and fxp platform switches. like, what does this even mean? i would interpret it as you can see how many interfaces an incoming packet will go to, but not on your device. but that should not affect what i can see on the sampled egress packet, right? i assume that either i am not smart enough to read the documentation correctly or the documentation is not coherent. so my question is is it possible to correctly sample the information for egress multicast traffic with my switch and if so, what needs to be done. if it is not possible i am interested how well other vendors support sflow monitoring of multicast packet especially arista. is it only cisco implementing it weirdly or is there a bigger reason for this. im also thinking about possible alternatives for my implementation and if you think they could be possible 1. combine the snooping and group report with the input data show ip igmp snooping groups. this would be possible but is no true monitoring. i wouldnt know when the switch does not pass a packet. 2. cycle the sflow monitoring port. if i monitor only one port at a time i always know where a one multicast enters and where it leaves 3. i look at some other interface data counters or something similar if there are any correlations i can use to match output multicasts to interfaces in some way. if you have any ideas id appreciate your help. || "
monitoring ports with Telegraf,"hey everyone, im running a fortigate 200e with multiple vdoms. one specific vdom keeps flapping i get alarmresolved notifications constantly, but the firewall itself never goes fully down. interestingly, the flapping only stops when a device is physically connected to the port that vdoms vlans are on. there are no linkmonitor or performance sla configs on this vdom. all vlan interfaces are subinterfaces. no other vdoms behave this way. has anyone run into this behavior before? is there a way to keep the vdom stable without plugging in a dummy device? open to cli tweaks or hardware workarounds. || could you elaborate on what you exactly mean by flapping? first time ever hearing about a vdom that flaps.. what happens exactly when it flaps and what are the notifications you get? || i havent seen that before and it sounds like an odd use case but what if you throw a loopback interface in the vdom and use that as your monitoring endpoint? a lot is probably going to depend on how exactly your monitoring system is connecting and what your touchpoint is i.e. the internal vlan interface"
monitoring ports with Telegraf,"i am trying to bring up a 100g link from an arista 7280cr3 to an fs which has 4 25g ports, and am struggling with all ports reporting notconnect. the cable im using is with the 5 transceivers appropriately coded using fs.coms programming box. this question is very similar to but now involving an fs switch im miles from ashburn so i cant check the cabling easily other than via remote hands. but ive got two fs switches and two breakout cables going back to this arista, both behaving the same. ive not bothered with trying to combine the ports yet, i just want to see the link layer come up! the arista is configured like this ! interface ethernet81 speed forced 25gfull ! interface ethernet82 speed forced 25gfull ! interface ethernet83 speed forced 25gfull ! interface ethernet84 speed forced 25gfull ! the current state is sh int eth81 ethernet81 is down, line protocol is down notconnect hardware is ethernet, address is 688b.f498.d862 bia 688b.f498.d862 ethernet mtu 10218 bytes, ethernet mru 10240 bytes, bw 25000000 kbit fullduplex, 25gbs, auto negotiation off, unilink disabled down 5 days, 21 hours, 36 minutes, 58 seconds loopback mode none 3 link status changes since last clear last clearing of show interface counters 5 days, 213953 ago 5 minutes input rate 0 bps 0.0 with framing overhead, 0 packetssec 5 minutes output rate 0 bps 0.0 with framing overhead, 0 packetssec 0 packets input, 0 bytes received 0 broadcasts, 0 multicast 0 runts, 0 giants 0 input errors, 0 crc, 0 alignment, 0 symbol, 0 input discards 0 pause input 0 packets output, 0 bytes sent 0 broadcasts, 0 multicast 0 output errors, 0 collisions 0 late collision, 0 deferred, 0 output discards 0 pause output and the fs switches have no interfacespecific configuration, as in interface tfgigabitethernet 049 ! interface tfgigabitethernet 050 ! interface tfgigabitethernet 051 ! interface tfgigabitethernet 052 ! and their interfaces look like fssh int tfg049 indexdec49 hex31 tfgigabitethernet 049 is down , line protocol is down hardware is tfgigabitethernet, address is 649d.99d9.8da7 bia 649d.99d9.8da7 interface address is no ip address interface ipv6 address is no ipv6 address mtu 1500 bytes, bw 25000000 kbit encapsulation protocol is ethernetii, loopback not set keepalive interval is 10 sec , set carrier delay is 2 sec ethernet attributes last link state change time 20250329 080234 time duration since last link state change 0 days, 22 hours, 15 minutes, 15 seconds priority is 0 mediumtype is fiber admin duplex mode is auto, oper duplex is unknown admin speed is 25g, oper speed is unknown flow control admin status is off, flow control oper status is unknown admin negotiation mode is off, oper negotiation state is unknown storm control broadcast is off, multicast is off, unicast is off admin fec mode is auto, oper fec mode is rs bridge attributes porttype access vlan id 1 rxload is 0255, txload is 0255 input peak rate 0 bitssec, at 20250321 060352 output peak rate 0 bitssec, at 20250321 060352 the hardware is detected on the arista side show interfaces transceiver hardware ... name ethernet81 media type 100gbasear4 module presence detected maximum module power w 3.5 maximum slot power w 5.5 wavelength nm 850.0 name ethernet82 media type 100gbasear4 module presence detected maximum module power w 3.5 maximum slot power w 5.5 wavelength nm 850.0 name ethernet83 media type 100gbasear4 module presence detected maximum module power w 3.5 maximum slot power w 5.5 wavelength nm 850.0 name ethernet84 media type 100gbasear4 module presence detected maximum module power w 3.5 maximum slot power w 5.5 wavelength nm 850.0 and on the fs side sh interfaces transceiver interface tfgigabitethernet 049 transceiver type 25gactivecablesfp28 connector type no separable connector mode multimode wavelengthnm na transfer distance cable 10m digital diagnostic monitoring no vendor serial number c24104273694 current diagnostic parameters this module doesnt support ddm! transceiver current alarm information this module doesnt support getting alarm! interface tfgigabitethernet 050 transceiver type 25gactivecablesfp28 connector type no separable connector mode multimode wavelengthnm na transfer distance cable 10m digital diagnostic monitoring no vendor serial number c24104273691 current diagnostic parameters this module doesnt support ddm! transceiver current alarm information this module doesnt support getting alarm! interface tfgigabitethernet 051 transceiver type 25gactivecablesfp28 connector type no separable connector mode multimode wavelengthnm na transfer distance cable 10m digital diagnostic monitoring no vendor serial number c24104273693 current diagnostic parameters this module doesnt support ddm! transceiver current alarm information this module doesnt support getting alarm! interface tfgigabitethernet 052 transceiver type 25gactivecablesfp28 connector type no separable connector mode multimode wavelengthnm na transfer distance cable 10m digital diagnostic monitoring no vendor serial number c24104273692 current diagnostic parameters this module doesnt support ddm! transceiver current alarm information this module doesnt support getting alarm! ive setting the errorcorrection fec modes explicitly to reedsolomon, and ive tried turning it off altogether. ive tried forcing the duplex on the fs side. ive tried turning off flowcontrol on both sides. can anyone steer me towards diagnostics that i might have missed, link parameters that ive forgotten about, or just mutter darkly about the likelihood of this crossvendor link ever working? thanks in advance! || everything ive read states the following when breaking out a single 100g port to 4x 25g links, care must be taken to use the same forward error correction fec mode on both ends of the link to ensure linkup. youve tried to disable both, it said that should bring the link up, unless the fs switch isnt switching from baser || about a decade ago i remember having to get a free? license from arista to make the 7280s work with nonarista qsfps. i also remember looking at the qsfp breakout stuff as a possibility and grimacing at the vendor interop nightmare that would cause. i dont think either of these apply here though, since the hardware shows up. good luck in your quest. || if i remember correctly on that line there is some oddness around gearbox of lanes || most of the times it is the fec mode difference. another thing which you might want to tryout is to enable auto negotiation on both sides."
monitoring ports with Telegraf,"i might be looking for a unicorn device but im hoping someone might have an idea of the options out there. usecase were an isp and have a lot of business customers with two uplinks to our pe devices but a single ip homed on these devices that acts as their default gateway. these pe devices are currently cisco 3750s or 3850s in a stackvss configuration so they are logically 1 device. we are looking at replacing these devices, but dont know what our best option would be. this is very important the stackvss gives us high availability protection if one of devices in the stack dies while not requiring us to use 3 ips from our customers network range. afaik requiring 3 ips is the biggest drawback for protocols like vrrp and why a pair of devices working in an mlag will not meet our requirements. requirements stackable able to share an ip so if one device dies, the others in the stack will still respondpass traffic with the same ip. this could also be a single device but with dualsupervisors, just something that will provide us with physical redundancy. linkagglacp interface 1 on stackmembera and interface 2 on stackmemberb should be able to be put into a portchannel together going down to the customer so that the customer device has 2 uplinks but sees our devices as 1 logical device. ospf the device ideally needs to be able to speak ospf so it can get routes from our upstream router and know where to send customer traffic. if it cant do ospf, then at least it needs to be able to do ip sla so we can setup static routes and monitor them, but ospf would be easier 10g ports we have a mix of 1g and 10g customers, mostly 1g. the device needs to have at least 10g capable uplinks and ideally 10g capable interfaces for customer access sfp the easiest thing would be for the device to use sfps so we can mix and match the module depending on if the customer has a fiber or copper handoff low portdensity we typically dont need 48 ports. something with 12 or even 6 ports would be fine. we deploy these devices at the customers location and only occasionally have more than one customer running over a given pair of devices 2keuros a device this one might be tricky, but were not against buying used. so yeah, that might be a unicorn but we need something that has physical redundancy and that can share an ip across that physical redundancy. we already have a lot of customers on our existing gear with 30s and so going the mlag vrrp route is not an option for us. unless there is some hardwarefeature set with mlag that provides the same shared ip functionality as vss || if you implement evpn in your fibre aggregation layer, you can take lags from your customer switches directly and then terminate a single 31 gateway on two pes for protection. same ip, two devices. totally valid in evpn. as evpn relies on bgp there is no vendor stack technology to fail in this design, making it superior to a stack. while your fibre aggregation might not support this now, the savings on edge devices may justify this approach. || unpopular opinion, stop doing that. almost every isp only offers a single handoff from a single device. the cpe isnt the weak point, typically. || extreme networks can do this with a 5420. in an mclag cluster, they have a proprietary alternative to vrrp that only needs 1 ip address. || ruckus icx 8200c08zp does everything in your list. || the cost is the killer cisco c9300x12y would be a nice and kown choise. besides that used you may find 4500x. newer ones if you jsut do l2 stuff mikrotik crs3091g8sin or the 16 port version if you need more ports and features crs3171g16srm, theres also a 24 port verison whcih all can do mlag but need individual managmenet ips, but can share a vip || also those l2 cpes should only have a dedicated management routing instance and never public ip adresses . those are for your firewall or router behind those devices. so also no need for a single ip for the stackedclusteredce switch pair. keep layers separated, doing all in one big step results in beeing dependant on one vendor, generates lots of headache and will fail at some point, heavy to find the cause for trouble || aruba 2930f24g can only do one ospf area. get 2930m if you want two psus per unit aswell"
monitoring ports with Telegraf,"goodmorning, i come with a question about network structure for a project. i would like to implement my own remote monitor and control web interface for my 3d printer farm. my current setup is the 3d printers are connected to raspberrypis with octoprint instances. some raspberrypis use octoprintdeploy this allows to run multiple octoprint instances on the same rp. with the 4 usb ports of a rp i have 4 3d printers connected. other rps run with a standard octoprint image connected to one printer. all the printers are in the same lan. i wrote a python flask api to communicate with the different octoprint instances thanks to their api keys. also a htmlcssjs frontend to be able to monitor and control the printers via web interface. everything works but only in the lan. now my question what is the best way to put the api and frontend in the cloud? how can i still have bidirectional communicate between my cloud flask api and my printers connected to my local wifi? do i need to add an extra lan api to make the bridge between cloud and private network? did somebody already work on a project similar? would love to hear your experiences || first i dont think this is quite the right sub for that. second read up on vpn and connect your cloud service with one to your local network || id recommend tailscale or cloudflare zero trust. you can connect raspberry to your own overlay vpn network and access it from any device within the same network. || i would advise against using flask in production environments as it is dev only framework. you can use fastapi instead, it is also faster, supports asynchronous calls and is more widely used, so you will find more exampleschatgpt will be more reliable. if you want cloud public frontend to connect to your internal endpoints, that will be very difficult if you dont already have any hybrid setup in place. in general, for the frontend you can try and experiment with vitereactjs. it is easy and straightforward to setup. for authentication, best practice is to use jwt."
monitoring ports with Telegraf,"are pvst implementations different? even so how is a loop created without another connection on the 1300? network monitoring definitely shows large number of inbound broadcast packets on the port the c1300 is connectrd to... anyway my challenge for the day...start going through the config files with a fine tooth comb. || how is stp configured on this switch? how is stp configured on the switches that this switch connects to? how are the interfaces configured on each end? what were the log events recorded on both ends? || youre not giving us the whole picture. you must have two links between the devices. || sounds fishy. || okay. issue was a switch catalyst 2960x with jumbo frame mtu mismatch that seems to have been mangling bdpus...now that all trunk ports have the same mtu across the entire network, things seem to be working as expected...no storm when bringing on the new switches."
monitoring ports with Telegraf,"hello, i have a problem with running huawei qsfp28 100g bidi on a huawei s6730 cloud engine. patch version is v600r024hp0021 the bidi is correctly displayed in the switch 100ge104 transceiver information common information transceiver type 100gbaselr4 connector type lc wavelength nm 1309 transfer distance m 300009um125um smf digital diagnostic monitoring yes vendor name huawei vendor part number 02311knu ordering name manufacture information manu. serial number g4o2022623 manufacturing date 2016323 vendor name huawei alarm information warning information diagnostic information temperature celsius 28.99 voltage v 3.41 bias current ma 0.000.00 lane0lane1 0.000.00 lane2lane3 bias high threshold ma 120.00 bias low threshold ma 5.00 current rx power dbm 40.0040.00lane0lane1 40.0040.00lane2lane3 default rx power high threshold dbm 2.50 default rx power low threshold dbm 16.00 current tx power dbm 40.0040.00lane0lane1 40.0040.00lane2lane3 default tx power high threshold dbm 7.00 default tx power low threshold dbm 0.00 following config on the port, but also tested with default settings bhs6730iscsi1rz1display currentconfiguration interface 100ge101 interface 100ge101 port linktype access device transceiver 100gbasefiber fec mode none return i noticed, that there is no light in the bidi, as when i plug the bidi into a hpe switch, i can see the laser. does anyone have an idea how to troubleshoot this issue or what could be the problem? thank you in advance! || "
