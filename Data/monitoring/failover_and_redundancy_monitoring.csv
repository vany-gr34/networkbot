mot_cl√©,post_et_reponses
failover and redundancy monitoring,"hello everyone, i have two aging hp 8212zl switches that are being replaced later in 2025. i recently discovered that poe redundancy is not configured on these switches. reviewing the poweroverethernet redundancy command, i just wanted to confirm if i am understanding this properly core show poweroverethernet status and counters system power status prestandard detect off system power status no redundancy poe power status no redundancy chassis poweroverethernet total available power 1200 w total failover power 900 w total redundancy power 0 w total used power 183 w 6w total remaining power 1017 w internal power 1 300wpoe connected. 2 300wpoe connected. 3 300wpoe connected. 4 300wpoe connected. external power eps1 not connected. eps2 not connected. with my core output showing above, if i enable n1, i could have 2 power supplies fail total? with the full command, my total available power is 1200w, so half of that would be reserved for redundancy 600w. as i am using only about 183w, this would leave me about 417w of remaining power. am i understanding this correctly? i have been crawling through our network and locating devices that have been misconfigured or without spare psu installed. we had a failure a few weeks ago in a zl chassis that only had 2 power supplies and it caused half of the switch to function. i am trying to prevent that with added psu and redundancy configuration. || "
failover and redundancy monitoring,"i might be looking for a unicorn device but im hoping someone might have an idea of the options out there. usecase were an isp and have a lot of business customers with two uplinks to our pe devices but a single ip homed on these devices that acts as their default gateway. these pe devices are currently cisco 3750s or 3850s in a stackvss configuration so they are logically 1 device. we are looking at replacing these devices, but dont know what our best option would be. this is very important the stackvss gives us high availability protection if one of devices in the stack dies while not requiring us to use 3 ips from our customers network range. afaik requiring 3 ips is the biggest drawback for protocols like vrrp and why a pair of devices working in an mlag will not meet our requirements. requirements stackable able to share an ip so if one device dies, the others in the stack will still respondpass traffic with the same ip. this could also be a single device but with dualsupervisors, just something that will provide us with physical redundancy. linkagglacp interface 1 on stackmembera and interface 2 on stackmemberb should be able to be put into a portchannel together going down to the customer so that the customer device has 2 uplinks but sees our devices as 1 logical device. ospf the device ideally needs to be able to speak ospf so it can get routes from our upstream router and know where to send customer traffic. if it cant do ospf, then at least it needs to be able to do ip sla so we can setup static routes and monitor them, but ospf would be easier 10g ports we have a mix of 1g and 10g customers, mostly 1g. the device needs to have at least 10g capable uplinks and ideally 10g capable interfaces for customer access sfp the easiest thing would be for the device to use sfps so we can mix and match the module depending on if the customer has a fiber or copper handoff low portdensity we typically dont need 48 ports. something with 12 or even 6 ports would be fine. we deploy these devices at the customers location and only occasionally have more than one customer running over a given pair of devices 2keuros a device this one might be tricky, but were not against buying used. so yeah, that might be a unicorn but we need something that has physical redundancy and that can share an ip across that physical redundancy. we already have a lot of customers on our existing gear with 30s and so going the mlag vrrp route is not an option for us. unless there is some hardwarefeature set with mlag that provides the same shared ip functionality as vss || if you implement evpn in your fibre aggregation layer, you can take lags from your customer switches directly and then terminate a single 31 gateway on two pes for protection. same ip, two devices. totally valid in evpn. as evpn relies on bgp there is no vendor stack technology to fail in this design, making it superior to a stack. while your fibre aggregation might not support this now, the savings on edge devices may justify this approach. || unpopular opinion, stop doing that. almost every isp only offers a single handoff from a single device. the cpe isnt the weak point, typically. || extreme networks can do this with a 5420. in an mclag cluster, they have a proprietary alternative to vrrp that only needs 1 ip address."
failover and redundancy monitoring,"a bit of background, ive been in the industry 12 years mostly deploying cisco and meraki, occasionally working on other vendor platforms as well. ive experienced enough sdwan to understand the main concepts and caveats. these days there are hundreds of solutions on the market, and i dont have the time to explore each one. im looking for recommendations on what id describe as sdwan lite. primary functionalityrequirements wan failover simple traffic direction. e.g. vlan x routes out wan 1, vlan y routes out wan 2. basic ipsec tunneling and failover. throughput requirements for ipsec are minimal ease of management gui, but ability to view low level configurations 5 gbps throughput and ability for support of 3000 users connecting to the internet majority of traffic will be from the lan, nated, and forwarded. no security features required for this high availabilitysso pairing or a redundancy pairing setup standard traffic analytics and performance simple and reasonable licensing requirements would be nice if the solution continued to function without license renewal simple setup. ideally has centralized management, but the forwarding logic is maintained locally. centralized control planemanagement requiring numerous beefy servers or proprietary appliances is not ideal. quality technical support nice to have advanced security features, but would be used infrequently. ability to apply templates when deploying. api based configuration and management. netflow support. bgp support, not a requirement. features not neededwanted multipathingwan bandwidth aggregation through tunneling. mplsvpls not required or desired in any manner, whether its integration or emulation. cloud integration with awsazuregcloud etc. unneeded. ill be exploring peplink in the coming weeks. as for meraki, the mx model requirements for 5 gbps throughput is double the cost of an enterprise router with similar throughput. i understand why, but usage of security features will be minimal in this scenario. i know that fortinet is a popular solution as well, but i am personally not a fan of their products. thank you in advance! || silverpeak || im the product owner for sdwan at a large isp, and am responsible for scoping out, productizing, architecting, and operationalizing our entire network portfolio. ive been balls deep in sdwan for about 10 years. people in this sub love the fortinet solution. its really an engineers product, which is why its loved so much around here. personally i think fortinet is way too complicated, which is why they give it away for free. its really just wan link load balancing rebranded with some additional features. you still have to build the dialup tunnels, internal routing protocols, provisioning strategy, all that stuff is on you. these elements are all part of the reference architecture, but its the complete opposite of turn key. velo is my personal favorite, however were all waiting for the other shoe to drop with broadcom right now. no one knows what the future of that product line is at the moment. i really like silverpeak too, that would be my second pick now owned by aruba. if you want something dead simple and easy to deploy, meraki is a good choice. its for people who just want to connect sites together with some light sdwan features || the only thing close to sdwan listed in your description is this simple traffic direction. e.g. vlan x routes out wan 1, vlan y routes out wan 2. thats not sdwan...thats policybased routing, and something nearly every firewall can do. sdwan, imo, is poricybased routing, on crack. regular healthchecks and onbox performance monitoring of multiple links and dynamically routing traffic over the best links for the type of traffic voice goes over the lowestjitter link onedrive goes over the highestspeed link, for an example. vpns between remote sites follow the same types rules you have vpns over each link and choose the best for the type of traffic based upon healthperformance check slas. depending on topology and business needs, this may even be a fullpartialmesh vpn with tunnels dynamically generated. and really...all the vendors do this about the same, too. imo its a matter of which platforms you are comfortable with, which vendors you have a good relationshipexperience with, and what integrates well with your existing and nearfuture tools. i.e. can it get userdevice information from your nacmdmssoipam? is that valuable to routing decisions or logs?. and of course, budget. fortinet does tick all your boxes. l7 firewalling is their meatandpotatoes and their sdwan is a very mature pillar of that platform. im a bit of a fortifanboi though, so take with a grain of salt. i will say this, my observation of the state of sdwan....there are a few lineages of modern sdwan appliances and where they came from. knowing their lineage will help in generalizing which will best suit your needs, as this tends to be where they really shine. wan optimization silverpeak came from this family. firewalling and l4 security fortinet came from this family saas onramping aryaka came from this family routebased vpn ciscoviptella came from this family."
failover and redundancy monitoring,"hey, i am working on a business case for building a big data center in the middle east. one cost component is networking hardware. guys have it right now as a function of inbound outbound capacity to a given route. eg if the dc will be in alphaville, they say well we need fully redundant connections to betaville, charlieville, deltaville etc. imagine its 5000 gbps total, they sell well it will be x 5000. is this the right way to think about it, and any thoughts what x would be? seems like there would be more components eg security, monitoring etc but maybe the big hw costs will be as they have it. not looking for fiber lease costs, that i have, just the network kit investment in the dc itself. || you need to provide better requirements. people here might be able to suggest various manufacturers but you wont get specifics until you engage hardware vendors or consultants. if youre building tier 4 to get ui certified for plans, construction and operations, you need engage someone whos done this already. mistakes in initial planning and design will be very expensive. questions to get you started. ac power or dc power? how many meet me rooms? how many physical connections make up your north and south connections? if 5tb is the aggregate between locations, what type of redundancy and diversity are required? are you selling waves or dark between your new site and these other locations you mentioned? are you reselling a blended, managed internet service to your customers? || hire a team of experts op || if youre asking reddit, you shouldnt be on that project. look up the story of icarus, thats you mate."
failover and redundancy monitoring,"i am looking to upgrade hardware for metroregional wan network hub sites, and want to provide hardware redundancy. this wan serves a geodiverse dual core 911 call handling system, where each of 2 hub sites has single links dark fiberlayer2 leased link or lte modem tunneled to the psap remote sites. the hardware i inherited consists of single layer3 switches c9200cx at each hub site, with eigrp handling routing, and hsrp providing gateway redundancy between the 2 hub sites. the racks also contain a cold spare, older model, not up to date config. i have purchased 2 stacks of 2 c9300 switches to replace them, and i want to have 1 of each stack as active and one as standby, with identical interface configurations on each. since i am limited to having 1 remote site wan link for each hub site 1 dark fiber or cradle point serving each remote i would have to manually move cablessfps from one switch to the next in event of hardware failure, but i want to make sure that the standby router is configured and ready to rock should that be necessary, and i want to make sure that any config tweaks on the active are automatically propagated to the standby. since only one of each pair will be connected to the wan links, i dont really need millisecond failover from sso, or continuous forwarding from nsf or graceful restart routing stability, since any hardware failure would require physical intervention for link migration, and i want eigrp to route around the failure. i just want the peace of mind that should something happen, ive got a fully configured and booted spare right there in the rack below the failed device, and all that is required for bringing it online is a 1 for 1 move of each wan link. and a bonus question since this is an airgapped network, how would you handle alerting for failure states? || id have more piece of mind with an easy to use backup system and then some spares of the exact model in use, so i can just copy it over and roll. || you have dark fiber, like a pair of strands? swap to bidi optics and you turn those two strands into two links. doesnt protect against a fiber cut, but you can get hardware redundancy at each site which helps quite a bit."
failover and redundancy monitoring,"i have a few small sites connected over mpls everything is statically routed towards mpls provider edge router and provider do the rest of the magic. so we want to change it to bgp. main reason of doing bgp is to establish some form of wan redundancy by adding ipsec over internet and enabling routing failover in case mpls is down. should we peer with provider edge router or can we peer directly with our remote sites over mpls and avoid peering with provider? are there any pros or cons? i can reach my remote routers over mpls so i assume technically peering them is not an issue. dont shoot me, i never managed bgp setup. || if youre doing static routing to the pe router today, then youll switch to talking bgp with those same routers. in order for peering to be directly between your own devices, youd have to change to l2vpn circuits from your provider. youd generally only do that if you wanted to also run ipsec over the mpls side. || if you are running some vpn over mpls then you can peer directly between your own sites. otherwise you will need to peer with provider. that is standard functionality in mpls so shouldnt be too hard to implement. considering you are using static routes toward provider and not toward your remote site, i would say you have second option so bgp will be between your ce and providers pe on each site. || i used to hate peering with the provider. once or twice a year theyd always mess something up. we would end up creating gre tunnels through the mpls network and directly peering with our own bgp neighbors over the tunnels. good luck to you."
failover and redundancy monitoring,"hello folks, i am considering making changes to a system that i have set up. currently, i have a core firewall behind 2 cisco routers. each router has a 1 gb isp link isp a 1 gb isp b 1 gb rtr a rtr b core switch same vlan core firewall i have mhsrp on the routers, so i have group 1 with mhsrpipa group 2 with mhsrpipb. router a is usually primary on group 1 router b is usually primary on group 2. on each router, i have a track in that tracks traffic through the wan circuits interface to various internet ips. if these fail, that routers priority for that group drops below the other one so then the other router is active on both mhsrp groups. on the core firewall, i split up the default static route into 2 traffic going to 0.0.0.0 1 points to mhsrpipa group 1 128.0.0.0 1 points to mhsrpipb group 2. on each router, i inject a default route to bgp with defaultinformation originate, and i have an event applet on each that, if the track i mentioned above fails, removes that defaultinformation originate adds prepends until traffic out of the circuit restores, at which point, these are put back to normal. this is so that inbound traffic doesnt come in to this router when it is having circuit issues the group failover the core firewall pointing to the group ips, that automates redundancy outbound. however, this is where i am having some hesitancy. i wonder if, lets say traffic comes in from, 8.8.8.8. i think, since both my routers advertise 0.0.0.0 0 with defaultinformation originate, bgp is at liberty to take whichever path it wants. lets say then that it chooses router b. traffic comes in on router b, but because i have the static routes split on the core firewall, this would go out router a on the way out, which has a different isp. i am not sure but would this cause issues? maybe it would be better to try and get each to use a network statement, so it only advertises whichever 1 that it should be using normally 0.0.0.0 1 on router a 128.0.0.0 1 on router b if the circuit has trouble on either, the other router should advertise 0.0.0.0 0 i would just adjust my event applets to configure this but i am currently unsure how i would map that out we currently have one isp shut down since we are about to get a new isp circuit with the same speed reasons. i hope those out there who are smarter than me that can give an opinion on this, it would really help a lot || there is nothing wrong with async asymmetric routing through stateless devices. the internet is generally async. edit use more accurate word choices || if the firewalls have static routes, how come you have a dynamic default route at all? it all sounds kind of complicated to me, but if its already working for you thats great and should answer your question about if the asymmetric routing causes problems or not. since load balancing on the 2 edge routers seems to be a goal though, i think asymmetric routing should be acceptable. i have some setups like this, but where my firewalls have static routes to the edge, i dont load balance. i run bgp on the firewall for that, and its definitely asymmetric much of the time. i also dont use defaultinformation originate, i just take a default route full tables from the isp and redistribute the default to the lan devices, so that if the isp goes down so does that route. no need for interface tracking that way, which can be unreliable if the isps router has some other stuff in between like switches or dwdm which is true in my case. || split routing is incredibly common. it can be a pain if you have a larger network e.g traffic goes out via an exchange, but returns via transit. generally you can control fairly easily how you route out, but generally its at the liberty of the sending network how they route to you. if you have a few originations in mind, it maybe worth contacting their peering teams see peeringdb and see if they can shape a bit back to you e.g is there a common transit their and your using?. sometimes with your transits you can control how they route to you e.g in a priority as youve mentioned, but then your limited. i suppose you could use communities if your transit supports it so you only allow a block specific ass to you over a specific transit, but that can get messy unless you know what youre doing. i think it maybe worth reading up on communities to see what you can do with them. however ive seen some in the past mess it up including myself! when you try to get a bit too clever and it causing unintended consequences."
failover and redundancy monitoring,"hey all, ive recently taken over our small networking team of 5 people and every day im learning more about what we dont know. ive been lurking this sub since i took over a few months back but i have to say my network knowledge is... rudimentary still. id like to hear from you guys how youd approach addressing the issues we currently face. we have 3 campus networks with 100 buildings at each site. this is managed by a provider, but they only came in last year so its not like they know everything already. due to reasons in the past, our whole documentation is spotty. we dont have reliable monitoring in place, we dont know the architecture in all places. the architecture diagrams are incomplete and often outdated. there are redundancy concepts in some places, but we often dont know about them and dont immediately understand how they work. also they are sometimes stupid, see below. last week we had an outage in one location where we later found out there where 2 lines going through. but they werent setup as activestandby lines, but rather some traffic was going over both lines. after line a went down, we noticed that line b was throttled for the past x months. needless to say, our outage could have been fully prevented if we better understood our redundancy setups. my current idea is to put together a reliable monitoring system that includes all 4000 components we only have some of them in our providers monitoring. how would i go about figuring out our wonky network architecture? currently, we are looking at how line a and line b from above example were setup. our hope is that we might identify other lines in our network that have a similar setup. tldr i hate only learning about the crazy stuff in our network due to incidents. how can i proactively understand what the hell is going on and move closer to an ideal setup? any ideas or caveats are highly welcome. if my plan is unsound, lets hear why. im here to learn. || well, i would get my team of 5, and have them start from the core switches and work their way down the line by finding the lldp neighbors. check every switch, find all of its neighbors, and draw a network map with ips on it in visio or something similar. would be helpful if you told us what kind of switches you have and is it a layer 2 or 3 topology || pick an snmp tool. the integrated syslog server inside most snmp collectors is convenient as hell, but might not scale well to 4000 devices. librenms prtg checkmk create an snmp community string and acl just for your tool. send snmptraps and syslog to your tool. monitoring syslogs are a higher priority than relearning the architecture. you will learn more about your topology as you implement the snmp changes. || i think uvanetworknerd is right. but as you crawl to implement a monitoring tool, id strongly recommend getting your team to do a detailed l2 and l3 diagram. it will force them to become familiar with the network and it will give context to your alerts. it helps to know what is in the physical and logical path to a downswitch so you know if you get 25 things down that its probably the distribution switchs ups that died."
failover and redundancy monitoring,"hi, my pan ha is currently connected to two nexus switches via vpcs. i have hsrp enable for each portchannel. this is a new deployment so i can still change the topology if needed. i found this drawing in google and this is exactly my topology lets say vlan 10 is my firewall unlink and vlan 20 is the downlink. since i dont have any traffic from users yet, i havent encountered any issues yet. i read that multicast is not supported in vpc therefore if multicast is needed, i would need to change the topology into something like fw1 to nx1 and fw2 to nx2 instead of as shown in the drawing. i went with the topology now thinking i could get a redundancy if nx1 fails. because i change to the topology below, if nx1 fails, i would have to force failover the firewall. is there a better topology for an pan active standby and nexus switches for a network that supports multicast? || palo supports linkpath monitoring, i guess you could set that up to make it failover exactly the way you want, so you wouldnt have to force anything. we use the setup from your second image and use several ha links over different paths to a secondary and tertiary switch. its a very flexible approach."
failover and redundancy monitoring,"recommendations for sdwan bonding with bandwidth bonding and static ip support? im looking for an sdwan solution for a single site that has one 500mbps dia connection one shared 100mbps connection our primary goals are to 1. bond the bandwidth from both connections for increased throughput and reliability. 2. maintain or get new static ip for telecom services. 3. use public internet to connect to aws and azure datacenters. are there any sdwan vendors that can handle these requirements at a reasonable price? bonus if they simplify failover and have robust monitoring tools. || i dont know how its priced, but velocloud will do what you want. || i think what youre saying is that you want to be able to do is use both of the connections youre paying for in an active active type setup. what you can do is load sharing across two unequal connections with fortigate or velo or others. your internet circuits become underlay transport for an overlay sdwan tunnel to a gateway. each underlay circuit will have a routable public ip and the overlay will have its own routable public ip. youd create business policies that are basic rules for traffic management. for example, 1. all internet browsing goes out underlay 1 and fails over to underlay 2. 2. site to site traffic will use the overlay tunnel and the sdwan appliance will optimize the traffic across both isp another cool feature is some sdwan solutions can duplicate voice across both circuits so if one circuit goes down, calls wont drop. very helpful if youre a voice heavy company. || fortigate. you buy the box based on throughput and thats it. no licensing costs for sdwan on top of that its all built in. for an aggregate of 600mbps of throughput assuming no ngfw functionality enabled, just using it as an sdwan endpointrouter you could deploy something for 1000 easily. bonus its also a fullfeatured firewall. so for maybe 2x3x the cost of that base model you can get one that will do your sdwan load balancing as well as all your ngfw stuff."
