mot_cl√©,post_et_reponses
anomaly detection in network traffic,"i have been working on this lab in ine for the ccnp encore and i can get everything to work no problem but one thing struck me that i dont quiet understand. this is the image of the topology when we redistribute the eigrp 100 routes in bgp and the routes are installed into r3s rib i can reach the next hop for r2 which is the router that redistributes the eigrp routes into bgp but i cannot reach the destination of the route install. for example one of the routes redistributed is in the trace route i can reach the r2 router but fails after i could not understand why that is the case. i thought once r3 reaches the next hope r2 would know how to send that traffic to r1s loopback considering it has a route to reach it in its rib. this is the lab in question if anyone uses ine || maybe you have forgotten to redistribute bgp into eigrp 100. || when r2 is redistributing the eigrp routes into bgp, it will advertise it to r3 unless if you have a routemap that prevents it to be advertised. do you have a routemap? the route for 140.0.1.1 must be presented in r3 routing table, otherwise, r3 will have no idea how to reach it. it is not enough for only r2 to know how to reach 140.0.1.1. can you show the output of r3 routing table? do a show ip bgp 140.0.1.0"
anomaly detection in network traffic,"my company currently has a security device that sits inbetween our router and our isp. its basically a transparent firewall that will block traffic based on geographic location, security feeds, ports, and ip addresses etc. it reduces the overall load on our firewalls by a drastic amount and its an easy first stop block that i dont really have to think about much. its fantastic...when its working. unfortunately now, this appliance crashes constantly and the vendor cant figure it out. i am at my wits end with it as our internet completely goes down when this device stops working. im browsing around looking for security appliances that sit at the edge of a network that perform a similar function. im wondering if anyone else here uses a similar product described above? im tempted just to have my company buy another firewall i can throw on the edge to do the same thing but managing that is a bit more work than what is currently in place. || any modernappropriately sized firewall should be able to handle that without needing any help. its just another point of failure, as youre currently discovering. just get a single correctlysized box to it ideally an ha pair, but whatever. dont toss in another firewall in front of your firewall. || we just do that on the firewall itself. || if you still have another firewall inline and the vendor cant figure it out, i would be ripping it out immediately so you can stop the outages. if its just geolocationfeeds, and other misc ip blocks then even pfsense with pfblockerng could handle that."
anomaly detection in network traffic,"so i had this idea to implement a dlp data leakage prevention solution with a mix and match of tools. so the basic idea would have a proxy server capable of intercepting and replaying requests kind of like how burp suite works. route all the traffic from the employee laptops through this proxy server to be able to read all of the network traffic http and included. using these logs, pass it to some analysis engine where i have designed rules to prevent some form of data leakage. i am kinda stuck at the proxy server part, i came across this tool called mitmproxy which pretty much is what i need, it intercepts the requests, then i can write those logs to a file and replay the request back to the server seamlessly but a problem that arises is that mitmproxy is written in python and i am doubtful if it would be able to handle all of that traffic that goes through each employees workstation. i looked into using squidssl bump but it seems pretty complex to set up any suggestions on how to proceed with this? || "
anomaly detection in network traffic,"hey , i could use some help figuring out the best spot to drop in a ips in a network im working on where weve got multiple sites connected via sdwan over mpls, back to our central data center. the traffic path is basically branch sites hub routers wan firewall internal network were thinking of putting the ips in l2 transparent mode between the hub routers and the wan firewall, so we can inspect traffic coming in from the field before it hits anything important. couple of things im unsure about is this the right spot to put the ips? any issues with sdwan tunnels ipsecgre being broken or not inspected properly in this position? would you recommend placing it somewhere else? anyone have experience using tippingpoint specifically in sdwan setups? appreciate any advice, war stories, or gotchas youve run into. thanks! || if youre not planning on breaking open tls to inspect it and dealing with all of the associated fun of managing that process, id ask your security folks what they hope to actually see on the wire with ips in 2025. || does your firewall not have ips functionality already? if youre using an ngfw like a palo alto or fortinet, theyre already performing threat prevention, sandboxing, malware detection, etc. etc. if youre purchased those subscriptions. the benefits are probably quite low if youre adding another ips platform sitting adjacent to your firewall. || it depends on what threats scenarios you will be using the ips for. if you are worried that someone will break into your ipsec, and s8mple acl wont be enough, then you will need the ips infront of the sdwan router. if you are worried about internal users breaking in through your wan network, then why not enabling ips on your firewall?"
anomaly detection in network traffic,"hello network enthusiasts, i got the chance to help build a small isp network. we are talking about 6000 customers. i sketched something here the requirements are to keep the network as simple as possible with the equipment they already have in use. the routers are connected to the internet via different ip transit providers on both sides and have ospf and bgp in between. i have implemented some security features. antiipspoofing olt checks ipv4 mac binding learned by dhcp dhcp authentication with option 82 added by olt and checked by dhcp server l2 isolation on olt i want to add features to minimise the risks of the large broadcast domain. for example, i would like to disable arp learning as the router fills the arp table based on dhcp traffic. i think this would prevent scans from the internet flooding the network with arps. but then i would have to make sure that there was some sort of arp sync between the routers. i have also thought about configuring a different vrf for the customer and only exporting subscriberroutes 32 to the default vrf. but this also has some redundancy issues if one router goes down and the other has no learned subscriber routes... i also read about ipsubscriber sessions, but i do not have an aaa server and would be very happy to get around without another server. the setup in the draft would work, but of course there are many security issues, please list anything that comes to mind. open to suggestions and criticism to fix this setup. edit my last attempt was trying to sync the arp tables arp redundancy group 1 peer loopback ohter crt sourceinterface loopback10 interfacelist interface bundleether1.82 id 8 but this unfortunately does no sync the dhcp learned arps only the dynamic ones stored on 0rsp0cpu0 . and as i said i would like to disable dynamic arp learning on the routers. i need the arp with ip to be synced to the second router. crt 01 interface bundleether1.82 description xgsponinternet ipv4 address 192.168.168.2 255.255.254.0 proxyarp localproxyarp ipv4 unreachables disable encapsulation dot1q 82 00cpu0 address age hardware addr state type interface 192.168.168.1 0000.0c07.ac52 interface arpa bundleether1.82 192.168.168.2 5087.892a.c0d4 interface arpa bundleether1.82 192.168.168.21 480f.cf27.27d3 dhcp arpa bundleether1.82 192.168.168.100 000034 9c37.f47d.4528 dynamic arpa bundleether1.82 0rsp0cpu0 address age hardware addr state type interface 192.168.168.2 5087.892a.c0d4 interface arpa bundleether1.82 192.168.168.100 000034 9c37.f47d.4528 dynamic arpa bundleether1.8 crt 02 interface bundleether1.82 description xgsponinternet ipv4 address 192.168.168.3 255.255.254.0 proxyarp arp learning disable localproxyarp ipv4 unreachables disable encapsulation dot1q 82 ! 00cpu0 address age hardware addr state type interface 192.168.168.1 0000.0c07.ac52 standby arpa bundleether1.82 192.168.168.3 e0ac.f13d.4404 interface arpa bundleether1.82 192.168.168.100 000034 9c37.f47d.4528 dynamic arpa bundleether1.82 0rsp0cpu0 address age hardware addr state type interface 192.168.168.3 e0ac.f13d.4404 interface arpa bundleether1.82 192.168.168.100 000034 9c37.f47d.4528 dynamic arpa bundleether1.82 || reading through everything, i dont think this design is going to work from a practical perspective as youve found because youve essentially used an enterprise branch office, dual wan design as your isp design. except you dont have any firewalls at your as edges which means youre wide open to the world with no safeguards and you have no aaa of any kind that could theoretically be used for things like subscriber validation, which basically means a lot of the options you could take to mitigate security issues are nonexistent. since youll probably ignore this and try to push forward anyway, ill at least answer your question on arp sync between asrs. the answer is simply no. arp tables between asrs do not sync and in that platform are treated as local to device only. || proxy arp is no solution for not knowing how routing works. || i havent used this platform in a while, but look into subscriber arp scalemodeenable and bng geo redundancy"
anomaly detection in network traffic,"hi networking folks, ive recently inherited an aws cloud environment thats... lets just say, full of surprises. its a mix of legacy and inprogress migration workloads. every other day were firefighting because systems cant talk to each other, sometimes its route table issues, sometimes security groups, sometimes traffic blackholed in transit gateway or lost in a firewall appliance. what im really looking for is a tool that can visualize traffic flows in aws. something that lets me see which eni is talking to which eni whether its flowing through transit gateway which security group or nacl it hits if its being handled or blocked by a 3rd party firewall appliance like palo alto or fortinet bonus if its affordable or open source, and if nothing good exists, im seriously considering building one. maybe even turning it into a product. anyone here using something like this? or building one? would love to hear what tools you use, or what you wish existed. thanks in advance! || freeopensource that would work natively to gather public cloud traffic. public cloud are black box, you cant really monitor it like classic network infra."
anomaly detection in network traffic,"hey everyone, im a network admin for a school district and we have started installing ip intercom systems and using more and more airplay style devices. this means that i want to start managing multicasting more on our network. ive not had to mess with igmp snooping or pim before and am trying to find some good documentation and guides on how to set this up. our district is a ring network with ruckus icx 8200 switches running out buildings and a cisco nexus 9000 series as our core switch. everything later 3 is handled on our nexus. does anyone have any documentation or guides on how to set up igmp snooping and pim on this kind of network. my hope is for multicasting traffic to be routed to the nexus to then go to its destination instead of being broadcast across the vlan like normal. im assuming pim would be enabled on the nexus with an interface in each vlan and the ruckus switches would have igmp snooping turned on. though idk if theyd be set to passive or active with a querier ip. please let me know if im also misunderstanding something as ive had to try and learn a lot about this in a short time. || conceptually igmpv3mldv2 snooping on the l2 switches and aps if they have the feature. pimsm would run on the layer 3 cisco switch on every layer 3 subinterface vlan. ive never configured pim on cisco myself, but this should help you"
anomaly detection in network traffic,"i have a dell n2224x switch and for the life of me cannot figure out what might be disallowing traffic originating from certain vlans to hit the management ip. switch ip vlan 10 host 1 ip vlan 40 host 2 ip vlan 20 some scenarios i can pingssh to the switch ip from host 2 but not host 1. i can pingssh to other devices in vlan 10 from host 1, but not the switch itself. all vlans have been created on the switch i can pingssh to a nondell switch ip that is connected via a trunk interface on the dell. im kinda stumped on what might be going on here. hopefully i have provided enough context for some things to check. thank you for your time. edit this has been solved. i changed the unused outofband management port from 192.168.40.x to an unused network segment and immediately the switch management interface would accept and route traffic from my vlan 40 nodes. very odd behavior for something that should be outofband. really appreciate all your suggestions and assistance. || sounds like theres acls access control list in place. what does the command show ipaccess lists display? || is ip routing turned on? || is at least one interface with vlan 10 online? not sure if every switch does it but i know hparuba switches will disable a vlan if there are no active ports."
anomaly detection in network traffic,"i have been searching to try and find an answer but i keep coming up blank. so any thoughts will be appreciated. i have asked both dell software support and dell networking but neither of them has an answer. the networking group does not have any best practice for how to setup the switch for use with hyperv to best take advantage of vlt networking. i have dell pro support plus on all my equipment. the dell network team says it is a hyperv question on how they want it setup. the dell software support says this is a dell networking question and they both think they are independent. i am running hyperv and using powershell to create a virtual set using hypervport for load balancing. i have a 3 node cluster running 75 virtual servers on the cluster set does not support lacp my hyperv host are connected to two dell switches that are running dell os10 setup with vlt all servers are the same the following is an example of one server 1 connected to switch 1 with 2 ports connected to switch 2 with 2 ports all 4 ports on server 1 are in a single set virtual switch i have added host os, cluster network and backup network as virtual nics off the main set so the os sees the host os, cluster network and backup network iscsi is on dedicated nics that are not part of set and are using mpio with a nic connected to each switch. to best handle efficient routing of traffic between virtual servers and fast notification of down link events what is the preferred method of setup from the switch side of the equation. i run 10 rds session host servers using fslogix for profile storage so network latency matters to give my users a good experience. option 1 do nothing on the ports at the switch level. this requires that all traffic be routed and can put a lot of traffic on the backplane of the vlti interface between the switches because it does not optimize traffic. option 2 setup a port channel with lacp set to static. this will communicate to the vlt switches the group of ports are together for routing and notification and not creating loops. my understanding is this also helps with routing of traffic and notification during loss of 1 switch i.e. maintenance windows for switch. option 3 doing an lbfo nic team that does support lacp then apply the set switch to the team was an option but is not the recommended method from microsoft. also this only gives you one vmmq because the set only sees one nic so it cannot take advantaged of all 4 nics for offloading traffic. option 4 some other method best load balancing for vlt switches vnic is the guest nic and pnic is the physical nic currently all my virtual servers have 1 vnic best practice from microsoft is to use hypervport for all 10gb or faster nics. option 1 hypervport this basically sets a vm to a card the distribution is done by the os and just load them up in a round robin fashion. this vnic1 connects to pnic1 vnic2 connects to pnic2 vnic3 connects to pnic3 vnic4 connects to pnic4 vnic5 connects to pnic1 etc. option 2 dynamic the traffic from vnics gets send out on all 4 pnics in round robin but only one pnic can receive traffic. i do not know if it the process is smart enough to know that it is talking with a vm guest that also on the same switch then it would only send out on the pnics that are connected with that same switch. this could generate a lot of traffic on the vlti backplane if half of the packets are coming from the other switch. i must be over thinking this which is not unusual for me but the lack of documentation is pretty astounding considering this technology has been around for 10 years. || vlt seems to be the dell version of vpc. dont do anything on the switches, set is switch independent and works fine as is. || yep. no fancy config on switches. how load is balanced and bandwidth utilized depends on if the port is set to dynamic or hyper v. you should probably use hyperv port for your vms. refer to the guide from lenovo below which details set requirements and setup for hyperconverged. it is the same for converged, but includes rdma setup. microsoft also has documentation on this on learn.microsoft.com. || yes you dont really do any lag or anything. just present the ports and set itself will handle it."
anomaly detection in network traffic,"i have a customer who we did a network design for just over a year ago. we talked them through all the pros and cons as part of the design process and they selected to terminate all the vlans onto their cisco switches and then just have a layer 3 transit up to the firewall. this firewall was easy to spec as it was essentially just a case of how big are your internet pipes, how much might they grow over the next 56 years. boom there is a firewall. we are now 12 months layer and they are saying we want to terminate all the vlans and they have a lot, and want more onto the firewall. i agree this is a superior and potentially more secure design but i suspect if we do this it will just overload the firewall as it just wasnt speced for that use case. the customer, and rightfully so, is saying give us some figures to backup that statement. that got me thinking.... what is the best way to do this? my initial thought process is put netflow in on the core switch and look at the traffic levels between the various vlans. we could also monitor the traffic levels on the svis its a cisco core switch and see what traffic levels they get. currently the customer is using prtg but is there some other tools that could give us better reporting? but what does reddit think? what have i missed? what else could i consider? ||  || you dont say anything about the fw capabilities. its very difficult to answer the question in the title if you dont specify the firewall itself. and i do agree with other comments it all depends what you want to do with the traffic when it hits the firewall. do you just want to do regular l4 filtering or are they going with something like l7 filtering appid with pa, ssl decryption? are you going to employ security profiles to filter ew traffic as well? is the firewall doing any ipsec tunneling or ravpn? basically, its not just the amount of traffic, its also what youre going to do with it. newer fortigates and pa series starting with 400 series are small beasts and can handle a lot of abuse of course, the more you need, the higher you go on the ladder when speccing the fw as well. as for routing, i disagree with some of the comments unless youre talking about very specific routing usually reserved for datacenters, firewalls are more than capable of doing it, at least major vendors in the field are. if youre talking about just intervlan routing, then double that. ive been in networking field for past 20 years, last 10 years mostly security engineering firewalls and unless im working with a very specific type of a company that absolutely needs to have line speed for intervlan traffic, all vlans are terminated on the firewall, no exception im done with the days of 2010 years ago when i was trying to figure out which acl on a switch is blocking something. || group networks inside a vrf and use the firewall as the gateway. this reduces the number of vlans on the firewall and allows east west between like networks with minimal security concern."
