mot_cl√©,post_et_reponses
build your own network lab,"hello fellow networking folks, im currently trying to build a small monitoring solution for multicasts. in our lab we have a nexus9000 c93108tcex running version 7.0. i want to start with this device and maybe later continue supporting others. the goal is to see for each interface which multicasts are entering and which are leaving. sflow seems to be a viable solution for this problem since it just samples a defined subset of all the packets passing through the monitored interfaces. for each sampled packets sflow provides some additional information. for me the source id index and the input interface value are most interesting. i am keeping to the field descriptions provided by wireshark since different sources call them differently. when a packets arrives from outside the switch on one monitored interface, everything works flawlessly. i can compare the two values to the values in the mibii interface description. both values match as they should. when a packets is leaving the switch the story goes differently. the input interface value is correct so i can still see, on which physical interface a packet entered the switch. source id index always displays hex 0x80000000. it should show the interface i am monitoring right now, the interface from wich the packet was sampled. if the situation stays like that i can only properly monitor incoming multicasts but i cannot monitor through which interfaces packets leave the switch. in my opinion the cisco documentation is not really clear if this behavior is expected or not. for nxos 10.5 i found sflow does not support egress sampling for multicast, broadcast, or unknown unicast packets. but the nxos 7 documentation states egress sflow of multicast traffic requires hardware multicast globaltxspan configuration. which i tried. the other sentence in there drove me totally nuts for an ingress sflow sample of multicast packets, the out port is reported as multiple ports with the exact number of egress ports. this is not supported on cisco nexus 9300ex and fxp platform switches. like, what does this even mean? i would interpret it as you can see how many interfaces an incoming packet will go to, but not on your device. but that should not affect what i can see on the sampled egress packet, right? i assume that either i am not smart enough to read the documentation correctly or the documentation is not coherent. so my question is is it possible to correctly sample the information for egress multicast traffic with my switch and if so, what needs to be done. if it is not possible i am interested how well other vendors support sflow monitoring of multicast packet especially arista. is it only cisco implementing it weirdly or is there a bigger reason for this. im also thinking about possible alternatives for my implementation and if you think they could be possible 1. combine the snooping and group report with the input data show ip igmp snooping groups. this would be possible but is no true monitoring. i wouldnt know when the switch does not pass a packet. 2. cycle the sflow monitoring port. if i monitor only one port at a time i always know where a one multicast enters and where it leaves 3. i look at some other interface data counters or something similar if there are any correlations i can use to match output multicasts to interfaces in some way. if you have any ideas id appreciate your help. || "
build your own network lab,"im trying to understand this whole coherent optics thing compared to building your own dwdm network. can you just get a switch with 400g port, put a coherent optic there and then have edfas every 100km to get something like 300km connections? looking at the 400gbps optics seem be around 10k each and then those edfa amplifiers from few thousands to something like 10 thousand euros? if we can rent fibers could we do 300km stretch with just having a 400gbps optics on the both ends and then have two amplifiers? im asking for just preliminary information, if we go forward with this well need to get someone who really understands this to help us but at least id like to know what is the idea behind these and if its something we could think getting. i think building your own dwdm network would be a lot more expensive? || more or less yes, but youre going to have to rent space for those amps to live, pay for the power, get ready to roll a truck if thing breaks. id also say you cant just have one path, you need a completely diverse loop. fibers can and will be cut and be down for hours to days. if you need 400g now but 10x that in a year, maybe this is worth it to you. if 400g is going to hold you over for a good while, id just buy a wave. || you need to know the type of fiber, the loss on each span, get them to measure cmd and pmd, where you can place edfas, and make sure the optics you are using are compatible with your system cmis is a bitch. and yes, you can do it without fancy optical networking gear. zero db xmit power 400g zr dco is probably what you are looking for. yes, i sell this shit for a living, no im not looking for sales lowly sales engineer after 30 years in industry be careful with fs for dco optics in the 100 and 400g space. their support can be lacking. consult with an optical engineer. || for a p2p unprotected link yes it can mostly be done pretty simply. you also need to be more conservative than just 100km segment as you dont know quality of the fibre and how many splices or connectors. you also need to consider for your wave service where is it protected. if its to the end then your comparison costs are 2 paths and switching hardware not jsut coloured optics in switch. honestly unless you see yourself going from 1 2 3 4 wavelengths from bandwidth growth then the effort may not be worth it. generally the dwdm systems while they have eth all have fibre channel for storage systems and they want the lowest latency possible sometimes not as predictable over wave."
build your own network lab,"hey everyone, i run a shortterm rental business with about 180 properties, and were looking to optimize our guest wifi setup to save costs and improve control. right now, we use ubiquiti aps and pay stayfi a hefty monthly fee 1,000 for a captive portal that collects guest info name, email, phone before granting internet access since airbnb doesnt share this info with us anymore. we want to ditch stayfi and build a custom captive portal hosted on our own website to collect guest info name, email, phone and store it in google sheets or airtable. boost website traffic seo by hosting the portal on our domain. standardize the portal across all properties, whether using ubiquiti aps or ispprovided modemrouter combos. our current setup guest network captive portal enabled uses ubiquiti aps, currently managed by stayfi. admin network no portal dedicated to smart home devices tvs, thermostats, etc.. new ispprovided equipment some properties have adtran 8546 routermodem combos. the new fiber isp is open to configuring them to support a captive portal and working with us directly, but we need to confirm feasibility. what were trying to do reconfigure ubiquiti aps to redirect guests to a portal on our own domain instead of stayfi. configure ispprovided adtran 8546 routers to do the same to avoid extra ubiquiti aps at new properties. automatically store guest data in google sheets or airtable for marketing crm use. set up a dashboard to monitor all networks, detect outages, and manage device health ideally via unifi or another tool. questions we have 1. has anyone successfully configured a captive portal on an adtran 8546? does it allow custom redirects, or do isps typically lock this down? 2. whats the best way to set up a captive portal that works across both ubiquiti aps isp hardware? any software recommendations? 3. whats a good monitoring tool for tracking all networks devices in one place? wed love to be able to connect it with some automation to automatically sms or message the guest when they unplug wifi equipment for who knows what reason.... and then complain the wifi isnt working. 4. any pitfalls we should watch out for when implementing this at scale? any thoughts? if youve done something similar or have any insights, id love to hear your advice. thanks in advance! || yuck. people expect wifi to be free and not scrape their details in the year of our lord 2025 ad. high friction wifi sucks. storing peoples pii in google sheets is gross. || lost me at google sheets. || how about hiring a fing network consultant?"
build your own network lab,"hello, as the title suggest, i am looking to see how yall handle the configuration firmware upgrades of the ups pdus supporting your network devices in your enterprise environments. in my environment, we use predominantly eaton vertiv for our power devices. currently we have a ton of them already deployed and we recently configured our auth servers to allow for radius authentication to these power devices using ldap. now i am just trying to figure out how to go about pushing the radius server configuration to 300 upspdus in your environment do you build your own vendor agnostic configuration management tool use vendor configuration management software like mct for vertiv, ipm for eaton or just do it manually || do your upses pdus have a cli? has support for a bunch of upspdu, and you would get full config management and the ability to bulk deploy changes. you will likely have to contact support to get your devices onto the supported list if they are not there yet, but thats usually very quick. || eaton ms, m2 or m3? replace all ms. m2 will likely become unsupported soon but remains solid hardware. m3 firmware 2.1.3 is out with support for ztp. m2 and m3 config is json. can be modified with trivial python and downloadeduploaded via ssh. do install sshpass for the purpose. i suggest having all hardware on the same software version prior to mass configuration. do script it yourself. || eaton firmware is posted here how you do it will depend on types of upss, pdus, network cards, etc. you may want to contact tech support"
build your own network lab,"i understand basic principles of sdwan such as decoupling data and control plane, history with open flow, bazzwords such as intent based networking, sase, overlay, no more traffic backhauling, ... however i still have quite a few questions to which i dont have answers, or im unsure of my own interpretation. i would be very grateful for your help in finding the answers for any of these questions. 1. if i understand correctly are all these controller elements just vms and there is no physical controller for any vendor? or is it? 2. where is sdwan controller eq. vmanage, vsmart, vbond if we talk about cisco implementation usually located? do we set it up at our main location hq, in public cloud google, aws or is it hosted in vendors cloud? what are possibilities and best or only practices? 3. do all vendors have multiple controller elements or is it just cisco? 4. how does sdwan controller affect edge router operation. does it actually just push configuration to routers or does it populate tables rib, fib, cef?? or both of these? 5. what happens if sdwan controller fails? does wan connection stop working or do routers only stop receiving updates for path optimization? 6. is it common to have multiple sdwan controllers eq. multiple vsmart controllers. if yes, what is the purpose of this? only for redundancy so they are synchronising between each other or is there something else? 7. when we are talking about path optimisation, how does sdwan controller determine path parameters? does it force routers to send dummy test traffic to various destinations and then receives response? 8. what is the overlay topology for edge routers? as far as i understand there are ipsec tunnels between all of them so mesh topology and also from all of edge routers to sdwan controller elements. 9. does edge routers have tunnels build to resources in public cloud aws or office365 or are they using just regular internet connection without setting tunnel to access these resources? 10. sase is sdwan security sse but how do we achieve security if we have only sdwan without adding sse functions? in traditional network architectures traffic is bachauled to central location for security inspection but in sdwan architecture this doesnt make sense because in that case we just loose traffic optimisation. what is the alternative, how its done in sdwan environment? 11. how much configuration is needed when we are deploying edge routers? only ip and default route that they can connect to sdwan controller or is there something else? || these are answers for cisco sdwan. i dont know about other vendors in fact i never used any sdwan in prod environment xd sorry for typos and royalty level english 1 controller elements are software who runs on server. 2there are 2 types of deployment onprem and cloud. onprem you buy your servers for controllers and deploy them in your datacenters. cloud deployment, you dont need physical devices running on your dc as controller, as long as you have connection to cloud provider your sdwan runs okay. these are options, you pick what fits you. 3idk. 4it affects routers configuration. control and data planes as well. 5if your whole datacenter burns down its fine, braches keep their data plane connections up and running. so they still function as must they. but since you have no controller you cant manage them. 6yes redundancyboth in 1 dc or between multiple dcs, redundancy of control connections, and integrity of fabricthere is a integrity control runs between redundant controllers in order to make sure if active one fails the backup can run new connections as primary was. 7 it runs bfd on ipsec tunnels to determine path metrics. and you can create policies by using these metrics for example, if the mpls tunnel of branch a has more delay than 100ms switch voice traffic to inet. 8from all edge routers to controllers control conections, full mesh ipsec tunnel between all bracnhes by defaut. you can modify it as hubspoke or partial mesh. 9as far as i know you can run a virtual router on public cloud isp and integrate this virtual router into your sdwan domain similar like a branch router. or you can use cloud on ramp as a local cloud connection breakoutsimilar application to dia. if you go to cloud provider x dont use ipsec tunnel to dc use local internet breakout etc. 10you need to have a minimum configuration in order to onboard new router into your sdwan domain, hostname, systemip,siteid,organisationname, ip address of your vbond, transport vpn configuration interfaceipdef route. but in ztp application reduces this initial configuration. it onboards new router by connecting into cisco cloud first gets necessary informations from there. if i have a mistake pls enlighten me too || im almost crying... im so happy to work on the other side of the business carrierhostingisp so i dont have to deal with sdwan. this list of questions seems to be a nightmare and raise a ton of red flag for me. when you dont know much about a technology, even with decades of experience, im humbled. im a newbie. || 1. i remember silver peak has some units, but we can say mostly vm prdocusts. 2. scale, and business model will affect controller location. onprem hub site dc or hq first option on the list. 3. versa might have multi elements, but im not sure. 4. both, config sync and route reflection with underlay ip tasks handled by controllers 5. cisco keep tunnels for 24hour. 6. redundancy. 7. i dont know the answer. 8. data topology default mesh, you can force it to hub site star topology 9. its vendor dependent 10. wan edge has firewall capability and native cloud integrations. 11. ca certificate used to harden onboarding."
build your own network lab,"im an active duty mildod net admin. our environment is about 280 ish cisco devices, with around 25 junos. we had a practice audit a couple of months ago that civilians did and they drafted a huge document detailing the vulnerabilities and stigs findings of our network devices. my shops legacy of doing stigs is via manually when wind of the real thing arrives but pulling 12s to do so didnt seem fun or smart to me, so i started looking intodoing some basic automation of stigs before the real inspection arrives. my question is how do you guys go about it? so far, ive just been using netmiko to handle the simpler things like making sure no ip http server is configured, configuring proper line console timeouts, global configs, etc. ill try a basic outline of the script in my own cml lab before, push them to the dod gitlab platform, which i have a project dedicated to this in, run things on a sandbox switch in the environment, and then i push it them out. theyve worked great but is it the best methodology to generate a separate script for each vulnerability? i usually break down for each stig into a detection and remediation script. i wasnt too familiar with stiging before this, but once things get standardized more, i know this something that should be done quarterly, as new checklists drop. do you guys input all your show commandsglobal config commands into one large script that checks these devices, when it comes to doing these quarterly? is there a certain pipeline of tools or methodologies you guys are using to maintain compliance? if theres a way i can improve my process, im 100 all ears. edit thank you guys for the suggestions, we do have solarwinds and are in the process of getting dnac. i will look into the things suggested by you guys, theres been lots of good info, seriously. || you make a master hardening configuration and then push it to a handful at a time, evaluate, then push to the next. then after youre done, you start scheduling follow ups every quarter for a group of them so that every year you check stigs at least once on every device. when you bring up a new device you use the golden script and the hardening script and it should be stiged from the start. || whats a stig? || you should be doing these every quarter for your package to keep your network acceeditation. the fact that you are not submitting open findings and poams every quarter but only when you get wind of an inspection is distressing. if you keep up with them every quarter and submit as required the inspection is a cake walk. how does your isse sleep at night?"
build your own network lab,"so we have a symmetric irb fabric that works well, and weve not had any issues whatsoever with functionality or limitations up until now. i feel like this is more of a quirk than anything, but im curious what others have to say for this situation. we have a vm that we need to bgp peer with which could vmotion to n number of different hosts throughout the day due to drs. the current design does not warrant disabling drs at this time. with that said, the vm could move behind any number of different vteps in the data center. with this in mind, we made a conscious choice to leverage ebgp multihop instead of having each vtep have its own bgp config for peering with this vm. so we have a border leaf in this symmetric irb fabric where we built the ebgp multihop session off of, and the prefix this vm is advertising into the network originates there. now if youre a server trying to get to the prefix in question, any vtep youre behind will do a route lookup and see that theres a type 5 route sourced from the border leaf vtep ip. so a packet from that server would make it to the border leaf, and the border leaf subsequently does a route lookup and sees that it has this route from the vm neighbor, and it also has an evpn type 2 route for that neighbors interface ip which the session is built on sourced from the vtep which is connected to the host that the vm is currently on. the problem is, when that packet is decapsulated on the vtep where the vm is, the vtep does another route lookup bridge, route, , bridge and sees that the prefix the packet is destined for is behind the border leaf vtep, so it sends it back across the fabric creating the routing loop. we tested this with asymmetric irb and it works fine, which we believe is due to the fact that the vtep which the vm is behind does not do another route lookup after decapsulation. some solutions that weve come up with 1 disable vmotion and keep the vm locally on a specific host and build bgp directly from that vtep. 2 make a nonvxlan vlan thats locally significant to each vtep where the vm could vmotion to and only the vtep that actively has that vm behind it would have an established peering 3 make an l2 vxlan vlan without any anycast gateway and have a different nonfabric device be the gateway for this vm thoughts, ideas? || i think if youre okay with funneling the traffic through your border leaf you could do 3 and put the gateway on the border leaf only. that way traffic would have to enter and exit through the border leaf and into that specific vlan for this bgp vm. you could also have it exit the fabric via an vrflite session on that vrf to an external device instead of putting the gateway in the fabric. but then you would have to inject the route from outside in for the rest of your vms. curious what youre using it for, is it host overlay for k8s? || the problem is, when that packet is decapsulated on the vtep where the vm is, the vtep does another route lookup bridge, route, , bridge and sees that the prefix the packet is destined for is behind the border leaf vtep, so it sends it back across the fabric creating the routing loop. doesnt the splithorizon rule in evpn apply here? vtep should never send back to fabric anything it receives from the fabric if the case is not particularly for external vteps in context of dcis. || there is a feature in evpn called the overlay gateway. this causes the centralized peering point your borders in this case to rewrite the next hop to be the originating device in the overlay your server instead of using itself as the next hop. when this propagates to your other leafs, this means that the leafs learn this route with a next hop of the type 2 route destination. on nxos 9.3, anyway, i have not found this feature to work dynamically. it works if i statically set the overlay gateway via routemap, but not if i set it via neighbor address."
build your own network lab,"im setting up a small network for a school and looking for some advice on compatible access points for cisco 3560 and cisco 2960 switches. since budget is a key concern, im exploring options outside of ciscos own aps. id love to know if there are any budgetfriendly access point brands that can work well with these cisco models, especially for environments with medium to high user density e.g., classrooms or computer labs. if anyone has experience with brands like tplink, ubiquiti, or others in a similar setup, please share your thoughts! im especially curious if there are any challenges or limitations with poe compatibility, management, or vlan configurations when mixing brands. additionally, if anyone can suggest alternative switch brands that would work well in a school setting and have good compatibility with various aps, id appreciate it! im open to refurbished models or older series that can handle basic network requirements but still keep costs down. thanks a ton in advance for any insights or recommendations! || switches and aps dont have to compatible for anything really outside of poe. || your switches have been end of life for over 20 years. id fix that first || do i understand correctly that this is purely an academic exercise, or do you really have to build it? in terms of general ap support, both the switches and the aps should adhere to the same standards and interoperate, but with very old switches are we talking vanilla 2960? you would start to run until issues where the old hardware doesnt support modern standards for example, old gear wont support the later poe standard revisions, and might not be able to power the aps, depending on what they require."
build your own network lab,"hi all im a small isp trying to deploy ipv6 with prefix delegation pd with redundant routers. the challenge is there isnt much in good dhcp6 pd w route insertion solutions. it seems youre expected to either run it on a single smaller router opnsensesimilar where the os glue handles the route insertion, or have a big programming staff that custom creates your own solution.... so, my small programming staff part time offsite programmer and myself attempted to solve this by using keahooks and exabgp. i had a solution that worked in the lab, but it is falling apart in production with vast performance limitations. my solution was to have a script called by keahooks that would pass it the information on any lease changes. that script would extract the needed lease info pd block and next hop and call exabgpcli with the route insertion or removal command. in production and not a huge network, about 400 customers, im seeing system loads 30 on this 4 core vm, cpu pegged, and exabgpcli commands queueing up, often 15 deep, and taking an average of 3 minutes to complete execution! i have no idea why exabgpcli is taking so long.... so, reading the docs more deeply and they arent great, i eventually found a note indicating i shouldnt be relying on exabgpcli for app connection. ok, so what is the right way to do it? it appears i have to run the script from inside exabgp....trouble is, i cant. this isnt some standalone script that does some pings or something and then creates route adddelete statements....it has to get the info from kea, and kea doesnt have an api or other way to get it other than running the script directly. in any case, im sure im far from the first person with this problem, or a solution to it...id greatly appreciate any pointers to a better way to do this.... || im also interested if you get this working. please do share with us all, in a blog post or something. the last time i looked into iapd ha for isp usecase, only juniper had a fully built proprietary solution for this issue. to my knowledge. its been a long debate in the past at the ietf on how to resolve this, but as we can see, there no real known open standard solution. || this is something ive personally run into and been annoyed by a couple of times, so i thought id spend a couple hours on a poc of keagobgp for this. it successfully gets routes from kea into gobgp when iapd leases are created and removes them when they expire or are released. i didnt go further with it to flesh out bgp policy etc, left to the reader. cc u3mu6quo0pc7du5ypbgbi || trouble is, i cant. maybe not quite how you imagine it, but you can definitely have an agent that runs in exabgp and receives events from kea. if youre able to fire a hook script based on the events of interest, then the simplest way to do this is to created a named pipe or even a normal file which the hook script writes to, and the exabgp script reads from. since you only need to tell exabgp about changes, this should be pretty straightforward. see this simple example kea doesnt have an api or other way to get it other than running the script directly. it doesnt? there is a management api, and with the leasecmds hook installed it should provide what you need, though not event driven so the other way is probably simpler and better. however, you probably also want to be able to tolerate restarting exabgp without permanently losing your lease advertisements, so you probably need to utilize this api at startup. presumably you are also using a database backend for kea, which would be another way to collect the kea leases from exabgp. but you could also consider gobgp which should perform well with you making rib adjustments from the kea hook script. this is probably the simplest solution i can think of, you just need a static config for your neighbours and policy, and then use the cli tool to add del routes from the rib in the kea hooks script i guess you have already developed. its not a router, just a bgpd, so it doesnt bring along any of the baggage of something like frr or bird. youll still probably need an initialization script of some sort that walks the kea state db or via the leasecmds on startup of the bgpd."
build your own network lab,"hi redditors! ive gone by path to renew buildings network from copper to fiber optics, to be more precise, school network. one thing is configuration, but on the other hand to select proper devices, so i thought that may you could have better experience in picking proper devices. as firewall should have 4x spf and 5x gbe copper, for now we picked checkpoint 1900 even tho ive heard that it is more complicated than fortigate 200e which we currently use, price tag is around 2000 l3 switch should have at least 20 spf thats it for specs d, i suggested cisco c6509e for free with proper modules, but principal and another it teachers dont want to hear about that cisco switch, idk why coredistro layer, the only reason i suspect is, that switch power consumption is 2000w instead of 200w which theyre considering, and maybe lack of support after 2025???, theyve considered fs s586020sq, price tag is around that 2000 access switch ive picked tplink tlsg3428x, to provide 24x gbe copper, 2x spf, and sd support, considering in future, price tag is around 270, these switches will replace unmanaged tplink switches. about firewalls, i would have simple question, is there way to scoop out config from that fortigate, even tho account creds went missing? like cisco have with rommon mode? and what is in terms compatibility of different vendors, ive heard that fs will match compatible spf modules? if its even a thing... edit main scheme idea is that school have one closet where is demarcation zone and for now firewall with main l3 switch. idea is that old cabling should be rewired cuz, it was done in adhoc, where on every floor should be one idf switch, even when on that floor are some computer lab rooms which are provided by unmamanged switches, just to set access mode to them. school owns around 800850 computers. poe should not be needed, cuz aps network is pretty new like 5 y.o. or so, unlike other parts of network 15 y.o., and camerra systems have separate circuits. || whatever you do, never buy a core switch from fs.com. buy from a reputable company like arubaciscojuniperaristaextremeetc. || ruckus icx 755024f gives you 24x sfp, and is stackable if you need to add more. ruckus 820024p gives you 24 poe 1g ports 24 is without poe and 4x 25g sfp ports. optics, just buy them off fs.com firewall this depends on your needs. fortigates seem to hit the sweet spot between straight out shafting license fees checkpoint and everincreasing subscriptions meraki. you dont mention wifi. id look at nothing else but ruckus. || not really sure what to suggest here. because there is no clear picture what the requirements are? 1. do you have multiple wiring closets? 2. how many clients? 3. poe needs? 4. whats the reasons youve chosen these switchesfirewall? 5. supportuptime needs? 6. do you have enough knowledge to? or do you require a 3rd party? if the fortigate isnt updated past 7.2.3. you should still have access to the maintainer account."
