Raj Jain The Ohio State University 8-1Virtual LANsVirtual LANs Raj Jain Professor of Computer and Information Sciences The Ohio State University Please download and print the handouts fromPlease download and print the handouts from: http://www.cis.ohio-state.edu/~jain/cis788-97/ or http://www.netlab.ohio-state.edu/~jain/cis788-97/
Raj Jain The Ohio State University 8-2MBone InstructionsMBone Instructions qHandouts for the class are available on-line: http://www.cis.ohio-state.edu/~jain/cis78897/index.html or http://www.netlab.ohio-state.edu/~jain/cis78897/index.html or ftp://netlab.ohio-state.edu/pub/jain/cis788-97/ qThe schedule keeps changing. Please always check current schedule at: http://www.cis.ohio-state.edu/~jain/cis78897/schedule.html
Raj Jain The Ohio State University 8-3Instructions (Cont)Instructions (Cont) qPlease email your positive and negative feedback about the quality of the reception as well as the content with a subject field of “Feedback ” to mbone@netlab.ohio-state.edu qIf you are not able to receive the program due to some technical difficulties, please email “ Feedback ” to mbone@netlab.ohio-state.edu qPlease email technical questions with the subject field “Question ” to mbone@netlab.ohio-state.edu. We will try to answer selected questions live.
Raj Jain The Ohio State University 8-4qWhat is a LAN and what is a Virtual LAN? qTypes of Virtual LANs qIEEE 802.1Q standardOverviewOverview
Raj Jain The Ohio State University 8-5What is a LAN?What is a LAN? qLAN = Single broadcast domain = Subnet qNo routing between members of a LAN qRouting required between LANsRouter Client n Client 1 Server LAN 1 LAN 2 RouterBridge
Raj Jain The Ohio State University 8-6What is a Virtual LANWhat is a Virtual LAN Users Hubs Servers Switches Routers Marketing LAN Engineering LAN Manufacturing LANRouterqPhysical View qLogical View
Raj Jain The Ohio State University 8-7Virtual LANVirtual LAN qVirtual LAN = Broadcasts and multicast goes only to the nodes in the virtual LAN qLAN membership defined by the network manager ⇒ Virtual
Raj Jain The Ohio State University 8-8VLAN: Why?VLAN: Why? qVirtual is Better than Real mLocation-independent ⇒ Marketing LAN can be all over the building mUsers can move but not change LAN mTraffic between LANs is routed ⇒ Better to keep all traffic on one LAN mSwitch when you can, route when you must ⇒ Do not VLAN over expensive WAN links mBetter security
Raj Jain The Ohio State University 8-9Types of Virtual LANsTypes of Virtual LANs qLayer-1 VLAN = Group of Physical ports qLayer-2 VLAN = Group of MAC addresses qLayer-3 VLAN = IP subnet 12 23.45.6 IPXVLAN1 VLAN2Switch Port A1√ A2 √ A3 √ B1 √ B1√A1B234565600 D34578923434 1345678903333 3438473450555 4387434304343 4780357056135 4153953470641 3473436374133 3403847333412 3483434343143 434313413423421B234565600 634578923434 8345678903333 9438473450555 5387434304343 6780357056135 9153953470641 0473436374133 8403847333412 8483434343143 0343134134234VLAN1 VLAN2VLAN
Raj Jain The Ohio State University 8-10Layer-1 VLANsLayer-1 VLANs qAlso known as port switching qCan be used to provide security and isolation qDoes not allow user mobility. qMoved user has a new subnet ⇒ new IP address ⇒ May go through a router to access the old serverLAN Segment 1 LAN Segment 4 LAN Segment 5 LAN Segment 2 LAN Segment 3VLAN 1 VLAN 2
Raj Jain The Ohio State University 8-11Layer-2 VLANsLayer-2 VLANs qLANs defined by a list of MAC addresses qProvides full user movement qClients and server always on the same LAN regardless of location qProblem: Too many addresses need to be entered and managed 0234786890 Is that a marketing node?
Raj Jain The Ohio State University 8-12Layer-2 VLANs (Cont)Layer-2 VLANs (Cont) qNotebook PCs change docking stations ⇒ MAC address changes qAlternative: Membership implied by MAC protocol type field. VLAN1 = IP, VLAN2 = LAT, ... Dest. Address Src. Address Protocol Type Dest. Address Src. Address Length AAAA03Protocol Type802.3Ethernet
Raj Jain The Ohio State University 8-13Layer-3 VLANsLayer-3 VLANs qAlso known as virtual subnet qVLAN membership implied by MAC-layer protocol type field and subnet field 123.34.*.* qVLAN configuration is learned by the switches qStations do not belong to VLANs, packets do. qMultiprotocol stations are put into multiple VLANsDest. Addr Src. Addr Protocol Type IP Source Addr IP Dest. Addr
Raj Jain The Ohio State University 8-14Higher Layer VLANsHigher Layer VLANs qDifferent VLANs for different applications: mFTP mMultimedia qService based VLANs: All workstations using Email server are on the EMAIL-VLAN, all workstations using employee database sever are on the HR-VLAN,.. qIP Multicast address based VLANs qGeneral policy based: VLAN membership can be based on a combination of incoming port, MAC address, subnet, or higher layer info, time of day.
Raj Jain The Ohio State University 8-15VLAN TaggingVLAN Tagging qFirst switch adds tag containing VLAN id to all incoming packets qIntermediate switches do not recompute the VLAN id qLast switch removes tags from all outgoing packets qTag is not swapped at every hop like VC Id or labelsDest. Addr Src. Addr Prot. Type VLAN Tag SwitchBridged LAN End StationEnd StationSwitch
Raj Jain The Ohio State University 8-16SynonymsSynonyms qTag qLabel qMark qSticker qBrand
Raj Jain The Ohio State University 8-17IEEE 802.1Q: FeaturesIEEE 802.1Q: Features qAllows up to 4095 VLANs qAllows port based, MAC address based, and higher-layer VLANs qUpward compatible with existing VLAN-unware hubs and bridges qSupports both shared-media and switched LANs qAllows mixing legacy bridges and VLAN-aware bridges qRetains plug and play mode of current LAN bridges
Raj Jain The Ohio State University 8-18Features (Cont)Features (Cont) qExtends 802.1p priority mechanism to priority based on VLAN membership qAllows priority associated with each VLAN qVLAN-based priority takes precedence over other priority considerations qAllows signaling priority information on non-priority (CSMA/CD) LANs qAllows both local/universal MAC addresses qOperation with/without explicit VLAN header in the frame
Raj Jain The Ohio State University 8-19Features (Cont)Features (Cont) qSupports static and dynamic configurations for each VLAN qAllows intermixing different IEEE 802 MACs and FDDI qAllows signaling source routing information on CSMA/CD LANs qEach VLAN is a subset of a "single" physical spanning tree Does not preclude future extensions to multiple spanning trees
Raj Jain The Ohio State University 8-20VLAN1Features (Cont)Features (Cont) qOverlapping VLANs: mMultiple stations with same individual address mOne station with multiple interfaces using the same address mRestriction: One station or interface per VLANA AAVLAN2
Raj Jain The Ohio State University 8-21Tagging RulesTagging Rules VLAN Aware BridgeVLAN Aware Bridge VLAN Unaware End StationsVLAN-aware End StationHybrid Link VLAN B VLAN BVLAN A VLAN A VLAN C VLAN C VLAN BAccess Links
Raj Jain The Ohio State University 8-22Tagging Rules (Cont)Tagging Rules (Cont) qOn a given LAN segment for a given VLAN, all frames should be either implicitly or explicitly tagged. qDifferent VLANs on the same segment may use different options. qAccess Link: Contain VLAN unaware devices All frames on access links are untagged qHybrid Link: Contains both VLAN-aware and VLAN-unaware devices mAll frames for some VLANs are tagged mAll frames for other VLANs are untagged
Raj Jain The Ohio State University 8-23Tagged Frame FormatTagged Frame Format qEthernet Frame: q802.3 Frame: 6B6B4B 4B 2B0-30B DASATag DataFCS Length [RIF]LLC42-1470B6B6B4B 4B 2B DASA DataFCS PT[RIF]0-30B TagUser Priority TPID CFIVLAN Id16b 3b 1b 12bqTag Header:
Raj Jain The Ohio State University 8-24Frame Format (Cont)Frame Format (Cont) qTPID = Tag Protocol ID qCFI = Canonical Format Indicator = Bit order of address info in TR/FDDI frames = Presence/absence of RIF in 802.3/Ethernet frames qRIF = Routing Information Field mNew routing type: 01 = Transparent frame ⇒ No routing info. qDA = Destination Address, SA = Source Address PT = Protocol Type, LLC = Logical Link Control FCS = Frame Check Sequence qLargest data size = 1470 on 802.3
Raj Jain The Ohio State University 8-25Frame Format (Cont)Frame Format (Cont) qToken Ring: 1B6B6B0-30B 10B 4B qFDDI: 1B6B6B0-30B 10BDAAC SA[RIF] Tag DataFCS [LLC] 4B DAFC SA[RIF] Tag DataFCS [LLC]
Raj Jain The Ohio State University 8-26GVRPGVRP qGARP VLAN registration protocol qGARP = Generic attribute registration protocol qRegister VLAN Ids and port filtering modes qBoth end-stations and bridges can be GARP participants qGARP Participants issue/revoke membership declaration ⇒ Creates entries in the databases qVLAN-aware bridges propagate VLAN membership changes on all active ports
Raj Jain The Ohio State University 8-27GVRP (Cont)GVRP (Cont) qVLAN-aware end stations can "source prune" traffic for VLANs that have no other members qInitially, all ports on all bridges are set to a default "Port VLAN ID"
Raj Jain The Ohio State University 8-28GMRP in VLANsGMRP in VLANs qOriginal GMRP is designed for one LAN ⇒ One one context or base spanning tree context qWith VLANs, multicast addresses are registered a particular VLAN context ⇒ Filtering behavior in a VLAN does not affect other VLANs
Raj Jain The Ohio State University 8-29VLAN Filtering DatabaseVLAN Filtering Database qTwo Types of Entries: mVLAN Registration entries mGroup Registration entries qBoth types can static or dynamic mStatic VLAN Entries: via Management mDynamic Filtering Entry: qvia learning or registration qLearnt entries are aged out qPort Map for each VLAN: Whether frames should be tagged or untagged
Raj Jain The Ohio State University 8-30Communication BetweenCommunication Between VLANsVLANsqNeed routers qCan use 1-armed VLAN-aware router qVLAN-aware switches can route between VLANs qSuch switches can be placed in the core, in the edges, or everywhere VLAN Aware/Unaware CoreVLAN Aware Router VLAN Aware Switch
Raj Jain The Ohio State University 8-31SummarySummary qVirtual LANs ⇒ Location independent LAN Groups qLayer-1, Layer-2, Layer-3, higher layer VLANs qIEEE 802.1Q allows both explicit and implicit tagging qNeed routing between VLANs
Raj Jain The Ohio State University 8-32ReferencesReferences qFor a detailed list of references, see http://www.cis.ohio-state.edu/~jain/ refs/lsw_refs.htm qEmail list: p8021-request@hepnrc.hep.net Mail archive: http://www.hep.net/mail/p8021.html qDraft Standard for Virtual Local Area Networks, IEEE P802.1Q/D6, May 16, 1997.
Raj Jain The Ohio State University 8-33Other Related StandardsOther Related Standards mTraffic Class Expediting and Dynamic Multicast Filtering, IEEE P802.1p/D6, April 28, 1997. m802.1D MAC bridges m802.1G Remote MAC Bridging m802.1H Ethernet V2.0 and 802 bridging
Raj Jain The Ohio State University 8-34Current ScheduleCurrent Schedule 7/17/97 Priority and Multicasting on LANs 7/22/97 No Class 7/24/97 Virtual LANs 7/29/97 Gigabit Ethernet 7/31/97 Quiz 2 (No MBone transmission) 8/5/97 Residential broadband: Cable Modems, xDSL 8/7/97 Multimedia: Compression Standards 8/12/97 Multimedia over IP: RSVP, RTP 8/14/97 Wireless LANs and WANs 8/19/97 Quiz 3 (No MBone transmission)
Raj Jain The Ohio State University 8-35CreditsCredits This MBone transmission was made possible by: qMark Fullmer, OSU/UTS qMike Iverson, OSU/UTS qMike Douglas, OSU/UTS qJayaraman Iyer, OSU/CIS qSohail Munir, OSU/CIS