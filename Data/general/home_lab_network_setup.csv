mot_cl√©,post_et_reponses
home lab network setup,"looking to setup a smaller network for my local church. primary function will be general wifi utilizing aps, and poe cameras. my intention is to have most, if not all, equipment routing centrally located in the media booth if at all possible. my question is. if i can stay within the distance restriction of catx is there any concern with just running lines to all end nodes rather than placing switches in multiple locations to handle it all.? additional information currently looking at unifi due to all equipment uniformity and reasonable price. open to other options. not a full time network tech, so need an unmanned system. || as long as the cable pathways work out nicely for that, go for it. if youre having a cabling vendor do the work ask them if it makes sense to put a switch in somewhere to make cabling runs simpler ive done that before at some locations. if i have to do 9 lets say 200 runs back to the mdf or decide to put in a switch somewhere to make the cabling easier and future runs cheaper to add, its worth considering. theres a tradeoff at some point where having more equipment to manage and purchase outweighs the benefits, but you have to weigh that. people get very excited about unifi equipment for whatever reason, probably the low price and flashy website stuff. i will say ive had much less hassle with aruba instanton stuff fwiw. the nativefree cloud management and monitoring might be nice in your case, plus the ability to do content filtering right on the aps. || if you can get to everything in 100m then sure. cat5e cat6 if you are running a gig or less. 6a if you ever intend to go faster. try and avoid running data cabling next to power cables or other strong sources of emf . if cant be avoided use shielded cabling for those runs. leave plenty of slack at both ends to allow for maintenance. || cabling sounds fine. i would strongly recommend that they are terminated properly to a patchpanel though then run patches to your routerfirewall."
home lab network setup,"i have been working on this lab in ine for the ccnp encore and i can get everything to work no problem but one thing struck me that i dont quiet understand. this is the image of the topology when we redistribute the eigrp 100 routes in bgp and the routes are installed into r3s rib i can reach the next hop for r2 which is the router that redistributes the eigrp routes into bgp but i cannot reach the destination of the route install. for example one of the routes redistributed is in the trace route i can reach the r2 router but fails after i could not understand why that is the case. i thought once r3 reaches the next hope r2 would know how to send that traffic to r1s loopback considering it has a route to reach it in its rib. this is the lab in question if anyone uses ine || maybe you have forgotten to redistribute bgp into eigrp 100. || when r2 is redistributing the eigrp routes into bgp, it will advertise it to r3 unless if you have a routemap that prevents it to be advertised. do you have a routemap? the route for 140.0.1.1 must be presented in r3 routing table, otherwise, r3 will have no idea how to reach it. it is not enough for only r2 to know how to reach 140.0.1.1. can you show the output of r3 routing table? do a show ip bgp 140.0.1.0"
home lab network setup,"i inherited a network that is a traditional core, distro and access topology. it is an airgap network, so no access to the internet. the network is slowly getting some hardware tech refreshed. im getting two catalyst c9500 and several catalyst c9300 switches to replace the eol switches. the current setup is the vlans are all over the place. the vlans have been extended to different places. some vlans are spanning 56 switches that are daisy chained. i want to make some changes. i dont know if the 7 hops stp issue is still a thing but havent discover if we have it in our network. at the moment, we have ten tenants and we are getting and getting two more this year. im thinking to rebuild a collapsed core c9500s and a c9300 distro and introduce the evpn vxlan to address the vlan situation and hopefully easier to manage. for automation, im going to be using ansible tower since we already have it. i know cisco is going to convince my manager to get the dnac or catalyst center. if the evpn vxlan is valid idea should i stack the two c9500 or treat them as single? 75 of the c9300 will have two links to the c9500 and the remaining 25 only have a single link. the current setup is portchannel regardless if the links isnsingle or dual. should continue using portchannels but make it layer3 or make it routed for each uplink? does the catalyst have a equivalent to epbr? when i was working on nexus, i kind of got the epbr to work. i managed to prevent the intrarouting within the same vrf and able to access them from the external, but couldnt get the intrarouting to work through a singleleg firewall. the intravrf is something i need to implement for this rebuild. thank you || you have a simple switched network. you want to introduce extra complexity with evpn and epbr, but i dont see any motivation of why you need this extra complexity. why do you want to make these changes? what problem are you trying to solve? you havent told us anything about the scale of the network. are you running out of vlans? having vlans spread out over multiple switches is rarely a problem. you choose which vlans to allow on each trunk port, you can do manual vlan pruning there. || i would agree here that you should ask yourself what you gain by introducing vxlan evpn. is it because you would like to simplify the network topology following a spineleaf architecture? that would still, in my opinion, not justify to introduce vxlan. i dont find any justification to run it just because the vlans are all over the place, that is more of a bad network design. you should keep it simple. stack the 9500s core switches and connect each 9300s to the stack and run portchannels between the them. the 9500 would be connected to firewalls in an mlag ish setup were each 9500 have two links to the firewalls. im typing this from my phone so but here is a link to the design im referring to this is a very clean design. this will also improve the vlan management issue you currently face. either you terminate the gws on the switch or on the firewall or you run a mixed setup which i personally dislike, this depends on your needs and requirements. if terminating gws on the switch, i would suggest to run vrfs to at least enhance segmentation and also security. each vrf have transit links to the firewall and intervrf communications would go through the firewall. traffic within the vrfs would stay local on the switch. || vxlan is just another complexity for this sort of setup."
home lab network setup,"hi i have a dell 6xjxk nvidia connectx6 lx dual port adapter card 1025gbe sfp28, pcie low profile card that i want to crossflash to generic fw so that the lab will be the same as production. the sticker says model i cant figure out how to translate the dell info into mallonix opn there are options and i dont know which ito get any help would be appreciated || afaik you cant crossflash it. the pcie id is different from mellanox, their tool wont let you do it, last time i tried i got a message like please contact your oem. there could be an option to force flashing, but i would not gamble it. if you want to use original mellanox firmware youre better off purchasing original adapters."
home lab network setup,"hi net lords, i am running an environment with an mdf and 9 idfs. mdf is a pair of dell s4128fon. idfs are dell n2048p stacks. all switches are running rstp. i am replacing the idfs with cisco catalyst 9200ls. i would try to run rstp on the ciscos but they only give the option of running mst, rpvst, pvst. we had an issue where one of our stacks was running rpvst and it was not breaking loops, causing a broadcast storm on that stack. i want to make sure i am running the correct spanning tree on these new idf stacks. what do you all recommend i use on the new cisco stacks? i would prefer to keep the spanning tree protocols on the existing switches rstp because we will be replacing each idf weeks apart from each other. btw we are a small to medium sized network with 20 vlans or so. much thanks and happy networking. edit 1 apparently mst mode on a cisco is rstp under the hood. without any customized config, all vlans will be mapped to a single spanning tree instance. this is how rstp works with no flexibility added. mst just provides the flexibility to configure more instances and maps vlans to other instances. rpvst will map each vlan to its own instance. in other words, if you have 200 vlans, you have 200 instances. mst provides the best of both worlds but more setup is involved if you need it. luckily i dont need it! || rpvst is fine up to maybe 200 vlans or so, depending on the hardware platform. after that, mst all the way. || we run mst, even on cisco gear. || i use mst on everything that supports it, honestly. the benefits of rstp, the configurability of pvst, and its an open standard with fairly wide support."
home lab network setup,"hey , i could use some help figuring out the best spot to drop in a ips in a network im working on where weve got multiple sites connected via sdwan over mpls, back to our central data center. the traffic path is basically branch sites hub routers wan firewall internal network were thinking of putting the ips in l2 transparent mode between the hub routers and the wan firewall, so we can inspect traffic coming in from the field before it hits anything important. couple of things im unsure about is this the right spot to put the ips? any issues with sdwan tunnels ipsecgre being broken or not inspected properly in this position? would you recommend placing it somewhere else? anyone have experience using tippingpoint specifically in sdwan setups? appreciate any advice, war stories, or gotchas youve run into. thanks! || if youre not planning on breaking open tls to inspect it and dealing with all of the associated fun of managing that process, id ask your security folks what they hope to actually see on the wire with ips in 2025. || does your firewall not have ips functionality already? if youre using an ngfw like a palo alto or fortinet, theyre already performing threat prevention, sandboxing, malware detection, etc. etc. if youre purchased those subscriptions. the benefits are probably quite low if youre adding another ips platform sitting adjacent to your firewall. || it depends on what threats scenarios you will be using the ips for. if you are worried that someone will break into your ipsec, and s8mple acl wont be enough, then you will need the ips infront of the sdwan router. if you are worried about internal users breaking in through your wan network, then why not enabling ips on your firewall?"
home lab network setup,"hello network enthusiasts, i got the chance to help build a small isp network. we are talking about 6000 customers. i sketched something here the requirements are to keep the network as simple as possible with the equipment they already have in use. the routers are connected to the internet via different ip transit providers on both sides and have ospf and bgp in between. i have implemented some security features. antiipspoofing olt checks ipv4 mac binding learned by dhcp dhcp authentication with option 82 added by olt and checked by dhcp server l2 isolation on olt i want to add features to minimise the risks of the large broadcast domain. for example, i would like to disable arp learning as the router fills the arp table based on dhcp traffic. i think this would prevent scans from the internet flooding the network with arps. but then i would have to make sure that there was some sort of arp sync between the routers. i have also thought about configuring a different vrf for the customer and only exporting subscriberroutes 32 to the default vrf. but this also has some redundancy issues if one router goes down and the other has no learned subscriber routes... i also read about ipsubscriber sessions, but i do not have an aaa server and would be very happy to get around without another server. the setup in the draft would work, but of course there are many security issues, please list anything that comes to mind. open to suggestions and criticism to fix this setup. edit my last attempt was trying to sync the arp tables arp redundancy group 1 peer loopback ohter crt sourceinterface loopback10 interfacelist interface bundleether1.82 id 8 but this unfortunately does no sync the dhcp learned arps only the dynamic ones stored on 0rsp0cpu0 . and as i said i would like to disable dynamic arp learning on the routers. i need the arp with ip to be synced to the second router. crt 01 interface bundleether1.82 description xgsponinternet ipv4 address 192.168.168.2 255.255.254.0 proxyarp localproxyarp ipv4 unreachables disable encapsulation dot1q 82 00cpu0 address age hardware addr state type interface 192.168.168.1 0000.0c07.ac52 interface arpa bundleether1.82 192.168.168.2 5087.892a.c0d4 interface arpa bundleether1.82 192.168.168.21 480f.cf27.27d3 dhcp arpa bundleether1.82 192.168.168.100 000034 9c37.f47d.4528 dynamic arpa bundleether1.82 0rsp0cpu0 address age hardware addr state type interface 192.168.168.2 5087.892a.c0d4 interface arpa bundleether1.82 192.168.168.100 000034 9c37.f47d.4528 dynamic arpa bundleether1.8 crt 02 interface bundleether1.82 description xgsponinternet ipv4 address 192.168.168.3 255.255.254.0 proxyarp arp learning disable localproxyarp ipv4 unreachables disable encapsulation dot1q 82 ! 00cpu0 address age hardware addr state type interface 192.168.168.1 0000.0c07.ac52 standby arpa bundleether1.82 192.168.168.3 e0ac.f13d.4404 interface arpa bundleether1.82 192.168.168.100 000034 9c37.f47d.4528 dynamic arpa bundleether1.82 0rsp0cpu0 address age hardware addr state type interface 192.168.168.3 e0ac.f13d.4404 interface arpa bundleether1.82 192.168.168.100 000034 9c37.f47d.4528 dynamic arpa bundleether1.82 || reading through everything, i dont think this design is going to work from a practical perspective as youve found because youve essentially used an enterprise branch office, dual wan design as your isp design. except you dont have any firewalls at your as edges which means youre wide open to the world with no safeguards and you have no aaa of any kind that could theoretically be used for things like subscriber validation, which basically means a lot of the options you could take to mitigate security issues are nonexistent. since youll probably ignore this and try to push forward anyway, ill at least answer your question on arp sync between asrs. the answer is simply no. arp tables between asrs do not sync and in that platform are treated as local to device only. || proxy arp is no solution for not knowing how routing works. || i havent used this platform in a while, but look into subscriber arp scalemodeenable and bng geo redundancy"
home lab network setup,"hello, im not sure if this is the correct place to ask or if my question is proper but bear with me please. im trying to setup acl rules to block connections initiated by a client to a server, and allow client connections to the server only if they were responses to a connection initiated by the server. the current rules allow connections from the client to all dynamic range ports of the server. my instructor says i should add a rule to block connections from clients, so it would look something like this 10 permit tcp host clientip eq 100 host serverip range 4000065535 15 deny ip clientip 0.0.0.0 any 20 permit udp host clientip eq 100 host serverip range 4000065535 30 deny ip any any now im not a professional, but this doesnt make sense for me. how can we allow and block at the same time. do the rules satisfy the requirements? or should i remove the rules and add other ones? if yes, what would they be? please note that this is for a university course, and im no expert in networks so go easy. || permit tcp clientsubnetorany host serverip established applied on traffic outbound toward the server would be relevant here. || think about how inbound and outbound acls work. also, think about the order in which you assign allow and deny acls, and what might override what. || a long time ago, i had to set up some acls with the cisco ios firewall feature set. that taught me a lot about firewalls. essentially youd set up a tracker in one direction and an acl in the other direction. the acl would be rather tight, only allowing the inbound side of the services you wanted to expose. the tracker would detect any outbound new connections from your servers, and dynamically add new temporary openings at the top of that acl for the back side of those outbound connections. if you wanted to prevent your servers from hitting certain things, you could add a second acl in parallel with the tracker that had explicit denies for those things then an explicit permit for everything else. it was somewhat primitive in overall functionality but the fact that you could see the dynamic temporary openings in the acl made it a lot easier to comprehend."
home lab network setup,"this is years of mismanagement that needs fixed. i have cisco switches deployed all over with vlans in their database that are no longer active. i remove them, they come back. i cannot find a single cisco switch in my network with the vtp domain configured. i believe that this was configured on a switch years ago that has since been retired. am i understanding this behavior correctly? all cisco switches have vtp server enabled by default. so, therefore any switch that has been connected over the years is now configured for that vtp domain, therefore propagating this vtp configuration from switch to switch? to make matters worse. switches that have been deployed to other locations have the same behavior because someone connected them at our home office to drop the initial config on them before they were shipped. therefore, yet again adding these same vlans to switches that dont need them. also, is there a better way to deal with this besides changing vtp mode to off or transparent on every switch then cleaning up the vlan dbs? || also, is there a better way to deal with this besides changing vtp mode to off or transparent on every switch then cleaning up the vlan dbs? nope. just turn it off or set it to transparent mode. if it makes sense, perhaps migrate to version 3 and set a single switch as the server core and the rest to client. || i personally have been bitten by vtp version 2. use version 3 or nothing. || the default mode is server mode but the switches will not send any update until a vtp domain is configured. so no switch will participate in vtp unless the domain is configured as well. i find it strange that the vlans are added back randomly, are you really sure that you have checked every single switch with no vtp configured? when you remove a vlan, it should in fact delete the vlan on all switches in the same vtp domain, not add it back. also, as being mentioned, just get rid of vtp, regardless of which version you go for. it really can cause headaches and has caused headaches over the years. instead, if you want to effectively propagate vlans and such, use automation for that, such as ansible, python script etc."
home lab network setup,"i saw a technical support role and i like the idea of going deep down in a product line, learning technical chops, but at the same time, i cant help but wonder wouldnt most cases you see related to some bug or need some hot fix if you work in tac or technical support for network vendors like ciscofortinetpalo altojuniper etc, what percentage of your work is due to a bug and how much do you troubleshoot for like a design issue or deepdown on protocol? do they give you formal trainings or just give access to some study links and labs and throw you away into the fire? basically, do you enjoy your role or its just find bugs, rinse and repeat? and for those who moved away from tac to another role, or joined an enterprise, where you able to catchup back to being a generalist? || im not vendor tac but msp tac, but stuff i send to vendor personally is things not working how i expect sometimes bug, sometimes own stupid. but we are fairly adept engineers, there are customers that have config problems. generally you dont go to vendors for design help, they have professional services for that, but they will point out when you have done something wrong. the thing about any sort of troubleshooting you need to understand the specific protocol to be able to find stuff, and understanding what the customer is expecting. || i was at brocade and then extreme when they bought that part of brocade, having previously worked for t1 and t2 isps. being able to get into the weeds on a variety of hardware and software was interesting to begin with. i got access to tools and troubleshooting guides that just arent available to the public which let you pull some pretty deep diagnostic data out of a system. we also had big labs to build customer networks in to replicate customer issues. the majority of the time though we were diagnosing new bugs, or identifying existing bugs in older software, and very rarely correcting customer design or deployment. eventually i got tired of working in tac and being limited to a single vendor, and despite being involved in a couple of cool projects i decided i was happier in the sp space. training at brocade was really poor, just punted us over to global knowledge for generic product training, extreme wasnt much better but as i left they started a big push for in house training and that looks to have been a success. as for when i left, because the part of brocadeextreme i was in dealt primarily with isps i never really lost touch with my mplsbgpospf abilities, and i reckon i even improved a bit to be honest. so it depends heavily on what part of tac you join. if you ended up looking after wireless or security products you probably would find your skills atrophy a bit but if youre a good engineer im sure youd get it back quick enough. || depends on what level. usually when you start its at tier 2 at the vendors i worked at this was the terminology anyway. tier 1 being outsourced support. at tier 2 the cases you get are still maybe 80 configurationdesign issues of varying complexity. weird interoperability issues between vendors. the rest might be diagnosing some bug thats already been fixed and telling them what version to upgrade to or implement workaround. light lab replications. if you have reason to think its a new bug or one that doesnt have a fix out yet it gets kicked to tier 3. tier 3 is a mix of complex nonbug issues and actual bugs. more and complex lab replications, get deeper into the protocols. then if you think its a bug, file the bug with engineering and then you have to manage the customer side of the bug lifecycle. theres quite a bit of formal training both for the product and soft skills. product configuration training, basically the same thing youd take to get a basic certification in whatever product line you are working on. plus various internal trainings for aspects of the product architecture. maybe a month or so of just training if memory serves? then there is ongoing training as new productssoftware is released. taking cases and calls is a ramp up period. i enjoyed parts of it, but i enjoy sifting through log files and stack traces to identify bugs. in my experience it can tend to be more of a call center job vibe than other network engineering type gigs. at tier 2 you are on the phones talking to customers a lot. there can be a heavy emphasis on case throughput, phone schedules, case backlog management. it can be a heavy workload im sure this depends on the vendor you work for."
