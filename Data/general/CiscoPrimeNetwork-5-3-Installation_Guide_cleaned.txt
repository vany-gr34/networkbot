Cisco Systems, Inc. www.cisco.com Cisco has more than 200 offices worldwide. Addresses, phone numbers, and fax numbers are listed on the Cisco website at www.cisco.com/go/offices.Cisco Prime Network 5.3 Installation Guide Text Part Number: 
THE SPECIFICATIONS AND INFORMATION REGARDING THE PRODUCTS IN THIS MANUAL ARE SUBJECT TO CHANGE WITHOUT NOTICE. ALL STATEMENTS, INFORMATION, AND RECOMMENDATIONS IN THIS MANUAL ARE BELIEVED TO BE ACCURATE BUTARE PRESENTED WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED. USERS MUST TAKE FULL RESPONSIBILITY FORTHEIR APPLICATION OF ANY PRODUCTS. THE SOFTWARE LICENSE AND LIMITED WARRANTY FOR THE ACCOMPANYING PRODUCT ARE SET FORTH IN THE INFORMATION PACKET THAT SHIPPED WITH THE PRODUCT AND ARE INCORPORATED HEREIN BY THIS REFERENCE. IF YOUARE UNABLE TO LOCATE THE SOFTWARE LICENSE OR LIMITED WARRANTY, CONTACT YOUR CISCO REPRESENTATIVE FOR ACOPY. The Cisco implementation of TCP header compression is an adaptatio n of a program developed by the University of California, Ber keley (UCB) as part of UCB’s public domain version of the UNIX operating system. All rights reserved. Copyright © 1981, Regents of the Univers ity of California. NOTWITHSTANDING ANY OTHER WARRANTY HEREIN, ALL DOCUMENT FILES AND SOFTWARE OF THESE SUPPLIERS ARE PROVIDED “AS IS” WITH ALL FAULTS. CISCO AND THE ABOVE-NAMED SUPPLIERS DISCLAIM ALL WARRANTIES, EXPRESSEDOR IMPLIED, INCLUDING, WITHOUT LIMITATION, THOSE OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE ANDNONINFRINGEMENT OR ARISING FROM A COURSE OF DEALING, USAGE, OR TRADE PRACTICE. IN NO EVENT SHALL CISCO OR ITS SUPPLIERS BE LIABLE FOR ANY INDIRECT, SPECIAL, CONSEQUENTIAL, OR INCIDENTAL DAMAGES, INCLUDING, WITHOUT LIMITATION, LOST PROFITS OR LOSS OR DAMAGE TO DATA ARISING OUT OF THE USE ORINABILITY TO USE THIS MANUAL, EVEN IF CISCO OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE POSSIBILITY OF SUCHDAMAGES. Cisco and the Cisco logo are trademarks or registered trademarks of Cisco and/o r its affiliates in the U.S. and other countries. T o view a list of Cisco trademarks, go to this URL: www.cisco.com/go/trademarks. Third-party trademarks mentioned are th e property of their respective owners. The use of the word partner does not imply a partnership relationship between Cisco and any other company. (1110R) Any Internet Protocol (IP) addresses and ph one numbers used in this do cument are not intended to be actual addresses and phone numbers. Any examples, command display output, network topology diagrams, and other figures included in the document are shown for illustrat ive purposes only. Any use of actual IP addresses or phone numbers in ill ustrative content is uninte ntional and coincidental. © 2020 Cisco Systems, Inc. All rights reserved.
iiiCisco Prime Network 5.3 Installation Guide 78-xxxxx-xxCONTENTS iii Installation Overview 1-1 Installation Options 1-1 Installation DVDs 1-2 Installation Requirements 2-1 Sample Network Sizes Used in This Document 2-1 Hardware and Soft ware Requirements 2-2 Prime Network Gateway and Database Requirements 2-2 Gateway: Minimum Hardware and Software Requirements 2-3 Gateway: CPU and Memory Requirem ents for Different Network Sizes 2-3 Gateway: IOPS (Input/Output Operations Per Second) for Different Network Sizes 2-5 Storage Requirements for Different Network Sizes 2-7 Remote Embedded Database Requirements 2-9 External Database Requirements 2-9 Prime Network Unit Requirements 2-10 Unit: Minimum Hardware a nd Software Requirements 2-10 Unit: Recommended Ha rdware for Differe nt Network Sizes 2-10 Requirements for Gateway an d Unit on a Single Server 2-12 Prime Network Client Requirements 2-12 Clients: Minimum Hardware and Software Requirements 2-12 Required Red Hat Services and RPMs 2-16 Required RPMs for Red Hat 6.7 2-16 Required RPMs for Red Hat 6.8 2-19 RPMS Dependent on Ab ove Listed Packages 2-23 Required RPMs for Red Hat 6.9 2-23 Required RPMs for Red Hat 6.10 2-25 Required RPMs for Red Hat 7.4 2-27 Required RPMs for Red Hat 7.5 and Red Hat 7.7 2-28 RHEL 7.x: Required RPMs for Oracle Database 12c 2-30 Required Ports for Prime Network 2-32 Prime Network Server, HTTP, TCP, and UDP Ports 2-32
Contents ivCisco Prime Network 5.3 Installation GuidePrime Network Integration Layer Ports 2-35 Preparing for the Installation 3-1 Gateway Preinstallation Ta sks—Embedded Database 3-1 Gateway Preinstallation Tasks—External Database 3-3 Unit Preinstallation Tasks 3-4 Verifying the Installed Operating System 3-5 Verifying the RPMs Required on Red Hat for Prime Network 3-5 Starting the Oracle Listener (External Database) 3-6 Configuring the Network Timing Protocol 3-6 Finding NTP Process in Server 3-8 Killing NTP Process in Server 3-8 IPv4 and IPv6 Compliance Considerations 3-8 UNIX Services and Components Used by Prime Network 3-10 Preparing the Oracle External Database 4-1 Using an External Database: General Guidelines 4-1 Creating an Extern al Oracle Database 4-2 Configuring the External Database 4-5 Configuring the cursor_sharing System Parameter 4-5 Retaining Partitioning Storage Behavior 4-6 Configuring the job_queue_pr ocesses System Parameter 4-6 Configuring the audit_tr ail System Parameter 4-6 Disabling the Recycle Bin Option 4-7 Setting the open_cur sors Parameter 4-7 Disabling Automatic Maintenance Jobs 4-8 Changing Database Ports 4-8 Configuring the Database Size and Disk Structure 4-9 Configuring Oracle to Start Automa tically When Prime Network Restarts 4-9 Preventing Passwords in the Default Profile from Expiring 4-10 Maintaining the External Database 4-11 Maintaining Archive Log File Disk Space 4-11 Adding Data Files to the Tablespace 4-11 Installing the Prime Network Gateway a nd Units Using the Installation Wizard 5-1 Prerequisites for Using the Installation Wizard 5-1 Launching the Installation Wizard 5-1 Installing the Gateway with Embedded Database Usin g the Installation Wizard 5-3 Installing the Gateway with External Database Using the Installation Wizard 5-7
Contents vCisco Prime Network 5.3 Installation Guide 78-xxxxx-xxInstalling a Unit Using the Installation Wizard 5-10 Installing the Prime Network Gateway Using CLI 6-1 Installation Overview 6-1 Installing the Prime Network Gate way With an Em bedded Database 6-2 Installing the Prime Network Gate way With an External Database 6-6 Manually Creating Prime Network Database Schemas 6-11 Post Installation Tasks For the Gateway 6-13 Starting the Prime Network Gateway 6-13 Verifying Connectivity 6-15 Verifying the Connecti vity to the Database 6-15 Configuring Prime Network Post-Installation 6-15 Verifying the Redirected Ports 6-18 Verifying the Drools Rules Configuration 6-19 Verifying the Monitoring (Graphs) Configuration 6-19 Verifying the Installation of Registry Directories 6-19 Adding Oracle Database Files 6-20 Updating the Database Host in the Registry for NAT 6-21 Environment Variables, A liases, and Folders Crea ted During Installation 6-21 Product Services Insta lled with Prime Network 6-23 Troubleshooting 6-24 Installing Prime Network Units 7-1 Installing a Unit 7-1 Configuring Dual Listeners 7-3 Post Installation Tasks For Units 7-4 Verifying the Prime Network Version and the Unit Processes 7-4 Verifying the Unit Configuration 7-5 Installing the Vision, Events, and Administration Clients 8-1 Launching the Clients Fr om the Web Start Page 8-1 Installing the Prime Network Clients on Your Computer 8-3 Installing Prime Network Clients in a Remote Personal Computer 8-5 Troubleshooting Clients 8-6 Installing the Prime Network Integration Layer 9-1 Prerequisites for Installing the PN-IL 9-1 Installing the PN-IL Using the Installation Wizard 9-2 Installing the PN-IL (CLI Method) 9-4
Contents viCisco Prime Network 5.3 Installation GuideEnabling and Disabling th e PN-IL Health Monitor 9-5 Managing FTP for Prime Network Integration Layer Server 9-5 Storage Location for PN-IL Replicated Files 9-6 Clearing the FTP Configuration for the Standalone Integration Layer Server 9-7 Changing the Ports Used by the PN-IL 9-7 Changing the NIO and SSL Ports 9-7 Changing the MTOSI Web Services Port 9-7 Changing the 3GPP Web Services Port 9-8 Changing the Alarm Web Services Port 9-8 Migrating the PN-IL from Standalone Mode to Suite Mode 9-8 Upgrading and Rolling Back Prime Network 10-1 Prime Network Upgrade Overview 10-2 Preparing to Upgrade Prime Net work (Pre-Upgrade Checklist) 10-4 Supported Prime Network Upgr ade and Rolling back versions 10-8 Upgrading to Prime Network 5.3 from 5.2, 5.1, 5.0, 4.3.2, 4.3.1, 4.3 (Intermediate Steps) 10-8 Upgrading to Prime Network 5.3 and Oracle 12.2.0.1 10-11 In-line RHEL Upgrade of 6.7, 6.8, 6.9, 6.10, 7.4, 7.5, and 7.7 with Prime Network 5.3 and Oracle 12.2.0.1 10-11 Major RHEL Upgrade from 5.x to 6.x and 6.x to 7.x 10-12 Upgrading to Prime Network 5.3 in Suite Mode 10-13 Upgrading or Downgrading OS in HA Environment 10-14 Upgrade of OS in HA Environment 10-14 Downgrade OS in HA Environment 10-15 Configuring Clusters for Pacemaker and Corosync Setup 10-17 Verifying the Prime Network Operatio ns Reports Upgrade from 4.0 to 5.3 10-20 Rolling Back to Earlier Prim e Network Version from Prime Network 5.3 Including Oracle Rollback 10-20 Rolling Back to Earlier Oracle Version 10-21 Prerequisites 10-21 Standalone and Local HA: Rollback to Oracle 12.1.0.2 10-23 Standalone and Local HA: Rollback to Oracle 12.1.0.1 10-25 Geo DR and Local HA + Geo DR: Rollback to Oracle 12.1.0.2 10-27 Geo DR and Local HA + Geo DR: Rollback to Oracle 12.1.0.1 10-30 Rolling Back to Earlie r Prime Network Version 10-34 Upgrading the Prime Network Integration Layer (PN-IL) 10-36 Upgrading PN-IL in Standalone Mode 10-36 Upgrading PN-IL in Suite Mode 10-37 Prime Network Post-upgrade Tasks 10-38
Contents viiCisco Prime Network 5.3 Installation Guide 78-xxxxx-xxEnable Units to Restart Automa tically After they are Rebooted 10-38 Restoring Customized Crontabs 10-39 Restarting Crontab Jobs for NAT Units 10-39 Fixing the Database Entry for Vision Clients with NAT 10-39 Updating the Port Watchdog (AVM Protection) Scripts 10-40 Restore Links Between Devices and Cloud VNEs 10-40 Support for Third-Party VNEs 10-40 Command Builder Scripts 10-40 Gathering DB Statistics in First 24 Hours 10-41 Integration Changes 10-41 Adding Managed Elements to the Database Manually for PC-FM Resync 10-41 Upgrading the Embedded Da tabase to Oracle 12.2.0.1 10-42 Example-Upgrading the Embedded Database to Oracle 12.2.0.1 10-43 Upgrading the Embedded Datab ase to Oracle 12.2.0.1 in a HA Setup with Geographical Redundancy and Oracle ADG 10-44 Example-Upgrading the Embedded Database to Oracle 12.2.0.1 in a HA Setup with Geographical Redundancy and Oracle ADG 10-45 Uninstalling Prime Network 11-1 Uninstalling a Prime Network Gateway 11-1 Uninstalling a Gateway with an Embedded Database 11-2 Uninstalling Cisco Prime Network Units 11-2 Uninstalling the Cisco Pr ime Network Clients 11-3 Uninstalling Prime Network Manually 11-3 Uninstalling the PN-IL Using CLI 11-4 Uninstalling the PN-IL Using the Wizard 11-4 Uninstalling Pacemaker Corosync Configuration 11-4 Next Steps 12-1 Launching the Prime Network GUI Clients 12-1 Verifying That Backups Are Set Up 12-2 Enabling Network Discovery 12-3 Setting Up Transaction Manager 12-4 Setting Up VMware vCenter to Forward Events 12-4 Integration with Cisco Multicast Manager (CMM) 12-4 Setting Up Integration with Cisco Multicast Manager 12-5 Setting Up Traps for CMM 12-5 Removing Cisco Multicast Manager Integration from Prime Network 12-6 Using Chinese Characters with Oracle A-1
Contents viiiCisco Prime Network 5.3 Installation GuideUsing Chinese Characters with Windows Clients A-3 Displaying Chinese Characters in the GUI A-3

CHAPTER 1-1Cisco Prime Network 5.3 Installation Guide1 Installation Overview This chapter provides an overview of the Prime Network installation process: 
- Installation Options, page 1-1 lists the installation options and provides links to available information for each option. 
- Installation DVDs, page 1-2 lists the DVDs that contain the Prime Network software and the contents of each DVD. Installation Options The Prime Network installation includes the installation of the following components in a Linux environment: 
- Gateway (with an embedded or external database). The gateway installation is supported on physical servers or on VMware. 
- One or more units. 
- GUI clients. 
- Prime Network Integration Layer (PN-IL), which can be installed to allow Prime Network to be used with Multi-Technology Operations Systems Interface (MTOSI) and 3GPP northbound interfaces. The PN-IL is mandatory if Prime Netw ork is being installed in suite mode, that is integrated with Prime Central. The following table shows where you will find the information you need for the various installation options. Table 1-1 Where to Find Information for the Prime Network Installation Options For this Option... Go To... Install the gateway with an embedded databaseFor CLI installation: , “Installing th e Prime Network Gateway Using CLI.” For GUI installation: , “Installing the Prime Network Gateway and Units Using the Installation Wizard.” Install the gateway with an external Oracle database
- , “Preparing the Or acle External Database,” 
- For CLI installation: , “Installing the Prime Network Gateway Using CLI.” or For GUI installation: , “Installing the Prime Network Gateway and Units Using the Installation Wizard.”
1-2Cisco Prime Network 5.3 Installation Guide Installation Overview Installation DVDs Installation DVDs Table 1-2 lists the contents of the DVDs that contain the Prime Network 5.3 installation files.Install the gateway with local or geographic high availabilityCisco Prime Network 5.3 Gateway High Availability Guide Install a unit For CLI installation: , “Installing Prime Network Units.” For GUI installation: , “Installing the Prime Network Gateway and Units Using the Installation Wizard.” Launching the Prime Network GUI Clients, “Launching the Prime Network GUI Clients.” Install the Prime Network Integration Layer (PN-IL), “Installing the Prime Network Integration Layer.” Upgrade from a previous Prime Network release and rolling back to earlier Prime Network and Oracle version, “Upgrading and Rolling Back Prime Network.” Pre-installation tasks , “Installation Requirements” and , “Preparing for the Installation” Post-installation tasks Next Steps, page 12-1Table 1-1 Where to Find Information for the Pr ime Network Installati on Options (continued) For this Option... Go To... Table 1-2 Contents of Cisco Prime Network 5.3 Installation DVDs Disk DVD Components Disk 1: New Install Files for a new Prime Network 5.3 gateway and unit in stallation, including Red Hat High Availability. Server 
- Apache Server 2.4.38 
- Prime Network 5.3 gateway and unit installation files: –install.bin (GUI installation) –install.pl –install.properties –ivne-drivers.tar 
- RH_ha.zip and install_ha.pl—High availability installation files 
- jws directory Disk 2: Software and Documentation Client Installation Files 
- Cisco Prime Network Vision 
- Cisco Prime Network Administration 
- Cisco Prime Network Events
1-3Cisco Prime Network 5.3 Installation Guide Installation Overview Installation DVDs Integration 
- Standalone Integration Layer ESB tar files (sil-esb-2.3.0.tar.gz) 
- PNIntegrationLayer_v2.3.0.bin (GUI installation) Documentation Cisco Prime Network Documentation Overview, 5.3 Disk 3: Upgrade files Upgrade from Prime Network, 4.2.2, 4.2.3 4.3, 4.3.1, 4.3.2, or 5.0, 5.1, 5.2 to 5.3 Note Copy the contents of Disk 6 from location /Upgrade/Prime_Network_upgrade to Disk 3 at the same location i.e., /Upgrade/Prime_Network_upgrade before performing the upgrade.
- Prime_Network_upgrade directory that has upgrade and rollback dependent scripts 
- ivne-drivers.tar file 
- PNIntegrationLayerUpgrade_1.0.0.0-2.3.0.tar.gz 
- embedded_upgrade_12.2 directory Disk 4: Database Binaries Embedded database installation 
- linuxx64_12201_database.zip Disk 5: Operations Reports Installation of Prime Network Operations Reports and the Infobright database on the Prime Network gateway. Note Operations Reports are only available to customers with Operations Reports license prior to May 2018. For re-installation of Operations Reports contact a Cisco customer support representative.
- infobright_integ.zip 
- CiscoPrimeNetwork53OperationsReports.pdfTable 1-2 Contents of Cisco Prime Networ k 5.3 Installation DVDs (continued) Disk DVD Components
1-4Cisco Prime Network 5.3 Installation Guide Installation Overview Installation DVDs Disk 6: Upgrade Files for Prime_Network_upgrade Upgrade files for Prime Network 5.3. NoteCopy the contents of Disk 6 from location /Upgrade/Prime_Network_upgrade to Disk 3 at the same location i.e., /Upgrade/Prime_Network_upgrade before performing the upgrade.
- Prime_Network_upgrade directory that has upgrade files for Prime Network 5.3: –jars –Prime_Network5.3.0_others.jar –Prime_Network5.3.0_registry.jar –Prime_Network5.3.0_third_party.jarTable 1-2 Contents of Cisco Prime Networ k 5.3 Installation DVDs (continued) Disk DVD Components

CHAPTER 2-1Cisco Prime Network 5.3 Installation Guide 2 Installation Requirements This chapter provides the hardware, software, database, and other requirements that must be met before installing Prime Network 5.3. 
- Sample Network Sizes Used in This Document, page 2-1 
- Hardware and Software Requirements, page 2-2 
- Required Red Hat Services and RPMs, page 2-16 
- Required Ports for Prime Network, page 2-32 Sample Network Sizes Used in This Document Table 2-1 provides specifications for different Prime Network deployments based on network size. Use one of these network sizes as a guide for defining your requirements. The deployment sizing for Prime Network assumes that the devices are distributed as follows for Carrier Ethernet (CE), MPLS, or IP Radio Access Network (RAN): 
- CE: 2% Ps, 8% N-PEs, 80% U-PEs, 10% CEs. 
- MPLS: 5% core routers, 95% CPE. 
- IP RAN: 15% aggregation, 30% cell sites, 55% L2 switches. Table 2-1 Network Size Specifications Network SizeMaximum No. of DevicesMaximum No. of Events Per Second (EPS) Small 200 5Medium 2000 20Large 5000 50
2-2Cisco Prime Network 5.3 Installation Guide Installation Requirements Hardware and Software Requirements Hardware and Software Requirements These topics describe the gateway, unit, and client requirements: 
- Prime Network Gateway and Database Requirements, page 2-2 
- Prime Network Unit Re quirements, page 2-10 
- Requirements for Gateway and Unit on a Single Server, page 2-12 
- Prime Network Client Requirements, page 2-12 Note 
- Consult with your Cisco account representative for specific hardware and co nfiguration details for your gateway and units before you acquire or use Prime Network. 
- Hardware requirements assume that Prime Networ k does not share the hardware with additional applications. (This is the recommended installation.) Prime Network Gateway and Database Requirements Prime Network supports installation of the gateway on both bare metal and virtual machine (VM). The requirements listed in this section ar e the same for both of these options. The gateway can be installed with a fully integrat ed, embedded Oracle 12c database or it can be configured to connect to and intera ct with an external Or acle database. In addition, if the Operations Reports component is installed, it incorporates the Infobright database. This section lists the requirements for gateway inst allation with the embedded Oracle database, with and without the Infobright database (Operations Reports component). If you are using an external database, see the External Database Requirements, page 2-9. These topics provide the gateway requirements: 
- Gateway: Minimum Hardware and Software Requirements, page 2-3 
- Gateway: CPU and Memory Requirements for Different Network Sizes, page 2-3 
- Gateway: IOPS (Input/Output Operations Per Second) for Different Network Sizes, page 2-5 
- Storage Requirements for Different Network Sizes, page 2-7 
- Remote Embedded Database Requirements, page 2-9 
- External Database Requirements, page 2-9
2-3Cisco Prime Network 5.3 Installation Guide Installation Requirements Hardware and Software Requirements Gateway: Minimum Hardware and Software Requirements Table 2-2 identifies the minimum software and hardwa re requirements for Prime Network gateways. Gateway: CPU and Memory Requirements for Different Network Sizes Table 2-3 lists the gateway CPU and memory requirements for networks of different sizes. See Sample Network Sizes Used in This Document, page 2-1 .Table 2-2 Minimum Requirements for Gateways Item Specifications System hardware Intel Xeon E5-2600 or equivalent. Also see Gateway: CPU and Memory Requirements for Different Network Sizes, page 2-3. Operating System Red Hat 6.7, Red Hat 6.8, Red Hat 6.9, Red Hat 6.10, Red Hat 7.4, Red Ha t 7.5, and Red Hat 7.7 64-bit Server Edition (English language) are supported in Prime Network 5.3 and run in a virtual environment. Red Hat is supported on VMWare ESXi version 5.5, 6.0, and 6.7, and also on the Openstack kernel-based virtual machine (KVM) hypervisor version 2.6. Certain Red Hat services and RPMs are required. See Required Red Hat Services and RPMs, page 2-16. Note Prime Network must be installed on a dedica ted operating system. We cannot guarantee compatibility with external components running on the operating system together with Prime Network. Table 2-3 CPU and Memory Requirements for Di fferent Network Sizes Network Size (No. of Devices and Events Per Second (EPS)No. of CPU Cores (VMware or Bare Metal)Minimum RAM (without Operations Reports or PN-IL)RAM (Gateway + Operations Reports)Minimum RAM (Gateway + Operations Reports + PN-IL) Small: 200 devices or less5 EPS5 32 GB 48 GB 52 GB Medium: 200 - 2000 devices20 EPS8 64 GB 96 GB 100 GB
2-4Cisco Prime Network 5.3 Installation Guide Installation Requirements Hardware and Software Requirements Large: 2000 - 5000 devices50 EPS10 96 GB 128 GB 132 GB More than 50 EPS 1 actionable events per second (POC/LAB deployment) 2) Up to 5 actionable events per second 3) Up to 20 actionable events per second 4) Up to 50 actionable events per second 5) Up to 100 actionable events per second 6) Up to 200 actionable events per second 7) Up to 250 actionable events per secondTable 2-3 CPU and Memory Requirements for Di fferent Network Sizes Network Size (No. of Devices and Events Per Second (EPS)No. of CPU Cores (VMware or Bare Metal)Minimum RAM (without Operations Reports or PN-IL)RAM (Gateway + Operations Reports)Minimum RAM (Gateway + Operations Reports + PN-IL)
2-5Cisco Prime Network 5.3 Installation Guide Installation Requirements Hardware and Software Requirements Gateway: IOPS (Input/Output Operations Pe r Second) for Different Network Sizes This section provides IOPS tables for the different network sizes: 
- Table 2-4 lists the IOPS for Oracle and Infobright databases. 
- Table 2-5 provides a breakdown of IOPS for the Oracle database. 
- Table 2-6 provides a breakdown of IOPS for the Infobright database. Note Infobright database specifications are only relevant if you intend to install the Operations Reports component. Note Prime Network supports more than 5000 NEs. For specific hardware require ment contact the Cisco Representative.Table 2-4 Total IOPS for Orac le and Infobright Databases Network Size (No. of Devices and Events Per Second (EPS)IOPS for Oracle DatafilesIOPS for Infobright DatabaseTotal IOPS for Oracle and Infobright Databases Small: 200 devices or less5 EPS600 85 685 Medium: 200 - 2000 devices20 EPS1200 170 1370 Large: 2000 - 5000 devices50 EPS2250 340 2590 More than 50 EPS
2-6Cisco Prime Network 5.3 Installation Guide Installation Requirements Hardware and Software Requirements Table 2-5 Breakdown of Oracle Database IOPS Network Size (No. of Devices and Events Per Second (EPS) Oracle Data files Oracle Redo Logs Oracle Archive Oracle Backup Small: 200 devices or less5 EPS5 0 0 4 04 02 0 Medium: 200 - 2000 devices20 EPS1000 80 80 40 Large: 2000 - 5000 devices50 EPS2000 100 100 50 Table 2-6 Breakdown of Infobright Database IOPS Network Size (No. of Devices and Events Per Second (EPS)Infobright Data Directory (raid 5/10)Infobright Cache Directory (raid 5/10)Gateway DLP Directory Total Small: 200 devices or less5 EPS40 20 25 85 Medium: 200 - 2000 devices20 EPS80 40 50 170 Large: 2000 - 5000 devices50 EPS160 80 100 340
2-7Cisco Prime Network 5.3 Installation Guide Installation Requirements Hardware and Software Requirements Storage Requirements for Different Network Sizes This section provides storage requirements (in GB) for the different network sizes: 
- Table 2-7 lists the storage required for Oracle and Infobright databases. 
- Table 2-8 provides a breakdown of storage requirements for the Oracle database. 
- Table 2-9 provides a breakdown of storage requirements for the Infobright database. Table 2-7 Total Storage (GB) for Oracle and Infobright Databases Network Size (No. of Devices and Events Per Second (EPS) 1 1. The EPS numbers in the table refer to actionable events. We assume that there is a ratio of approximately 1:3 between actionable and standard events, i.e., for 50 actionable EPS, there will be an additional 150 standard EPS.Storage for Oracle DatabaseStorage for Infobright Database Swap SpaceTotal Storage for Oracle and Infobright Databases Small: 200 devices or less5 EPS 419 77 16 512 Medium: 200 - 2000 devices20 EPS 1616 306 16 1938 Large: 2000 - 5000 devices50 EPS 3947 765 16 4728 Table 2-8 Breakdown of Storage for Oracle Database Network Size (No. of Devices and Events Per Second (EPS) Oracle Datasize Oracle BackupOracle Archive Logs 1Online Redo Logs Total Small: 200 devices or less5 EPS82 41 290 6 419 Medium: 200 - 2000 devices20 EPS299 149 1162 6 1616 Large: 2000 - 5000 devices50 EPS690 345 2904 8 3947 1. The archive log storage requirements are based on the default 14 da ys that events are retained in the archive before they are purged. This setting. can be changed in the Admini stration GUI client to reduce the archive logs storage requirements. 
2-8Cisco Prime Network 5.3 Installation Guide Installation Requirements Hardware and Software Requirements Guidelines for Location of Oracle Files Storage is required for the Oracle database data files, redo logs, archiv e log, and backup file. 
- A data file is a physical file on disk th at contains data structures su ch as tables and indexes. The optimal location is an external disk array (preferably RAID 10). The data files are created under the directory that you specify during installation. 
- Online redo logs are a set of files that contain records of ch anges made to data. Redo log files should not reside on the same disk as the data files. Use ext3 mounted with the default mount options. The redo logs are created under the directory that you specify during installation. 
- An archive log is a member of an online redo log that has been archived by the Oracle database. Archived log files should not reside on the same disk as the data files. The archived redo log files can be applied to a database backup for media recovery. The archive logs are created under the directory that you specify during installation. Note If the embedded database mount points for netw ork data, archive logs, or control files are set outside the local disks (for example, on a stor age area network), make the corresponding entry in /etc/fstab (Linux) so the mount points can be accessed duri ng reboots. If this is not done, the embedded database and gateway will not start. 
- A backup file stores a copy of the database data, which ca n be used to reconstruct data. Backup files should not reside on the same disk as the data files. The backup files are created under the directory that you specify during installation. Disk Partitions Table 2-10 lists the required partitions and space for Prime Network 5.3. Note Do not use the -override_diskspace flag to add or free up space. Use this information in conjunction with the gateway and unit requirements listed in Prime Network Gateway and Database Requirements, page 2-2. Table 2-9 Breakdown of Storage for Infobright Database Network Size (No. of Devices and Events Per Second (EPS)Infobright Database ServerInfobright Storage Gateway DLP Total Small: 200 devices or less5 EPS75 2 77 Medium: 200 - 2000 devices20 EPS298 8 306 Large: 2000 - 5000 devices50 EPS745 20 765
2-9Cisco Prime Network 5.3 Installation Guide Installation Requirements Hardware and Software Requirements Remote Embedded Database Requirements For remote embedded da tabase installations: 
- Perl version 5.8.6 or later must be installed on the root user. 
- The installation script copies the Oracle instal lation files to the remote server under the home directory of the user connecting to the workstation through SSH. The home directory must have at least 4 GB of space available for the installation files. This is especially important if the home directory is root (/), because over cons umption might cause the server to crash. 
- In addition to the list of UNIX sh ells required for Prime Network (see UNIX Services and Components Used by Prime Network, page 3-10 ), the remote embedded database also requires BASH (/bin/bash & /usr/bin/bash). External Database Requirements If the Prime Network gateway will be connecting to an external database, the Oracle version shown in Table 2-11 must be installed with the Oracle JVM and partitioning options. The partitioning options are required because Prime Network uses partitioning for event management.Table 2-10 Disk Partitions Partition Space (in MB) /root 
- Database and gateway on same server—1.5 GB 
- Database and gateway on different servers—4 GB This space is required because th e installer copies the Oracle installation files to the remote server under the home directory of the SSH user. This is especially important if the home directory is root (/) where over-consumption could cause the server to crash. Prime Network 5.3 installation directory5G B Note By default, Prime Network is installed in /export/home/ pnuser (Embedded DB only) $PRIME_NETWORK_HOME/oracle ($PRIME_NETWORK_HOME: /export/home/<user_name>)9 GB (minimum) for Oracle binaries. /tmp 100 MB (minimum) of disk space available. Table 2-11 Supported Oracle Vers ions and Required Patches Oracle Version Required Linux Patch(es) Oracle Database 12c Enterpri se Edition Release 12.2.0.1 __
2-10Cisco Prime Network 5.3 Installation Guide Installation Requirements Hardware and Software Requirements Prime Network Unit Requirements These topics provide the unit requirements: 
- Unit: Minimum Hardware and Software Requirements, page 2-10 
- Unit: Recommended Hardware for Different Network Sizes, page 2-10 Unit: Minimum Hardware an d Software Requirements Table 2-12 identifies the minimum software and hardware requirements for units. The unit must have connectivity to the database. Unit: Recommended Hardware for Different Network Sizes Before you choose the machines that will serve as your units, you need to know the total memory requirements, based on your network size (number of devices and events per se cond). The total memory will be distributed across your unit machines and will determine the CPU requirements for each unit. You might choose to use several relatively small units (common in a VM environment) or fewer large units (more common with bare metal). Either way, your calculations must begin with identifying the total amount of memory required. Note Contact your Cisco account representative if you need assistance calculating yo ur memory requirements. Following is an example of total memory requirement s for the different network sizes. This example is based on the following percentage distribution of device types in a Carrier Ethernet deployment: 2% Ps, 8% N-PEs, 78% U-PEs, 12% CEsTable 2-12 Minimum Requirements for Units Item Specifications System hardware Xeon E5-2600 or equivalent. Also see Unit: Recommended Hardware for Different Network Sizes, page 2-10. Software Red Hat 6.7, Red Hat 6.8, Red Hat 6.9, Red Hat 6.10, Red Hat 7.4, Red Hat 7.5, and Red Hat 7.7 64-bit Server Edition (English language) are supported in Prime Network 5.3 and run in a virtual environment. Red Hat is supported on VMware ESXi version 5.5, 6.0, and 6.7, and also on the Openstack kernel-based virtual machine (KVM) hypervisor version 2.6. Certain Red Hat services and RPMs are required. See Required Red Hat Services and RPMs, page 2-16. Table 2-13 Example of Total Unit Memory Requirements Network SizeMaximum No. of DevicesMaximum No. of Events Per Second (EPS)Total Memory Required for All Units (GB RAM) Small 200 5 10Medium 2000 20 100Large 5000 50 250
2-11Cisco Prime Network 5.3 Installation Guide Installation Requirements Hardware and Software Requirements The number of units you require depends on the type of servers you choose. Following are some examples of potential unit servers: Note 
- An additional 10 - 20 GB storag e is required for DLP processing 
- If you are using the Operations Reports componen t, an additional 3% RAM is required per unit server. Example combinations of unit servers for a large network (250 GB RAM required): 
- 1 UCS-B with 256 GB RAM 
- 2 VMs with 96 GB RAM each, 2 VMs with 32 GB RAM each Disk Space Requirements Each unit server requires a minimum of 30 GB disk space (which includes swap space and Operations Reports storage requirements).Table 2-14 Examples of Unit Servers Unit Server Type Memory (GB) CPU Cores VM 32 2VM 96 6Bare Metal (UCS-B)256 10 Bare Metal (UCS-B)512 20
2-12Cisco Prime Network 5.3 Installation Guide Installation Requirements Hardware and Software Requirements Requirements for Gateway and Unit on a Single Server The one-server setup, where the gateway, unit, and database run on the same server, is suitable for small-medium deployments of up to 1000 devices, supporting up to 50 actionable events and 150 standard events per second (200 EPS total). Requirements for the one-se rver setup are as follows: 
- 10 CPU cores 
- 64 - 96 GB RAM, depending on the number of devices. 96 GB is recommended. 
- 6.5 TB disk space Note Disk space requirements increase proportionally as the number of supported events per second increases. The system ha s been tested for a maximum of 750 events per second (50 actionable plus 700 standard events), which would require 15 TB disk space. See Storage Requirements for Different Network Sizes, page 2-7. - 1200 IOPS (Read 300/Write 900). If you install Operations Reports, you need an additional: 
- 291 GB disk space 
- 32 GB RAM 
- 170 IOPS Prime Network Client Requirements These topics provide th e client requirements: 
- Clients: Minimum Hardware and Software Requirements, page 2-12 
- Using Prime Network Clients with Citrix, page 2-14 
- Accessing Prime Network Clients Using Citrix Environment, page 2-14 Clients: Minimum Hardware and Software Requirements Table 2-15 identifies the minimum hardware and softwa re requirements for Prime Network clients. Table 2-15 Prime Network Client Mi nimum Installation Requirements Item Specifications Minimum Hardware Requirements IBM PC or PC-compatible workstation
- Pentium IV, 2.66-GHz or higher processor 
- 1G B R A M 
- 2 GB free disk space 
- 512 MB free nonvirtual memory per running instance Screen 
- Screen resolution optimized for 1024 x 768 pixels or higher 
- True color (32-bit) setting
2-13Cisco Prime Network 5.3 Installation Guide Installation Requirements Hardware and Software Requirements Minimum Software Requirements Operating system 
- Windows 2000, Windows XP, Windows Vista, or Windows 7 Note For a Windows 32 bit system, reduce the memory allocation to 512MB in the jnlp file for launching Network Vision. 
- Citrix XenApp 6.0 with the Citrix Hotfix patch CTX120923, available at http://support.citrix.com/article/CTX120923, and Citrix XenApp 6.0. Note The Citrix Hotfix patch requires an upgraded Citrix License Server (version 11.6.1). A single Citrix server supp orts multiple Citrix clie nts, each of which can run Cisco Prime Network clients. See Using Prime Network Clients with Citrix, page 2-14 Other Software 
- Java 8 update 162. Note Prime Network was tested on Java 8 update 162, however it is expected to work with lower Java 8 updates as well. Browser Requirements Bandwidth 1.5 MB per second bandwidth (to download) Supported browsers for Prime Network web-based GUI applications 
- Mozilla Firefox 24, 26, 27, 29, 30, 49, 52, 54, 55, ESR 24. Note Users might not be able to connect to the Prime Network Web server to use features such as VCB, Network Discovery, and CCM us ing Firefox if the gateway IP address is a raw IPv6 address. This is due to a Firefox defect. To avoid this issue, log into Prime Network using a hostname instead of an IP address. 
- Google Chrome version 31, 33 
- Internet Explorer versions 9, 10, 11 Note Network Discovery might not display properly and the Discovery Profile page might take longer than usual to load. Required browser support 
- JavaScript—Required 
- Cookies—Enabled 
- Pop-ups—Enabled (Firefox and Internet Explorer) 
- Security—SSL/Certificates required for access to restricted resources Flash Player 
- Adobe Flash player 9.0 or higher for optimal display of advanced graphics and complex UI components. Table 2-15 Prime Network Client Minimum In stallation Requirements (continued) Item Specifications
2-14Cisco Prime Network 5.3 Installation Guide Installation Requirements Hardware and Software Requirements Using Prime Network Clients with Citrix When using Prime Network with Citrix you might ha ve issues establishing SSL connection or creating a cache folder to the Prime Network client. Establishing SSL connection If you are using Prime Network with Citrix and you cannot establish an SSL connection, complete the following steps: Step 1 Right-click an application in the Citrix Management Console (server side) and choose Modify application properties > Modify all Properties. Step 2 Click the Client Options window. Step 3 Uncheck the Enable SSL and TLS protocols check box. Updating Permissions on Citrix If you cannot create a cache folder or download .jar files to the Prime Network client, there might be a problem with permission definitions on Citrix. Complete the following steps to update permissions: Step 1 Right-click the client installation folder (usually C:\Cisco Systems\Prime Network\) and choose Properties. Step 2 Click the Security tab. Step 3 Click the Users group and check the Allow check box to modify permissions. Step 4 Click OK. Accessing Prime Network Clients Using Citrix Environment Prerequisites 
- Click the below link to install and configure the Citrix XenApp 6.0 http://docwiki.cisco.com/wiki/Citrix_XenApp_Serv er_6.0_Installation_for_Accessing_Prime_Networ k_in_Standalone_and_Suite_Modes 
- Ensure that the server on which the Citrix XenApp is installed is configured with correct time and the time zone. Example for IST, the zone should be configured as (UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi. Once the Citrix online plugin and receiver are installed on client m achine, the Prime Network features are enabled to be accessed in a Citr ix environment. The user is provid ed with a Citrix enabled URL with login credentials. 
2-15Cisco Prime Network 5.3 Installation Guide Installation Requirements Hardware and Software Requirements Figure 2-1 Citrix Login Screen Once logged in, the Prime Network applications are displayed and can be accessed by the user. 
2-16Cisco Prime Network 5.3 Installation Guide Installation Requirements Required Red Hat Services and RPMs Figure 2-2 Viewing Prime Network App lications in Citrix Environment Required Red Hat Services and RPMs The following sections list the required Red Hat services and RPMs: 
- Required RPMs for Red Hat 6.7, page 2-16 
- Required RPMs for Red Hat 6.8, page 2-19 
- Required RPMs for Red Hat 6.9, page 2-23 
- Required RPMs for Red Hat 6.10, page 2-25 
- Required RPMs for Red Hat 7.4, page 2-27 
- Required RPMs for Red Hat 7.5 and Red Hat 7.7, page 2-28 Required RPMs for Red Hat 6.7 The following RPMs must be downloaded from the Re d Hat website and installed on the gateway and unit servers. Required 32-bit packages 
- libgcc-4.4.7-17.el6.i686 
2-17Cisco Prime Network 5.3 Installation Guide Installation Requirements Required Red Hat Services and RPMs 
- nss-softokn-freebl-3.14.3-23.3.el6_8.i686 
- compat-libstdc++-33-3.2.3-69.el6.i686 
- glibc-2.12-1.192.el6.i686 
- libstdc++-4.4.7-17.el6.i686 Required 64-bit packages 
- gpg-pubkey-fd431d51-4ae0493b 
- libgcc-4.4.7-17.el6.x86_64 
- gcc-c++-4.4.7-17.el6.x86_64 
- pcsc-lite-libs-1.5.2-15.el6.x86_64 
- telnet-0.17-48.el6.x86_64 
- glibc-2.12-1.192.el6.x86_64 
- compat-libcap1-1.10-1.x86_64 
- cpp-4.4.7-17.el6.x86_64 
- nspr-4.11.0-1.el6.x86_64 
- nss-tools-3.21.3-2.el6_8.x86_64 
- mpfr-2.4.1-6.el6.x86_64 
- ksh-20120801-33.el6.x86_64 
- expect-5.44.1.15-5.el6_4.x86_64 
- nss-softokn-freebl-3.14.3-23.3.el6_8.x86_64 
- cloog-ppl-0.15.7-1.2.el6.x86_64 
- ntp-4.2.6p5-10.el6.1.x86_64 
- nss-sysinit-3.21.3-2.el6_8.x86_64 
- java-1.7.0-openjdk-d evel-1.7.0.121-2.6 .8.1.el6_8.x86_64 
- libstdc++-4.4.7-17.el6.x86_64 
- libstdc++-devel-4.4.7-17.el6.x86_64 
- ppl-0.10.2-11.el6.x86_64 
- telnet-server-0.17-48.el6.x86_64 
- gpg-pubkey-2fa658e0-45700c69 
- tcl-8.5.7-6.el6.x86_64 
- tzdata-2016j-1.el6.noarch 
- glibc-headers-2.12-1.192.el6.x86_64 
- glibc-devel-2.12-1.192.el6.x86_64 
- ntpdate-4.2.6p5-10.el6.1.x86_64 
- nss-3.21.3-2.el6_8.x86_64 
- java-1.7.0-openjdk-1.7.0.121-2.6.8.1.el6_8.x86_64 
- dos2unix-3.1-37.el6.x86_64 
- glibc-common-2.12-1.192.el6.x86_64 
- libaio-devel-0.3.107-10.el6.x86_64
2-18Cisco Prime Network 5.3 Installation Guide Installation Requirements Required Red Hat Services and RPMs 
- libgomp-4.4.7-17.el6.x86_64 
- nss-util-3.21.3-1.el6_8.x86_64 
- xinetd-2.3.14-40.el6.x86_64 
- compat-libstdc++-33-3.2.3-69.el6.x86_64 
- gcc-4.4.7-17.el6.x86_64 
- lksctp-tools-1.0.10-7.el6.x86_64 For high availability, the follo wing packages are required: 
- binutils.x86_64 
- cluster-cim.x86_64 
- cman.x86_64 
- compat-libcap1.x86_64 
- compat-libstdc++-33.i686 
- compat-libstdc++-33.x86_64 
- dos2unix.x86_64 
- elfutils-libel f-devel.x86_64 
- elfutils-libelf.x86_64 
- expect.x86_64 
- gcc-c++.x86_64 
- gcc.x86_64 
- glibc-common.x86_64 
- glibc-devel.x86_64 
- glibc-devel.x86_64 
- glibc-headers.x86_64 
- glibc.i686 
- glibc.x86_64 
- ksh.x86_64 
- libaio-devel.i686 
- libaio.i686 
- libaio.x86_64 
- libgcc.i686 
- libgcc.x86_64 
- libgcj.i686 
- libstdc++-devel.i686 
- libstdc++-devel.x86_64 
- libstdc++.i686 
- libstdc++.x86_64 
- libX11.i686 
- libX11.x86_64
2-19Cisco Prime Network 5.3 Installation Guide Installation Requirements Required Red Hat Services and RPMs 
- libXau.i686 
- libXau.x86_64 
- libxcb.i686 
- libxcb.x86_64 
- libXext.i686 
- libXext.x86_64 
- libXi.i686 
- libXi.x86_64 
- libXtst.i686 
- libXtst.x86_64 
- luci.x86_64 
- make.x86_64 
- modcluster.x86_64 
- numactl-devel.x86_64 
- numactl.x86_64 
- openais.x86_64 
- openssh-clients.x86_64 
- openssh-server.x86_64 
- openssh.x86_64 
- openssl098e.x86_64 
- rgmanager.x86_64 
- ricci.x86_64 
- sysstat.x86_64 
- sysstat.x86_64 
- telnet.x86_64 Required RPMs for Red Hat 6.8 The following RPMs must be downloaded from the Red Hat website and installed on the gateway and unit servers. Required 32-bit packages 
- compat-libstdc++-33-3.2.3-69.el6.i686 
- glibc-2.12-1.192.el6.i686 
- libgcc-4.4.7-17.el6.i686 
- nss-softokn-freebl-3.14.3-23.el6_7.i686 Required 64-bit packages 
- ksh-20120801-33.el6.x86_64
2-20Cisco Prime Network 5.3 Installation Guide Installation Requirements Required Red Hat Services and RPMs 
- expect-5.44.1.15-5.el6_4.x86_64 
- tcl-8.5.7-6.el6.x86_64 
- telnet-0.17-48.el6.x86_64 
- dos2unix-3.1-37.el6.x86_64 
- compat-libstdc++-33-3.2.3-69.el6.x86_64 
- compat-libcap1-1.10-1.x86_64 
- libaio-devel-0.3.107-10.el6.x86_64 
- libstdc++-devel-4.4.7-17.el6.x86_64 
- cloog-ppl-0.15.7-1.2.el6.x86_64 
- cpp-4.4.7-17.el6.x86_64 
- gcc-4.4.7-17.el6.x86_64 
- gcc-c++-4.4.7-17.el6.x86_64 
- mpfr-2.4.1-6.el6.x86_64 
- ppl-0.10.2-11.el6.x86_64 
- libgcj-4.4.7-17.el6.x86_64 For GUI Installation, the foll owing packages are required: Required 64-bit package 
- libgcj-4.4.7-17.el6.x86_64 Required 32-bit package 
- libgcj.i686 For Operations Reports installation, the following package is required: Required 64-bit packages openssl098e-0.9.8e-20.el6_7.1.x86_64 
- ksh.x86_64 
- libstdc++.i686 
- expect.x86_64 
- libstdc++.x86_64 
- dos2unix.x86_64 
- glibc-devel-2.12 
- redhat-lsb-core.x86_64 
- gcc-4.4.4 
- compat-libstdc++-33-3.2.3-72.el7.x86_64 
- libaio-devel-0.3.107 
- compat-libstdc++-33-3.2.3 
- binutils.x86_64 
- compat-libxcb-1.9-1.el7.i686 
- compat-libstdc++-33.x86_64
2-21Cisco Prime Network 5.3 Installation Guide Installation Requirements Required Red Hat Services and RPMs 
- compat-libxcb-1.9-1.el7.x86_64 
- gcc-c++.x86_64 
- compat-libstdc++-33.i686 0:3.2.3-72.el7 
- ksh.x86_64 
- compat-libstdc++-33-3.2.3-72.el7.x86_64 
- libstdc++.x86_64 
- compat-libf2c-34.x86_64 
- compat-libgfortran-41.x86_64 
- compat-libtermcap.x86_64 
- compat-libxcb.x86_64 
- libXext.x86_64 
- compat-libcap1-1.10.x86_64 
- libxcb.x86_64 
- compat-libstdc++-33-3.2.3-72.el7.i686 
- libXxf86dga.x86_64 
- perl-Data-Dumper-2 .145-3.el7.x86_64 
- libX11.x86_64 
- libstdc++-devel-4.4.4.x86_64 
- libXxf86vm.x86_64 
- gcc-c++-4.4.4.x86_64 
- compat-libcap1.x86_64 
- libdmx.x86_64 
- gcc.x86_64 
- make.x86_64 
- glibc-devel.x86_64 
- xorg-x11-utils.x86_64 
- libgcc.x86_64 
- libXv.x86_64 
- libstdc++-devel.x86_64 
- libXt.x86_64 
- libXtst.x86_64 
- nfs-utils.x86_64 
- libXi.x86_64 
- libXau.x86_64 
- libXxf86misc.x86_64 
- smartmontools.x86_64 
- glibc.x86_64 
- elfutils-libelf-devel.x86_64
2-22Cisco Prime Network 5.3 Installation Guide Installation Requirements Required Red Hat Services and RPMs 
- sysstat.x86_64 
- numactl-devel.x86_64 
- xorg-x11-xauth.x86_64 
- iptables-1.4.21-18.2.el7_4.x86_64 
- libaio.x86_64 
- compat-libgmp-4.3.1-1.sl7.x86_64 (for GUI installation) 
- iptables-services-1.4.21-18.2.el7_4.x86_64 
- compat-libmpfr-2.4.1-1.sl7.x 86_64 (for GUI installation) 
- gmp-4.3.1-12.el6.i686 (for GUI installation) 
- libgcj-2.96-28.i386 (for GUI installation) 
- libgcj-2.96-27.i386 (for GUI installation) 
- libgcj3-3.0.1-3.i386 (for GUI installation) 
- libgcj-4.4.7-4.1.el6_5.i 686 (for GUI installation) 
- libgcj3-devel-3.0.1-3.i386 (for GUI installation) 
- libpng12-1.2.50-10.el7.x86_64(Graph) 
- libgcj-devel-2.96-27.i386 (for GUI installation) 
- libpng-1.5.13-7.el7_2.x86_64(Graph) For high availability, the follo wing packages are required: RPMs Dependencies expect-5.44.1.15-5.el6_4.x86_64 tcl.x86_64ksh-20120801-33.el6.x86_64dos2unix-3.1-37.el6.x86_64elfutils-libelf-devel-0.164-2.el6.x86_64elfutils-libelf-devel-0.164-2.el 6.i686 elfutils-libelf, glibc, nss-softokn-freebl, glibc, glibc-common, glibc-devel, glibc-headers, nss-softokn-freebl libaio-devel-0.3.107-10.el6.x86_64compat-libstdc++-33-3.2.3-69.el6.i686compat-libstdc++-33-3.2.3-69.el6.x86_64cluster-cim-0.16.2-35.el6.x86_64 (modclus ter = 0.16.2-31.el6), tog-pegasus, net-snmp, openslp, tog-pegasus-libs, net-snmp-libs, net-snmp-utils gcc-c++-4.4.7-18.el6.x86_64 cloog-ppl, cpp, gcc, libstdc++-devel, mpfr, ppl, libgcc, libgomp, libstdc++ numactl-devel-2.0.9-2.el6.i686 numactl-2.0.9-2.el6.i686numactl-devel-2.0.9-2.el6.x86_64libstdc++-devel-4.4.7-18.el6.i686 libgcc-4.4.7-18.el6.i686, libstdc++-devel-4.4.7-18.el6.x86_64 libstdc++-4.4.7-18.el6.i686 
2-23Cisco Prime Network 5.3 Installation Guide Installation Requirements Required Red Hat Services and RPMs RPMS Dependent on Above Listed Packages 
- cloog-ppl.x86_64 0:0.15.7-1.2.el6 
- cpp.x86_64 0:4.4.6-4.el6 
- glibc-headers.x86_64 0:2.12-1.80.el6 
- kernel-2.6.32-573.el6.x86_64 
- mpfr.x86_64 0:2.4.1-6.el6 
- ppl.x86_64 0:0.10.2-11.el6 Required RPMs for Red Hat 6.9 The following RPMs must be downloaded from the Red Hat website and installed on the gateway and unit servers. Required 32-bit package 
- compat-libstdc++-33-3.2.3-69.el6.i686.rpm 
- glibc-2.12-1.192.el6.i686.rpm 
- libgcc-4.4.7-17.el6.i686.rpm 
- nss-softokn-freebl-3.14.3-23.el6_7.i686.rpm Required 64-bit package 
- ksh-20120801-33.el6.x86_64.rpm 
- expect-5.44.1.15-5.el6_4.x86_64.rpm 
- tcl-8.5.7-6.el6.x86_64.rpm 
- telnet-0.17-48.el6.x86_64.rpm 
- dos2unix-3.1-37.el6.x86_64.rpm 
- compat-libstdc++-33-3.2.3-69.el6.x86_64.rpm 
- compat-libcap1-1.10-1.x86_64.rpm 
- libaio-devel-0.3.107-10.el6.x86_64.rpm 
- libstdc++-devel-4.4.7-17.el6.x86_64.rpm 
- cloog-ppl-0.15.7-1.2.el6.x86_64.rpm 
- cpp-4.4.7-17.el6.x86_64.rpm 
- gcc-4.4.7-17.el6.x86_64.rpm 
- gcc-c++-4.4.7-17.el6.x86_64.rpm 
- mpfr-2.4.1-6.e l6.x86_64.rpmgcc-4.4.7-18.el6.x86_64 compat-libcap1-1.10-1.i686compat-libcap1-1.10-1.x86_64RPMs Dependencies
2-24Cisco Prime Network 5.3 Installation Guide Installation Requirements Required Red Hat Services and RPMs 
- ppl-0.10.2-11.el6.x86_64.rpm 
- libgcj-4.4.7-17.el6.x86_64.rpm For GUI Installation, the foll owing packages are required: Required 64-bit package 
- libgcj-4.4.7-17.el6.x86_64.rpm Required 32-bit package 
- libgcj.i686 For high availability, the follo wing packages are required: RPMs Dependencies expect-5.44.1.15-5.el6_4.x86_64 tcl.x86_64ksh-20120801-33.el6.x86_64 dos2unix-3.1-37.el6.x86_64elfutils-libelf-devel-0.164-2.el6.x86_64 elfutils-libelf-devel-0.164-2.el6.i686elfutils-libelf glibcnss-softokn-freebl glibcglibc-common glibc-develglibc-headers nss-softokn-freebllibaio-devel-0.3.107-10.el6.x86_64 compat-libstdc++-33-3.2.3-69.el6.i686compat-libstdc++-33-3.2.3-69.el6.x86_64 cluster-cim-0.16.2-35.el6.x86_64modcluster = 0.16.2-31.el6 tog-pegasusnet-snmp openslptog-pegasus-libs net-snmp-libsnet-snmp-utils gcc-c++-4.4.7-18.el6.x86_64cloog-ppl, cpp, gcc, libstdc++-devel, mpfr, ppl, libgcc, libgomp, libstdc++numactl-devel-2.0.9-2.el6.i686 numactl-2.0.9-2.el6.i686 numactl-devel-2.0.9-2.el6.x86_64 libstdc++-devel-4.4.7-18.el6.i686 libgcc-4.4.7-18.el6.i686libstdc++-devel-4.4.7-18.el6.x86_64 libstdc++-4.4.7-18.el6.i686gcc-4.4.7-18.el6.x86_64 compat-libcap1-1.10-1.i686compat-libcap1-1.10-1.x86_64 cloog-ppl.x86_64 0:0.15.7-1.2.el6cpp.x86_64 0:4.4.6-4.el6 glibc-headers.x86_64 0:2.12-1.80.el6kernel-2.6.32-573.el6.x86_64 mpfr.x86_64 0:2.4.1-6.el6ppl.x86_64 0:0.10.2-11.el6
2-25Cisco Prime Network 5.3 Installation Guide Installation Requirements Required Red Hat Services and RPMs Required RPMs for Red Hat 6.10 The following RPMs must be downloaded from the Red Hat website and installed on the gateway and unit servers. Required 32-bit packages 
- compat-libstdc++-33-3.2.3-69.el6.i686 
- libgcc-4.4.7-23.el6.i686 
- glibc-2.12-1.212.el6.i686 
- nss-softokn-freebl-3.14.3-23.3.el6_8.i686 Required 64-bit packages 
- ksh-20120801-37.el6_9.x86_64 
- expect-5.44.1.15-5.el6_4.x86_64 
- tcl-8.5.7-6.el6.x86_64 
- telnet-0.17-48.el6.x86_64 
- dos2unix-3.1-37.el6.x86_64 
- compat-libstdc++-33-3.2.3-69.el6.x86_64 
- compat-libcap1-1.10-1.x86_64 
- libaio-devel-0.3.107-10.el6.x86_64 
- libstdc++-devel-4.4.7-23.el6.x86_64 
- cloog-ppl-0.15.7-1.2.el6.x86_64 
- cpp-4.4.7-23.el6.x86_64 
- gcc-4.4.7-23.el6.x86_64 
- gcc-c++-4.4.7-23.el6.x86_64 
- mpfr-2.4.1-6.el6.x86_64 
- ppl-0.10.2-11.el6.x86_64 
- libgcj-4.4.7-23.el6.x86_64 
- tcsh-6.18.01-15.el7.x86_64 
- unzip-6.0-19.el7.x86_64 For high availability, the follo wing packages are required: RPMs Dependencies expect-5.44.1.15-5.el6_4.x86_64 tcl-8.5.7-6.el6.x86_64ksh-20120801-37.el6_9.x86_64elfutils-libelf-devel-0.164-2.el6.i686 elfutils-libelf-devel-0.164-2.el6.i686 glibc-2.12-1.212.el6.i686nss-softokn-freebl-3.14.3-23.3.el6_8.i686
2-26Cisco Prime Network 5.3 Installation Guide Installation Requirements Required Red Hat Services and RPMs For GUI Installation, the foll owing packages are required: Required 64-bit package 
- libgcj-4.4.7-23.el6.x86_64 
- libXtst-1.2.3-1.el6.x86_64elfutils-libelf-devel-0.164-2.el6.x86_64 glibc-common-2.12-1.212.el6.x86_64glibc-headers-2.12-1.212.el6.x86_64libaio-devel-0.3.107-10.el6.x86_64compat-libstdc++-33-3.2.3-69.el6.i686 libgcc-4.4.7-23.el6.i686compat-libstdc++-33-3.2.3-69.el6.x86_64modcluster-0.16.2-35.el6.x86_64net-snmp-5.5-60.el6.x86_64tog-pegasus-libs-2.12.0-6.el6.x86_64net-snmp-utils-5.5-60.el6.x86_64numactl-2.0.9-2.el6.x86_64libstdc++-devel-4.4.7-23.el6.i686 libstdc++-4.4.7-23.el6.i686libstdc++-devel-4.4.7-23.el6.x86_64gcc-4.4.7-23.el6.x86_64 mpfr-2.4.1-6.el6.x86_64 cpp-4.4.7-23.el6.x86_64ppl-0.10.2-11.el6.x86_64cloog-ppl-0.15.7-1.2.el6.x86_64 compat-libcap1-1.10-1.x86_64compat-libcap1-1.10-1.i686kernel-2.6.32-754.6.3.el6.x86_64cluster-cim-0.16.2-35.el6.x86_64tog-pegasus-2.12.0-6.el6.x86_64openslp-2.0.0-3.el6.x86_64net-snmp-libs-5.5-60.el6.x86_64gcc-c++-4.4.7-23.el6.x86_64numactl-devel-2.0.9-2.el6.x86_64numactl-devel-2.0.9-2.el6.i686 numactl-2.0.9-2.el6.i686libgcc-4.4.7-23.el6.i686libstdc++-4.4.7-23.el6.i686compat-libcap1-1.10-1.i686cloog-ppl-0.15.7-1.2.el6.x86_64glibc-headers-2.12-1.212.el6.x86_64dos2unix-3.1-37.el6.x86_64RPMs Dependencies
2-27Cisco Prime Network 5.3 Installation Guide Installation Requirements Required Red Hat Services and RPMs Required 32-bit package 
- libgcj-4.4.7-23.el6.i686 
- libXtst-1.2.3-1.el6.i686 
- gtk2-2.24.31-1.el7.i686 Required RPMs for Red Hat 7.4 The following RPMs must be downloaded from the Red Hat website and installed on the gateway and unit servers. Required 64-bit packages RPMS ksh.x86_64expect.x86_64 libstdc++.i686dos2unix.x86_64 glibc-devel-2.12.x86_64redhat-lsb-core.x86 _64 gcc-4.4.4.x86_64 compat-libstdc++-33-3.2.3.x86_64 compat-libstdc++-33-3.2.3-72.el7.x86_64libaio-devel-0.3.107.x86_64 binutils.x86_64compat-libxcb-1.9-1.el7.i686 compat-libstdc++-33.x86_64compat-libxcb-1.9-1.el7.x86_64 gcc-c++.x86_64compat-libstdc++-33.i686 0:3.2.3-72.el7.x86_64 ksh.x86_64compat-libstdc++-33-3.2.3-72.el7.x86_64 libstdc++.x86_64compat-lib1 compat-lib*.x86_64libXext compat-libcap1-1.10.x86_64 libXext.x86_64 compat-libstdc++-33-3.2.3-72.el7.i686 libXxf86dga.x86_64perl-Data-Dumper-2.145-3.el7.x86_64 libX11.x86_64libstdc++-devel-4.4.4.x86_64 libXxf86vm.x86_64gcc-c++-4.4.4.x86_64 compat-libcap1.x86_64libdmx.x86_64 gcc.x86_64make.x86_64 glibc-devel.x86_64xorg-x11-utils.x86_64 libgcc.x86_64libXv.x86_64 libstdc++-devel.x86_64libXt.x86_64 libXtst.x86_64nfs-utils.x86_64 libXi.x86_64libXau.x86_64 libXxf86misc.x86_64libaio-devel smartmontools.x86_64glibc.x86_64 elfutils-libelf-devel.x86_64sysstat.x86_64 numactl-devel.x86_64
2-28Cisco Prime Network 5.3 Installation Guide Installation Requirements Required Red Hat Services and RPMs Note For compat-libstdc++-33-3.2.3.x86_64 and compat-libstdc++-33-3.2.3.i686 RPMS you must enable optional RPMs by using the following command: yum-config-manager --enable rhel-7-server-optional-rpms Required RPMs for Red Hat 7.5 and Red Hat 7.7 The following RPMs must be downloaded from the Re d Hat website and installed on the gateway and unit servers. Required 64-bit packages 
- ksh-20120801-137.el7.x86_64 
- tcl-8.5.13-8.el7.x86_64 
- expect-5.45-14.el7_1.x86_64 
- dos2unix-6.0.3 -7.el7.x86_64 
- redhat-lsb-core-4.1-27.el7.x86_64 
- compat-libstdc++-33-3.2.3-72.el7.i686 
- compat-libstdc++-33-3.2.3-72.el7.x86_64 
- libaio-devel-0.3.109-13.el7.x86_64 
- compat-libxcb-1.9-1.el7.x86_64 
- compat-libxcb-1.9-1.el7.i686 
- compat-lib*.x86_64 
- perl-Data-Dumper-2 .145-3.el7.x86_64 
- libstdc++-devel-4.8.5-28.el7_5.1.x86_64 
- gcc-c++-4.8.5-28.el7_5.1.x86_64 
- libdmx-1.1.3-3.el7.x86_64 
- make-3.82-23.el7.x86_64xorg-x11-xauth.x86_64 iptables‐1.4.21‐18.2.el7_4.x86_64 libaio.x86_64 compat-libgmp-4.3.1-1.sl7.x86_64 (for GUI installation) iptables-services-1.4.21-18.2.el7_4.x86_64 compat-libmpfr-2.4.1-1.sl7.x86_64 (for GUI installation) gmp-4.3.1-12.el6.i686 (for GUI installation) libgcj-2.96-28.i386 (for GUI installation) libgcj-2.96-27.i386 (for GUI installation) libgcj3-3.0.1-3.i386 (for GUI installation)libgcj-4.4.7-4.1.el6_5.i686 (for GUI installation) libgcj3-devel-3.0.1-3.i386 (for GUI installation)libpng12-1.2.50-10.el7.x86_64(Graph) libgcj-devel-2.96-27.i386 (for GUI installation)libpng-1.5.13-7.el7_2.x86_64(Graph) apr-util-1.5.2-6.el7.x86_64.rpmapr-1.4.8-3.el7_4.1.x86_64.rpm pcre-8.32-17.el7.x86_64.rpmRPMS
2-29Cisco Prime Network 5.3 Installation Guide Installation Requirements Required Red Hat Services and RPMs 
- xorg-x11-utils-7.5-22.el7.x86_64 
- libXv-1.0.11-1.el7.x86_64 
- libXt-1.1.5-3.el7.x86_64 
- nfs-utils-1.3.0-0.54.el7.x86_64 
- libXau-1.0.8-2 .1.el7.x86_64 
- libaio-devel-0.3.109-13.el7.x86_64 
- glibc-2.17-222.el7.x86_64 
- sysstat-10.1.5-13.el7.x86_64 
- xorg-x11-xauth-1.0 .9-1.el7.x86_64 
- libaio-0.3.109-13.el7.x86_64 
- iptables-services-1.4.21-24.1.el7_5.x86_64 
- libpng12-1.2.50-10.el7.x86_64 
- libpng-1.5.13-7.el7_2.x86_64 
- libstdc++-4.8.5-28.el7_5.1.i686 
- glibc-devel-2.17-222.el7.x86_64 
- gcc-4.8.5-28.el7_5.1.x86_64 
- binutils-2.27-28.base.el7_5.1.x86_64 
- gcc-c++-4.8.5-28.el7_5.1.x86_64 
- libstdc++-4.8.5-28.el7_5.1.x86_64 
- libXext-1.3.3-3.el7.x86_64 
- libXxf86dga-1.1.4-2.1.el7.x86_64 
- libX11-1.6.5-1.el7.x86_64 
- libXxf86vm-1.1.4-1.el7.x86_64 
- compat-libcap1-1.10-7.el7.x86_64 
- gcc-4.8.5-28.el7_5.1.x86_64 
- glibc-devel-2.17-222.el7.x86_64 
- libgcc-4.8.5-28.el7_5.1.x86_64 
- libstdc++-devel-4.8.5-28.el7_5.1.x86_64 
- libXtst-1.2.3-1.el7.x86_64 
- libXi-1.7.9-1.el7.x86_64 
- libXxf86misc-1.0.3-7.1.el7.x86_64 
- smartmontools-6.5-1.el7.x86_64 
- elfutils-libelf-devel -0.170-4.el7.x86_64 
- numactl-devel-2.0.9-7.el7.x86_64 
- iptables-1.4.21-24.1.el7_5.x86_64 
- tcsh-6.18.01-15.el7.x86_64 
- unzip-6.0-19.el7.x86_64 
- telnet-0.17-64.el7.x86_64
2-30Cisco Prime Network 5.3 Installation Guide Installation Requirements Required Red Hat Services and RPMs 
- apr-util-1.5.2-6.el7.x86_64.rpm 
- apr-1.4.8-3.el7_4.1.x86_64.rpm 
- pcre-8.32-17.el7.x86_64.rpm Note For compat-libstdc++-33-3.2.3.x86_64 and compat-libstdc++-33-3.2.3.i686 RPMS you must enable optional RPMs by using the following command: yum-config-manager --enable rhel-7-server-optional-rpms For GUI Installation, the foll owing packages are required: Required 64-bit package 
- gmp-6.0.0-15.el7.x86_64 Required 32-bit package 
- gtk2-2.24.31-1.el7.i686 
- libXtst-1.2.3-1.el7.i686 
- gmp-6.0.0-15.el7.i686 For Graph, the following packages are required: Required 64-bit package 
- libpng12-1.2.50-10.el7.x86_64 
- libpng-1.5.13-7.el7_2.x86_64 RHEL 7.x: Required RPMs for Oracle Database 12c The following packages, or later ve rsions of them, are required for the Oracle 12c database on Red Hat. RPMs compat-libcogl12-1.14.0-3.el7.x86_64 compat-libxcb-1.9-1.el7.x86_64compat-libcogl-pango12-1.14.0-3.el7.x86_64 compat-libmediaart0-0.7.0-1.el7.x86_64compat-libmpc-1.0.1-3.el7.x86_64 compat-libgweather3-3.8.2-1.el7.x86_64 libmediaart-1.9.1-1.el7.x86_64 compat-libpackagekit-glib2-16-0.8.9-1.el7.x86_6 4 compat-libgnome-bluetoo th11-3.8.2.1-2.el7.x86_ 64compat-libgdata13-0.13.3-1.el7.x86_64 compat-libgnome-desktop3-7-3.8.4-2.el7.x86_64 compat-libgfortran-41-4.1.2-44.el7.x86_64 compat-libcolord1-1.0.4-1.el7.x86_64 libXau-1.0.8-2.1.el7.i686compat-libtiff3-3.9.4-11.el7.x86_64 libxcb-1.12-1.el7.i686compat-libupower-glib1-0.9.20-1.el7.x86_64 compat-libxcb-1.9-1.el7.i686compat-libf2c-34-3.4.6-32.el7.x86_64 libmediaart-0.7.0-1.el7.x86_64compat-libgfortran-41-4.1.2-44.el7.x86_64 compat-libcogl12-1.14.0-3.el7.x86_64compat-libgdata13-0.13.3-1.el7.x86_64 compat-libmediaart0-0.7.0-1.el7.x86_64
2-31Cisco Prime Network 5.3 Installation Guide Installation Requirements Required Red Hat Services and RPMs compat-libpackagekit-glib2-16-0.8.9-1.el7.x86_6 4compat-libxcb-1.9-1.el7.x86_64 compat-libgweather3-3.8.2-1.el7.x86_64 compat-libf2c-34-3.4.6-32.el7.x86_64 compat-libcogl-pango12-1.14.0-3.el7.x86_64 compat-libupower-glib1-0.9.20-1.el7.x86_64compat-libtiff3-3.9.4-11.el7.x86_64 libxcb-1.12-1.el7.i686compat-libcolord1-1.0.4-1.el7.x86_64 compat-libgnome-bluetooth11-3.8.2.1-2.el7.x86_ 64 compat-libgnome-desktop3-7-3.8.4-2.el7.x86_64 libmediaart-1.9.1-1.el7.x86_64libXau-1.0.8-2.1.el7.i686 compat-libxcb-1.9-1.el7.i686compat-libmpc-1.0.1-3.el7.x86_64 libXau.i686libmediaart-0.7.0-1.el7.x86_64 libmediaart.x86_64compat-libstdc++-33-3.2.3RPMs
2-32Cisco Prime Network 5.3 Installation Guide Installation Requirements Required Ports for Prime Network Required Ports for Prime Network These topics list the required ports for Prime Network. 
- Prime Network Server, HTTP, TCP, and UDP Ports, page 2-32 
- Prime Network Integration Layer Ports, page 2-35 If a firewall is enabled on the system, use this command to open required ports: iptables -A INPUT -p <protocol> --dport <destination port> -j ACCEPT Prime Network Server, HTTP, TCP, and UDP Ports Table 2-16 lists the default ports used by the various Prime Network server and client applications. It also lists the HTTP, TCP, and UDP ports and directions. You can check the status of the listed ports by executing the following command: # netstat -tulnap | grep port-number Table 2-16 Prime Network Server, HTTP, TCP, and UDP Ports Port No. Source Destination Used for: 21 and 22(TCP)Gateway Remote FTP/SFTP serverExporting Change and Configuration Management configurations to remote FTP serv er when the gateway is hosting user-created VNEs Note This is not a recommended configuration. Unit servers, not the gateway server, should host device VNEs. 22 Unit Network elements Default port for SSHv1 or SSHv223 (TCP) Unit Network elements (VNEs) Telnet collector 25 (TCP) Gateway SMTP server SMTP port (recomme nded for embedded database, and optional for external database) 25 (TCP) Database server SMTP server SMTP po rt recommended for an embedded database If gateway server and database server are different, keep port 25 open on both. Note If you do not want to receive e-mail notifications, you do not have to configure the SMTP server. 69 (UDP) Network elementUnit 
- Default TFTP server on units 
- A VM 83, which is the TFTP server used by Change and Configuration Management Note To use A VM 83, you must disable the default TFTP server such that the port is free and available. Otherwise, Change and Configuration Management operations will fail. Note Do not block the port number 1069. Prime Network uses this port to listen the TFTP traffic flow. 69 (UDP) Gateway Network elements Transferring images to and from network elements
2-33Cisco Prime Network 5.3 Installation Guide Installation Requirements Required Ports for Prime Network 123 (UDP) Unit Gateway NTP synchron ization between ga teway and units 123 (UDP) Gateway NTP server 1 NTP synchronization for gateway 161 (UDP) 1161 (UDP, Linux only)Unit Network elements For units with VNEs, these ports are used for SNMP polling by the VNEs. For units with A VM100, you need these port s only if you use SNMPv3, for engine discovery. 161 (UDP) 1161 (UDP, Linux only)Network ElementsUnit For Units with A VM100, if you use SNMP v3. Note For 161 (UDP), if A VM100 resides on the gateway, the Network Elements sends to the gateway. 162 (UDP) 1162 (UDP, Linux only)Network ElementsUnit For Units with A VM100, these ports are used for traps. Note For 162 (UDP), if A VM100 resides on the gateway, the Network Elements sends to the gateway. 162 (UDP) 1162 (UDP, Linux only)Unit Network elements SNMP v3 inform replies 162 (TCP/UDP)Gateway Northbound NMS EPM MIB notifications 514 (UDP) Network elements (VNEs) Unit Note If A VM100 resides on the gateway, the Network Elements sends to the Gateway.Syslog Note If port 514 is occupied when you install Prime Network, you are prompted to make the port available. However, you are given the option to continue with port 514 occupied, and the installation completes successfully. 1101 (TCP) Unit Gateway Prime Network user exclusive bidirectional hardened SSH connection for system administration operations 1101 (TCP) Gateway Unit 1102 (TCP) Gateway Database server Prime Network user exclusive bidire ctional hardened SSH connection for system administration operations Note This SSH port is mandatory only for an embedded database.1102 (TCP) Database server Gateway 1311 (TCP) Prime Network clients Gateway Prime Network monitoring system (SSL over HTTP) 1521 (TCP) Prime Network clients Database server Prime Network Events database access 1521 (TCP) Unit Database server Event persistency 1521 (TCP) Gateway Database server Gateway persistency services Table 2-16 Prime Network Server, HTTP, TCP, and UDP Ports (continued) Port No. Source Destination Used for:
2-34Cisco Prime Network 5.3 Installation Guide Installation Requirements Required Ports for Prime Network 2148 (TCP) Local Geographical Redundant serverRemote geographical redundancy serverIf you implement the Veritas gateway high availability solution, port 2148 is used by Veritas, and AVM 148 cannot be used. 2148 (TCP) Remote Geographical Redundant serverLocal geographical Redundancy server 38751 Unit Network elements Default Telnet port 38752 Unit Network elements Default SSL port9605 (TCP) 42607 (TCP)WEB UI Server/Tomcat Compliance Audit EngineCompliance Audit Engine default connection port. 5029 Unit DB server Operations Reports database (Infobright) 6080 (TCP) Client Gateway HTTP for web access an d web start. Used to download the client from the gateway server, client updates (jar files), and online help files. 6081 (TCP) Client Gateway HTTP over SSL for web access and web services such as Operations Reports 6081 (TCP) Unit Gateway HTTP over SSL for key exchange during unit configuration8000 (TCP) Unit Unit Local management over http Gateway Gateway 8009 (TCP) Client Gateway Tomcat server AJP connector port, used for Change and Configuration Management and Operations Reports. 1 8011 (TCP) Unit Unit Local management over http Gateway Gateway 8024 Client Gateway Operations Reports8043 (HTTPS) Client Gateway Secure HTTP port for Change and Configuration Management, Network Discovery, and VCB web clients. 8080 (HTTP) Client Gateway HTTP port for Cha nge and Configuratio n Management, VCB, and Network Discovery web clients. By default, this port is disabled and the secure 8043 HTTP port is enabled for these clients. To use port 8080, you must enable it manually, as follows: # cd $NCCM_HOME/scripts/ # ./nccmHTTP.csh enable # dmctl stop # dmctl start 8092 A VM 76 A VM 77 CCM NBI service 8099 (TCP) Unit Unit Local management over HTTP Gateway GatewayTable 2-16 Prime Network Server, HTTP, TCP, and UDP Ports (continued) Port No. Source Destination Used for:
2-35Cisco Prime Network 5.3 Installation Guide Installation Requirements Required Ports for Prime Network Prime Network Integration Layer Ports Table 2-17 lists the ports used by the Prime Network In tegration Layer (PN-IL ). The PN-IL allows Prime Network to expose Multi-Technology Operatio ns Systems Interface (MTOSI) APIs over Simple Object Access Pr otocol (SOAP). 8445 (HTTPS) Client Prime Network Operations Reports BA ConsoleSecure HTTP port for Prime Network Operations Reports web client. 9002 (TCP) Gateway Gateway Prime Network BQL Note Port 9002 is a local port only. 9003 (SSL) Prime Network clients Gateway Prime Network BQL over SSL 9005 (TCP) Client Gateway Web GUI server port, used for Change and Configuration Management 9009 (TCP) Client Gateway Web GUI server AJP connector port, used for Change and Configuration Management 9080 (TCP) Client Gateway Web GUI server HTTP connector port, used for Change and Configuration Management 9443 (TCP) Client Gateway Web GUI server HTTPS connector port, used for Change and Configuration Management 9390 (TCP) Gateway Unit Transport internal processes.9490 (TCP) Unit Gateway Prime Network secured SSL transport 9770 (TCP) and 9771 (TCP) Prime Network clients Gateway Prime Network Vision, Administration, Events. 9875 (TCP) Client Gateway Spring JMX console port, used for Change and Configuration ManagementTable 2-16 Prime Network Server, HTTP, TCP, and UDP Ports (continued) Port No. Source Destination Used for: Table 2-17 SIL Ports Port No. Source Destination Used for: 1100 (TCP) - PrivateIntegration Layer FrameworkIntegration Layer FrameworkKaraf JMX RMI registry (Inte gration layer management). Note Allow access to this port from local host. 9500 (TCP) - Private (localhost)Karaf SSH Shell Note Make sure this application is not in use by another application or process. 9095 - Auditlog NBI Web Service9020 - Alarm Management NBI Web Service9229 - 3GPP Notification Consumer WSDL will be exposed9201 - MTOSI Notification Consumer WSDL will be exposed
2-36Cisco Prime Network 5.3 Installation Guide Installation Requirements Required Ports for Prime Network 9110 (TCP) - PublicMTOSI adapter Integration Layer FrameworkMTOSI web service implementation (MTOSI WS-SOAP NBI) 9220 (TCP) - Public3GPP adapter Integration Layer Framework3GPP web service implementation (3GPP WS-SOAP NBI) 32768 - 61000 (TCP) - Private/PublicIntegration Layer FrameworkIntegration Layer FrameworkEphemeral Ports Note Allow access to this port from the local host, unless the integration layer uses a distributed installation with JMS SSL transport. 44445 (TCP) - PrivateKaraf JMX RMI server (Prime Network integration layer management). Note Allow access to this port from localhost. 61615(TCP) - Private/PublicJMS SSL transport Note Allow access to this port from the local host, unless the integration layer uses a distributed installation with JMS SSL transport. 61616 (TCP) - Private/PublicJMS NIO transport Note Allow access to this port from the local host, unless integration layer uses a distributed installation with JMS NIO transport. Table 2-17 SIL Ports (continued) Port No. Source Destination Used for:

CHAPTER 3-1Cisco Prime Network 5.3 Installation Guide 3 Preparing for the Installation This chapter provides preinstallation tasks that must be performed and verified before proceeding with the Prime Network installation. 
- Gateway Preinstallation Tasks—Embedded Database, page 3-1 
- Gateway Preinstallation Tasks—External Database, page 3-3 
- Unit Preinstallation Tasks, page 3-4 
- IPv4 and IPv6 Compliance Considerations, page 3-8 
- UNIX Services and Components Used by Prime Network, page 3-10 Note All procedures in this chapter are performed as the root user. Gateway Preinstallation Tasks—Embedded Database Table 3-1 shows the tasks that you must perform before installing Prime Net work on a gateway that uses an embedded database. All procedures s hould be performed as the root user. Table 3-1 Gateway Preinstallation tasks Using an Embedded Database Task Refer to (or perform): Step 1 Verify that the Disk 1: New Install DVD is available. Note If the Installation DV D is not available, mount the build server on the gateway and access the required build for PN installation.Installation DVDs, page 1-2 Step 2 Verify that the server machines meet the system requirements.Installation Requirements, page 2-1
3-2Cisco Prime Network 5.3 Installation Guide Preparing for the Installation Gateway Preinstallation Tasks—Embedded Database Step 3 Ensure you have the following SSH connectivity as root: 
- Gateway to unit 
- Unit to gateway 
- Unit to localhost 
- Gateway to localhost— Step 4 Verify that the server machines meet the Oracle database requirements.Prime Network Gateway and Data base Requirements, page 2-2 Step 5 Verify the installed operating system. Verifying the Installed Operating System, page 3-5 Step 6 Disable SELinux. In /etc/selinux/config, configure SELINUX=disabled, then reboot the machine. Step 7 Verify the RPM files required for Prime Network on Red Hat are installed.Verifying the RPMs Required on Red Hat for Prime Network, page 3-5 Step 8 Verify that all the ports designated for Prime Network are free.Required Ports for Prime Network, page 2-32 Step 9 Allocate the storage for th e Oracle database files. By default, Prime Network supports an archive size of 14 days. Contact your Cisco account representative for assistance.Also see the database requirements in Breakdown of Oracle Database IOPS. Step 10 Verify that the time of the servers is synchronized. Configuring the Network Timing Protocol, page 3-6. Step 11 Enable the jar command in the root user path on all machines where you will install Prime Network.Run which jar to verify that the jar command is available. Step 12 Verify that the user has root privileges on the gateway.— Step 13 Verify that DNS is enab led on the Prime Network gateway, unit, and client machines.— Step 14 Verify that the hosts file (/etc/hosts) is configured to include the machine’s local hostname and its IP address.Do not put the hostname and local host address on the same line, as shown in the bad /etc/hosts example. Valid /etc/hosts file: 127.0.0.1 localhost.localdomain localhost ::1 localhost6.localdomain localhost610.56.117.131 pnqa-ha-p2 pnqa-ha-p2.cisco.com Invalid /etc/hosts file: 127.0.0.1 localhost.localdomain localhost hostname1 ::1 localhost6.localdomain localhost6 Step 15 Verify the minimum Swap file memory size is 8GB If the installation fails because of missing swap file check the swap file minimum allowed size. The minimum allowed swap file size is 8192000.Table 3-1 Gateway Preinstallation tasks Us ing an Embedded Data base (continued) Task Refer to (or perform):
3-3Cisco Prime Network 5.3 Installation Guide Preparing for the Installation Gateway Preinstallation Tasks—External Database Gateway Preinstallation Tasks—External Database Table 3-2 lists the tasks that you must perform before installing Prime Network on a gateway that uses an external database. All procedures sh ould be performed as the root user. Table 3-2 Gateway Preinsta llation Tasks Checklists For External Database Task Refer to (or perform): Step 1 Verify that the Disk 1: New Install DVD is available.Installation DVDs, page 1-2 Step 2 Verify that the server m achines meet the system requirements.Installation Requirements, page 2-1 Step 3 Ensure you have the following SSH connectivity as root: 
- Gateway to unit 
- Unit to gateway 
- Unit to localhost 
- Gateway to localhost— Step 4 Verify that the server meets the Oracle database requirements.Prime Network Gateway and Data base Requirements, page 2-2 Before you begin to Install Prime Network 5.3, ensure to: 1.Edit the file in the following path: /etc/systemd/logind.conf 2.Change the value to Set RemoveIPC=no 3.Remove the following comment: Reboot Server 4.Stop the Firewall: service firewalld stop Step 5 Verify the installed operating system. Verifying the Installed Operating System, page 3-5 Step 6 Disable SELinux. In /etc/selinux/config, configure SELINUX=disabled, then reboot the machine. Step 7 Verify the RPM files requ ired for Prime Network on Red Hat are installed.Verifying the RPMs Required on Red Hat for Prime Network, page 3-5 Step 8 Verify that all the ports designated for Prime Network are free.Required Ports for Prime Network, page 2-32. Step 9 Verify that the Oracle database is configured before proceeding with the installation.Preparing the Oracle External Database, page 4-1. Step 10 Start the Oracle listener after installing the database.Starting the Oracle Listener (E xternal Database), page 3-6
3-4Cisco Prime Network 5.3 Installation Guide Preparing for the Installation Unit Preinstallation Tasks Unit Preinstallation Tasks Table 3-3 shows the tasks that you must verify or perform before proceeding with Prime Network unit installation. All procedures should be performed as the root user.Step 11 (Optional) Collect the following details: 
- Port number 
- SID 
- Data file locationRequired if you do not want Prime Network to auto-configure your database during the installation. Note Confirm the absolute path and location of the Oracle data files with your database administrator. The location can be under the ORACLEHOME directory or under any other pre-allocated, mounted directory that has oracle:oinstall or oracle:dba permissions. Step 12 Pre-allocate the storage for the Oracle database files. See Prime Network Gateway and Database Requirements, page 2-2. Note Contact your Cisco account representative if you need assistance. Step 13 Verify that the time of the servers is synchronized. Configuring the Network Timing Protocol, page 3-6 Step 14 Verify that the time zone setting on all Prime Network servers is GMT (with 0 offset). Prime Network stores events in the database in GMT format. The Prime Network clients convert events to the time zone that is configured on the client workstation. — Step 15 Enable the jar command in the root user path on all machines where you will install Prime Network.Run which jar. Step 16 Verify that the user has root privileges on the gateway.— Step 17 Verify that DNS is enabled on the Prime Network gateway, unit, and client machines.— Step 18 Verify that the hosts file (/ etc/hosts) is configured to include the machine’s local hostname and its IP address.Do not put the hostname and local host address on the same line, as shown in the bad /etc/hosts example. Valid /etc/hosts file: ip_address1 hostname1.domain hostname1 127.0.0.1 localhost.localdomain localhost::1 localhost6.localdomain localhost6 Invalid /etc/hosts file: ip_address1 hostname1.domain hostname1 localhost 127.0.0.1 localhost.localdomain localhost hostname1 ::1 localhost6.localdomain localhost6Table 3-2 Gateway Preinstallat ion Tasks Checklists For Ex ternal Database (continued) Task Refer to (or perform):
3-5Cisco Prime Network 5.3 Installation Guide Preparing for the Installation Verifying the Installed Operating System Verifying the Installed Operating System Prime Network 5.3 is supported on Red Hat 6.7, Red Hat 6.8, Red Hat 6.9, Red Hat 6.10, Red Hat 7.4, Red Hat 7.5, and Red Hat 7.7 64-bit Se rver Edition (English language). To verify that you have installed a supported Linux version, as the root user, enter: # cat /etc/redhat-release The command output should list a supported version, as in this example: Red Hat Enterprise Linux Server release 6.7 Verifying the RPMs Required on Red Hat for Prime Network As root user, verify all required RPMs are installed. For a list of required RPMs, see Required Red Hat Services and RPMs, page 2-16. To verify which required RPMs are installed, use th e rpm -q command followed by the required RPMs, as in the following example (which is for Red Hat 6.7): rpm -q binutils-2.20.51.0.2-5.36.el6.x86_64 compat-libcap1-1.10-1.x86_64 compat-libstdc++-33-3.2.3-69.el6.x86_64 gcc-4.4.7-4.el6.x86_64 gcc-c++-4.4.7-4.el6.x86_64 glibc-2.12-1.132.el6.x86_64 glibc-2.12-1.132.el6.x86_64 ksh-20120801-10.el6.x86_64 libgcc-4.4.7-4.el6.x86_64libstdc++-4.4.7-4.el6.x86_64 libstdc++-devel-4.4.7-4.el6.x86_64 libaio-0.3.107-10.el6.x86_64 libaio-devel-0.3.107-10.el6.x86_64 make-3.81-20.el6.x86_64 sysstat-9.0.4-22.el6.x86_64 expect-5.44.1.15-5.el6_4.x86_64 openssh-clients-5.3p1-94.el6.x86_64 openssh-server-5.3p1-94.el6.x86_64 openssh-5.3p1-94.el6.x86_64 telnet-0.17-47.el6_3.1.x86_64 openssl-1.0.1e-16.el6.x86_64 compat-libstdc++-33.x86_64 dos2unix-3.1-37.el6.x86_64 --qf '%{name}.%{arch}\n'|sort The output of this command will list the RPMs and will indicate which RPMs are not installed. Example output: binutils-2.20.51.0.2-5.36.el6.x86_64 package compat-libcap1-1.10-1.x86_64 is not installed compat-libstdc++-33-3.2.3-69.el6.x86_64Table 3-3 Unit Preinstallation Tasks Checklists Task Refer to: Step 1 Verify that the Disk 1: New Install DVD is available. Installation DVDs, page 1-2 Step 2 Verify that the unit machines meet the syst em hardware and software requirements.Prime Network Unit Requirements, page 2-10 Step 3 Verify that the time on all units in the setup is synchronized. Note The maximum difference allowed between different clocks is 4 minutes.— Step 4 Verify that all the ports de signated for Prime Network are free.Required Ports for Prime Network, page 2-32
3-6Cisco Prime Network 5.3 Installation Guide Preparing for the Installation Starting the Oracle Listener (External Database) package gcc-4.4.7-4.el6.x86_64 is not installed gcc-c++-4.4.7-4.el6.x86_64 glibc-2.12-1.132.el6.x86_64ksh-20120801-10.el6.x86_64 libgcc-4.4.7-4.el6.x86_64 libstdc++-4.4.7-4.el6.x86_64libstdc++-devel-4.4.7-4.el6.x86_64 libaio-0.3.107-10.el6.x86_64 libaio-devel-0.3.107-10.el6.x86_64make-3.81-20.el6.x86_64 sysstat-9.0.4-22.el6.x86_64 expect-5.44.1.15-5.el6_4.x86_64openssh-clients-5.3p1-94.el6.x86_64 openssh-server-5.3p1-94.el6.x86_64 openssh-5.3p1-94.el6.x86_64telnet-0.17-47.el6_3.1.x86_64 openssl-1.0.1e-16.el6.x86_64 compat-libstdc++-33.x86_64dos2unix-3.1-37.el6.x86_64 Starting the Oracle Listener (External Database) After the external database has been created, start the Oracle li stener so that the network-conf.pl configuration script can connect to the database. Step 1 Determine if the Oracle listener is up by executing the follow ing command as the root user: ps -ef | grep ora The following output should be displayed (in this example, ORACLEHOME is set to /export/home/oracle): oracle 17327 1 0 Aug 02 ? 0:00 /export/home/oracle/product/11.2.3/bin/tnslsnr LISTENER -inherit Step 2 If the Oracle listener is down, complete the following steps: a.Log in as user oracle. b.Enter lsnrctl start. Configuring the Network Timing Protocol It is recommended to use your organization’s NTP server for timing synchronization, however, if necessary, you could use the Prime Network gateway. Note If gateway high availability is configured, you must use your organization’s NTP server for timing. To use your organization’s NTP server for timing synchronization:
3-7Cisco Prime Network 5.3 Installation Guide Preparing for the Installation Configuring the Network Timing Protocol Step 1 Locate the ntp.conf file, which is usually located under /etc. (Check the file location with the NTP system administrator.) Step 2 Enter the following in ntp.conf, where NTP_SERVER_IP is the IP address of your organization’s NTP server. 
- For IPv4, enter: ### server NTP_SERVER_IP prefer ### 
- For IPv6, enter: ### server -6 NTP_SERVER_IP prefer ### Step 3 Restart the NTP service: service ntpd restart To use the Prime Network gate way for timing synchronization: Step 1 On the Prime Network gateway, create a file with the following contents and save it as /etc/ntp.conf: ### server 127.127.1.0 prefer fudge 127.127.1.0 stratum 10 restrict default noquerydriftfile /var/lib/ntp/ntp.drift statsdir /var/lib/ntp/ntpstats/ filegen peerstats file peerstats type day enablefilegen loopstats file loopstats type day enable filegen clockstats file clockstats type day enable ### Step 2 Create a drift file: touch /var/lib/ntp/ntp.drift Step 3 Restart the NTP service: service ntpd restart Step 4 Configure the units and database to be NTP clients by creating a file with the following contents, and save it as /etc/ ntp.conf: a.Create an /etc/ntp.conf with the following contents: For IPv4, enter: ### server GW_SERVER_IP prefer ### For IPv6, enter: ### server -6 GW_SERVER_IP prefer ###
3-8Cisco Prime Network 5.3 Installation Guide Preparing for the Installation IPv4 and IPv6 Compliance Considerations b.Restart the NTP service: service ntpd restart c.Verify connectivity to the NTP server, enter: ntpq -p Note If you find two NTP processes running on the server, kill one of them. Finding NTP Process in Server To find an NPT process running in the server, follow the command provided below: [root@ast-nms-cpn ~]# ps -ef | grep -v grep | grep "ntp" ntp 2040 1 0 Jan23 ? 00:00: 01 ntpd -u ntp:ntp -p /var/run/ntpd.pid -g root 2051 2040 0 Jan23 ? 00:00: 01 ntpd -u ntp:ntp -p /var/run/ntpd.pid -g Killing NTP Process in Server To kill an NTP process running in the server, follow the command provided below: [root@ast-nms-cpn ~]# kill -9 2051 [root@ast-nms-cpn ~]# ps -ef | grep -v grep | grep "ntp" ntp 2040 1 0 Jan23 ? 00:00:01 ntpd -u ntp:ntp -p /var/run/ntpd.pid -g [ root@ast-nms-cpn ~]# [root@ast-nms-cpn ~]# ps -ef | grep -v grep | grep "ntp" | wc -ll IPv4 and IPv6 Compliance Considerations Prime Network 5.3 supports monito ring and communication over IPv4 and IPv6 interfaces. Units can hold and manage VNEs from different interface types. Prime Network IPv4 and IPv6 installation options are shown in Table 3-4. Variations in the options are possible, for example, a gateway with a dual-stack interface can connect to one unit with an IPv4 interface and an other with an IPv6 interface. Note If Gateway is installed with IPv6 interface then OR is not supported. Table 3-4 Supported IPv4 and IPv6 Installations Interface IPv4 IPv6 IPv4 + IPv6 Gateway Yes Yes YesClient Yes Yes YesUnit Yes Yes Yes
3-9Cisco Prime Network 5.3 Installation Guide Preparing for the Installation IPv4 and IPv6 Compliance Considerations While Prime Network 5.3 allows for flexible IPv4 and IPv6 installations, do not install Prime Network in an IPv4 and IPv6 network until you review the following points: 
- Units configured in a redundant relationship must have the same interface type, that is, either IPv4 or IPv6. 
- Installation sets the interface type between a unit and a gateway. Upgrading to Prime Network 5.3 does not automatically add a new interface type between an existing unit and its gateway, even if the IPv6 connectivity already exists. Cont act Cisco Technical Support for assistance. 
- The client must have the same connectivity t ype to the database machine as the Prime Network gateway. For example, if the gateway is configured to access the database using IPv4, the client must also be able to access the database using IPv4. 
- Only Oracle version 12cR2 and later are IPv6-compliant. If you plan to install a gateway or unit with only IPv6 interface types, verify that the Orac le database is version 12cR2 or later. (The Prime Network embedded Oracle database is version 12c[12.2.0.1].) 
- You can install the Prime Network 5.3 embedded database on an IPv4-only server or on a dual stack server (IPv4 and IPv6). You cannot install th e embedded database on an IPv6-only server. 
- You can install Prime Network 5.3 Operations Reports on an IPv4-only server or on a dual stack server (IPv4 and IPv6). You cannot inst all the tool on an IPv6-only server. 
- When using Change and Configuration management, make sure your device can communicate both over IPv4 and IPv6. If your device cannot communicate over IPv4, then the Unit from which the VNE of that device is configured can only manage devices over IPv6. This is valid only in case the device does not have dual stack. 
- If the units are installed with in terface type that differs from the interface on which the database is installed, then database must be configured for dual listener. To configure dual listener, complete the procedure in Configuring Dual Listeners, page 7-3 after the installation.Cisco Embedded Oracle Yes No Yes Note For Dual Stack environments IPv6 is supported. However, it is recommended to select IPv4 as the DB interface during network-conf execution and select IPv6 as the backend interface. User-purchased Oracle Yes No YesOperations Reports Yes No YesTable 3-4 Supported IPv4 and IPv6 Installations Interface IPv4 IPv6 IPv4 + IPv6
3-10Cisco Prime Network 5.3 Installation Guide Preparing for the Installation UNIX Services and Componen ts Used by Prime Network UNIX Services and Components Used by Prime Network Table 3-5 lists the Linux services and components that are used by the Prime Network system. Do not remove them. Table 3-5 Required Linux Services and Components Name Function Configuration Information TCP or UDP Port No. Traffic Classification xntpd Time server /etc/inet/ntp.conf 123 (UDP) ntpntp4 Time server /etc/inet/ntp.conf 123 (UDP) ntpntpd 1 1. IPv6 support, installed packageTime server /etc/inet/ntp.conf 123 (UDP) ntp /bin/tcsh UNIX shell None None None/usr/bin/tcsh UNIX shell None None NonePerl Scripting language None None None/bin/sh UNIX shell None None None/bin/ksh UNIX shell None None None/usr/bin/ksh UNIX shell None None Nonentpd Time server /etc/inet/ntp.conf 123 (UDP) ntp

CHAPTER 4-1Cisco Prime Network 5.3 Installation Guide 4 Preparing the Oracle External Database This chapter describes how to configure an external Oracle database for use with Prime Network. Make sure you have the most recent version of the Oracle software do cumentation (see the Oracle Corporation website). Using an External Database: General Guidelines 
- Installation and sizing: –The external Oracle server can be installe d on the Prime Network gateway or on any other remote workstation. –Preallocate the database storage by creating all requi red data files to their full sizes in advance. With the exception of pnuser and pnuser _admin, Prime Network tablespace data files are generated in 1 GB sizes with autoextend set to 256 MB and no size limit. (The data file can grow to 32 GB.) –If the Oracle server is installed on the Prim e Network gateway, no Oracle services can be installed on port 2100. If an Oracle listener is installed on port 2100, you must disable it or change the port number (see Table 4-2 ). By default, this port is used by the Oracle XML DB service. –The mount directory should be available in both the active and standby nodes. If the mount folder directory does not exists in the standby node, then the installation fails. –For deployment information and recommendations, contact your Cisco account representative. 
- Starting and stopping processes: –Prime Network does not manage the starting and stopping of Oracle processes for an external database. The database administrator is resp onsible for automatically restarting Oracle processes in the event of a power failure. –If your system is configured for gateway high availability, start and stop Prime Network and Oracle using CLI commands. Stopping the appli cations using the regular application commands (without the awareness of the cluste r software) can cause a failover. –If you restart Oracle, you must also restart A VM 25 on both the gateway and units. 
- Usernames: –The Oracle user should be called oracle, and it should be part of a group called dba. –The database username and password that ar e related to the Prime Network application are created automatically during installation.
4-2Cisco Prime Network 5.3 Installation Guide Preparing the Oracle External Database Creating an External Oracle Database 
- Clocks: In Prime Network, the clocks on the gateway and units must be synchronized. If Oracle is running on a separate workstation, that remote database workstation’s clock must be synchronized with the gateway and unit clocks. Creating an External Oracle Database The database instance installation can be performed as pa rt of the Oracle installation or separately using the Oracle database configuration assistant (DBCA) utility. This section describes how to create an Oracle database instance using the DBCA utility (in ORACLEHOME /bin). Download the Oracle patches from http://metalink.oracle.com. Note After installing an Oracle patch, you must change th e permissions for the newly installed files to enable all OS users to use Oracle on the workstatio n. You can do this by running the script ORACLEHOME \install\changePerm.sh. The Prime Network database size is determined by the usage pattern s and the expected load in your deployment. Contact your Cisco account representative for assistance in determining your database load profile and calculating your database me mory and storage size requirements. Prime Network provides sizing estimates for the following usage profiles, which vary according to the maximum expected rate of actionable events per second that your deployment can support: 
- Up to 250—Represents a high-scale production environment with a maximum supported rate of database operations, including up to 250 actionable events per second, a maximum amount of services, and the highest rate of configuration archive and provisioning operations. 
- Up to 200—Represents a high-scale production environment with a maximum supported rate of database operations, including up to 200 actionable events per second, a maximum amount of services, and the highest rate of configuration archive and provisioning operations. 
- Up to 100—Represents a high-scale production environment with a maximum supported rate of database operations, including up to 100 actionable events per second, a maximum amount of services, and the highest rate of configuration archive and provisioning operations. 
- Up to 50—Represents a mediumto high-scale production environment with a medium rate of database operations, including up to 50 actionable events per second, a medium amount of services, and a medium rate of configuration archive and provisioning operations. 
- Up to 20—Represents a mediumto small-scale produ ction environment with a low rate of database operations, including up to 20 actionable events per second, a small amount of services, and a low rate of configuration archive and provisioning operations. 
- Up to 5—Represents a small enviro nment with a low rate of database operations, including up to 5 actionable events per second, a sm all amount of services, and a lo w rate of configuration archive and provisioning operations. 
- Up to 1—Represents a very small test or proof-o f-concept environment with a single machine acting as a gateway, unit, and database (or with a separate unit), with no more than 50 VNEs and a low rate of events.
4-3Cisco Prime Network 5.3 Installation Guide Preparing the Oracle External Database Creating an External Oracle Database When installing a database in stance, use the values in Table 4-1 for the Oracle initialization parameters. The values are in bytes. For better performance, make sure you generate statis tics for all tables in the database. Prime Network issues alerts if no statistics are generated, or if the current statistics are more than 2 weeks old. Note The pnuser _admin user is a user with database admin istrator permissions who can run maintenance tasks—such as gathering statistics—on the ot her Prime Network database schemas. After the pnuser _admin user is created, a cron job runs every 24 hours to gather statistics on the pnuser (Fault Database). You no longer have to gather statistics manually. If you expect a high scale in th e first 24 hours, it might be necessary to manually force statistics gathering twice during the first day, 1 and 5 hours afte r noise start. To force st atistics gathering, enter the following command as pnuser: cd $ PRIME_NETWORK_HOME /Main/scripts; ./call_update_ana_stats.pl >& /dev/null Table 4-2 describes the steps involved in creating an Oracle 12c database using DBCA. If you are using an Oracle 12c database, please refer to the Cisco Prime Network 5.3 Installation Guide.Table 4-1 Database Initialization Parameters Profile NameUp to 5 Actionable Events per SecondUp to 20 Actionable Events per SecondUp to 50 Actionable Events per SecondUp to 100 Actionable Events per SecondUp to 200-250 Actionable Events per Second sga_max_size 4412407808 6509559808 6509559808 10301210624 10301210624shared_pool_size 1258291200 2147483648 2147483648 2147483648 2147483648 large_pool_size 134217728 134217728 134217728 134217728 134217728java_pool_size 218103808 335544320 335544320 335544320 335544320 pga_aggregate_target 1048576000 1887436800 1887436800 1887436800 1887436800 sga_target 0 0 0 0 0 memory_target 0 0 0 0 0 memory_max_target 0 0 0 0 0 db_cache_size 1048576000 2684354560 2684354560 2684354560 2684354560 db_keep_cache_size 318767104 872415232 872415232 3690987520 3690987520 db_recycle_cache_size 167772160 167772160 167772160 838860800 838860800 db_file_multiblock_read_c ount 16 16 16 16 16 open_cursors 2000 2000 2000 2000 2000 optimizer_index_cost_adj 10 10 10 10 10 optimizer_index_caching 50 50 50 50 50 
4-4Cisco Prime Network 5.3 Installation Guide Preparing the Oracle External Database Creating an External Oracle Database Table 4-2 Creating an Oracle database Using DBCA Procedure Recommended Action Step 1 In the Operations window, select the operation that you want to perform.Choose Create a Database. Step 2 Select a creation mode in the Creation Mode window. Choose Advanced Mode. Step 3 In the Database Template window, select the template.Choose Custom Database. Step 4 In the Database Identification window, enter the Global Database Name and SID field.Enter mcdb. Do not check the Create As Contai ner Database check box, and do not fill in any of the related data. Note Do not modify the default Service, instead, you can add additional Service (s) along with the default service. Step 5 In the Management Options window, configure the fields in Enterprise Manager as required.Do not set any of the fields in Enterpri se Manager and Automatic Maintenance task, and proceed to the next step. Step 6 Enter the passwords for the Oracle administrative accounts Enter passwords for SYS and SYSTEM users. Step 7 In the Listener Selection window, check the relevant listener check box. Enter the name and port. Step 8 In Database File Locations window, specify the storage type and location for the database. Set recovery settings if you intend to configure a database backup policy.1.Select Storage Type as File System. 2.For Storage Location, browse for the common location for all database files (Example: /export/home/oracle/oradata/mcdb). 3.In Recovery Related Files, choose File System as the Storage Type. 4.Check the Enable Archiving check box. 5.Click Edit Archive Mode Parameters to set the location for archive logs. Step 9 In the Database Options window, use the default options. Make sure that the Oracle Label Security and Oracle Database Vault check boxes are not checked. The rest of the ch eck boxes should be checked. 
4-5Cisco Prime Network 5.3 Installation Guide Preparing the Oracle External Database Configuring the External Database Configuring the External Database This section includes details on configuring the data base, such as the Oracle initialization parameters, ports, database size, and so forth. Configuring the cursor_sharing System Parameter The cursor_sharing system parameter must be set to FORCE. To configure the cursor_sharing system parameter: Step 1 As the SYS user, enter the following command: ALTER SYSTEM SET cursor_sharing='FORCE' SCOPE=BOTH; Step 2 Enter the following SQL*PLUS command to verify that the parameter is set correctly: SQL> show parameter cursor_sharing In the command output, you should see: NAME TYPE VALUE ----- ----- ------ cursor_sharing string FORCEStep 10 In the Initialization Parameters window, configure the memory settings for the database.1.Select Custom. 2.For the Memory Management field, select the Manual Shared Memory Management from the drop down. 3.Configure other initializati on parameters. Refer to Table 4-1 for the values of various database initialization parameters based on profiles. 4.In the Sizing tab, change processes to 1000. 5.In the Character Sets tab, choose you r preferred character set (AL32UTF8 is recommended). 6.In the Connection Mode tab, choose Dedicated Server Mode. Step 11 In the Creation Options window, select the database creation options.Choose Create Database and click Customize Storage Locations to configure redo log settings. Contact your Cisco account representative fo r assistance in estimating the database size. To support high event rates, redo log files must be six online 2 GB files on raw devices or on a dedicated disk partition mounted with the directio option. The redo log files must reside on a physical disk separate from the Oracle data files.Table 4-2 Creating an Oracle database Using DBCA (continued) Procedure Recommended Action
4-6Cisco Prime Network 5.3 Installation Guide Preparing the Oracle External Database Configuring the External Database Retaining Partitioning Storage Behavior To ensure that partitioning storage behavior is reta ined, ensure that the parti tions are created with an extent size of 64 KB. To create partitions with extent size of 64 KB, se t the hidden parameter (_partition_large_extents) to false. Enter the following command as the SYS user: ALTER SYSTEM SET "_partition_large_extents" =FALSE SCOPE=BOTH; Note The partitioning storage behavior is not retained if th e partitions are created with the default extent size (8 MB). Configuring the job_queue_processes System Parameter The job_queue_processes parameter specifies the maxi mum number of processes that can be created for the execution of jobs. It must be set to 1000. To configure the job_queue_processes parameter: Step 1 As the SYS user, enter the following command: alter system set job_queue_processes=1000 scope=both; Step 2 Enter the following SQL*PLUS command to verify that the parameter is set correctly: SQL> show parameter job_queue_processes In the command output, you should see: NAME TYPE VALUE ----- ----- ------ job_queue_processes integer 1000 Configuring the audit_trail System Parameter Disable Oracle auditing by setting the audit_trai l system parameter to NONE. To configure the audit_trail system parameter: Step 1 As the SYS user, enter the following command: ALTER SYSTEM SET audit_trail=NONE SCOPE=spfile; Step 2 As the SYS user, enter the following command to start the database: Startup Step 3 As the SYS user, enter the following SQL*PLUS command to verify that the parameter is set correctly: SQL> show parameter audit_trail In the command output, you should see: NAME TYPE VALUE ----- ----- ------ audit_trail string NONE
4-7Cisco Prime Network 5.3 Installation Guide Preparing the Oracle External Database Configuring the External Database Disabling the Recycle Bin Option If enabled, the Oracle recy cle bin feature retains a version of each dropped object, which can lead to an accumulation of junk information in the Prime Network DB Segments table. To disable the recycle bin option: Step 1 As the SYS user, enter the following command: ALTER SYSTEM SET recyclebin = OFF DEFERRED scope=both; Step 2 Enter the following SQL*PLUS command to verify that the parameter has been disabled: SQL> show parameter recyclebin In the command output, you should see: NAME TYPE VALUE ----- ----- ------ recyclebin string OFF DEFERRED Step 3 (Optional) As pnuser, enter the following command to see the objects that are currently saved in the recycle bin: show recyclebin Step 4 (Optional) As pnuser, enter the following command to empty the recycle bin: purge recyclebin; Setting the open_cursors Parameter Open cursors enable the read ing and writing of data between the Oracle database and Cisco Prime Network. The open_cursors parameter defines the maximum number of cursors that can be opened concurrently, per session. The recommended maximum number of open cursors for use with Cisco Prime Network is 2000. An error is generated if the number of open curs ors in a session exceeds the specified number. To set the open_cursors parameter: Step 1 To check the value of the op en_cursors para meter, enter: SQL> show parameter open_cursors In the command output, you should see: open_cursors integer 2000 Step 2 If the integer value is less than 2000, enter: SQL> ALTER SYSTEM SET open_cursors = 2000 SCOPE=BOTH; Step 3 To verify that the va lue has changed, enter:
4-8Cisco Prime Network 5.3 Installation Guide Preparing the Oracle External Database Configuring the External Database SQL> show parameter open_cursors Note If the open_cursors integer value is still less than 2000, contact yo ur local database administrator. Disabling Automatic Maintenance Jobs If you deploy Prime Network to handle a high event rate, it is recommended that you disable Oracle’s automatic maintenance jobs. Auto matic maintenance significantly affects Oracle performance and increases event processing time. Caution These commands disable all scheduler maintenance activities. Co mplete the following procedure after implementing an alte rnative method of gathering database sta tistics. Some of the commands will fail in some versions of Oracle; yo u can ignore any failures. Connect to the Oracle database as the SY S user and enter the following commands: execute DBMS_SCHEDULER.disable (name => 'GATHER_STATS_PROG',force => TRUE); execute DBMS_SCHEDULER.disable (name => 'AUTO_SPACE_ADVISOR_PROG',force => TRUE);execute dbms_scheduler.disable(name =>'GATHER_STATS_JOB',force => TRUE); execute dbms_scheduler.disable(name =>'BSLN_MAINTAIN_STATS_JOB',force => TRUE); execute DBMS_SCHEDULER.disable(name => 'SYS.MAINTENANCE_WINDOW_GROUP', force => TRUE);execute DBMS_SCHEDULER.disable(name => 'SYS.ORA$AT_WGRP_SA', force => TRUE);execute DBMS_SCHEDULER.disable(name => 'SYS.ORA$AT_WGRP_SQ', force => TRUE); execute DBMS_SCHEDULER.disable(name => 'SYS.ORA$AT_WGRP_OS', force => TRUE); EXECUTE DBMS_SCHEDULER.disable (name =>'SYS.MONDAY_WINDOW', force => TRUE);EXECUTE DBMS_SCHEDULER.disable (name =>'SYS.TUESDAY_WINDOW', force => TRUE); EXECUTE DBMS_SCHEDULER.disable (name =>'SYS.WEDNESDAY_WINDOW', force => TRUE); EXECUTE DBMS_SCHEDULER.disable (name =>'SYS.THURSDAY_WINDOW', force => TRUE);EXECUTE DBMS_SCHEDULER.disable (name =>'SYS.FRIDAY_WINDOW', force => TRUE); EXECUTE DBMS_SCHEDULER.disable (name =>'SYS.SATURDAY_WINDOW', force => TRUE); EXECUTE DBMS_SCHEDULER.disable (name =>'SYS.SUNDAY_WINDOW', force => TRUE);EXECUTE DBMS_SCHEDULER.disable (name =>'SYS.WEEKNIGHT_WINDOW', force => TRUE); EXECUTE DBMS_SCHEDULER.disable (name =>'SYS.WEEKEND_WINDOW', force => TRUE); Changing Database Ports If Oracle is installed on the Prime Network gateway, the Oracle services will be installed on port 2100. If an Oracle listener was installed on port 2100, you must disable it or change the port number. By default, this port is used by the Oracle XML DB service. Note You must change the FTP port number if an Oracle listener was installed by default on port 2100. Use this procedure to change the port numbers of th e XML DB listeners, if required. This procedure applies only if you installed the Oracle XML DB serv ice. If you disabled the Oracle XML DB service, skip this section. Step 1 To log into Oracle SQL, enter:
4-9Cisco Prime Network 5.3 Installation Guide Preparing the Oracle External Database Configuring the External Database sqlplus user/password Step 2 To change the HTTP port from 8080 to 8083, enter: sql> call dbms_xdb.cfg_update(updateXML(dbms_xdb.cfg_get(), '/xdbconfig/sysconfig/protocolconfig/httpconfig/http-port/text()', 8083)); Step 3 To change the FTP port from 2100 to 2111, enter: sql> call dbms_xdb.cfg_update(updateXML(dbms_xdb.cfg_get(), '/xdbconfig/sysconfig/protocolconfig/ftpconfig/ftp-port/text()', 2111)); Step 4 To commit the update, enter: sql> COMMIT; Step 5 To refresh the settings, enter: sql> exec dbms_xdb.cfg_refresh Step 6 To exit SQL Comma nd Line, enter: sql> exit Configuring the Database Size and Disk Structure The size of the stored data is determined mainly by the number of stored events. By default, Prime Network is configured to ar chive events for up to 14 days. Th e archive size, the supported event rates, and the average event size di ctate the expected database growth on a daily basis. Events that are archived for a long time cause a si gnificant load on the database and require additional disk space. You can change the default archive period using the Administration GUI, if necessary (see the Cisco Prime Network 5.3 Administrator Guide ). Contact your Cisco acc ount representative for assistance with si zing calculations. Recommended Disk Structure Following is the recommended disk st ructure for an Oracle server based on the number of disks that the server holds: 
- Oracle data files—The optimal location is an external disk array (preferably RAID 10). 
- Online redo log files—The optimal location is an internal disk partition. The redo log files should not reside on the same disk as the data files. 
- Archive files—Should not reside on the same disk as the data files. 
- Backup files—Should not reside on the same disk as the data files. Configuring Oracle to Start Automatically When Prime Network Restarts By default, the Oracle application does not start automatically when Prime Network is rebooted. This is because the best practice is for the system database administrator to manually start the database in a controlled environment. However, if you want Oracle to start when the system is rebooted, there are multiple ways to accomplish this task. The following is one example; see the Oracle documentation for other implementations.
4-10Cisco Prime Network 5.3 Installation Guide Preparing the Oracle External Database Configuring the External Database As the Oracle UNIX root user, create a file in the /etc/rc2.d directory named S99O racleDB, with the following contents: ORA_OWNER=oracle DBLOG=$INSTALL_DIR/log/dbop.log TZ=GMT if [ -f /var/opt/oracle/oratab ]; then orahome=`grep -v "^#" /var/opt/oracle/oratab | grep. | sed -ne '1p' | awk -F: '{print $2}'` else echo "/var/opt/oracle/oratab file doesn't exist. Please check if Oracle is installed " >> $DBLOG echo "dbora $1 aborted...." >> $DBLOGexit fi ORA_HOME=$orahomeTNS_ADMIN=$ORA_HOME/network/admin if [ ! -f $ORA_HOME/bin/dbstart -o ! -d $ORA_HOME ] thenecho "Oracle startup cannot start" exit fi if [ ! -d $INSTALL_DIR/log ]; then mkdir $INSTALL_DIR/logchmod 777 $INSTALL_DIR/log fi if [ ! -f $DBLOG ]; then touch $DBLOG fi #start the Oracle databases echo "Invoking dbstart at `date` " >> $DBLOG echo >> $DBLOG su - $ORA_OWNER -c $ORA_HOME/bin/dbstartecho "Invoking Listener start at `date`" >> $DBLOG echo >> $DBLOG su - $ORA_OWNER -c "lsnrctl start"echo "Listener started." >> $DBLOG echo >> $DBLOG Preventing Passwords in the Default Profile from Expiring When you create a database, passwords of users that belong to the default profile expire after 180 days. Because Prime Network database users receive the defa ult profile, their database password will expire after 180 days. To prevent this from occurring, complete the following steps: Step 1 Log into the Oracle SQL as the sysdba. Step 2 Enter: alter profile default limit PASSWORD_LIFE_TIME unlimited; 4-11Cisco Prime Network 5.3 Installation Guide Preparing the Oracle External Database Maintaining the External Database Maintaining the External Database After installation, maintaining the database can involve: 
- Maintaining Archive Log File Disk Space —Ensure that there is sufficient space on a disk to store a large volume of archive logs caused by the large number of Cisco Prime Network updates to the database. 
- Adding Data Files to the Tablespace —Add data files to enable the st orage of event history logs for a longer period of time. Note Refer to your Oracle documentation for instructions on how to back up the Oracle database. Maintaining Archive Log File Disk Space The large number of Prime Network updates to the data base causes the size of th e archive log to expand rapidly and consume a large amount of space on th e disk partition. To maintain space on the disk partition, an Oracle database administrator shou ld delete the archive log files periodically. Adding Data Files to the Tablespace After you install Prime Network and its database, you might need to add more data files, depending on the event rate per second. Here is an example showin g how to add a data file to the existing tablespace: alter tablespace tablespace-name add datafile 'new-data-file-full-path' size 32G autoextend off; where tablespace-name is pnuser _TABLESPACE, dwe_TABLESPACE. The size can be changed and is subject to actual needs and availability. Note With the exception of pnuser and pnuser _admin, Prime Network tablespace data files are generated in 1 GB sizes with autoextend set to 256 MB and no size limit. (The data file can grow to 32 GB.) It is recommended that you preallocate the database storage by creating all required data files to their full sizes in advance.
4-12Cisco Prime Network 5.3 Installation Guide Preparing the Oracle External Database Maintaining the External Database

CHAPTER 5-1Cisco Prime Network 5.3 Installation Guide 5 Installing the Prime Network Gateway and Units Using the Installation Wizard This chapter describes how to install the gateway a nd units using the GUI installation wizard, which is an alternative (and preferred) installation method to the CLI installation. The following topics are co vered in this section: 
- Prerequisites for Using the Installation Wizard, page 5-1 
- Launching the Installation Wizard, page 5-1 
- Installing the Gateway with Embedded Databa se Using the Installation Wizard, page 5-3 
- Installing the Gateway with External Databa se Using the Installation Wizard, page 5-7 
- Installing a Unit Using the Installation Wizard, page 5-10 The installation wizard does not include installation of Operations Reports and the Prime Network Integration Layer. Prerequisites for Using the Installation Wizard Before you begin, verify that the following prerequisites are met: 
- An X client application, such as Xming, is installed on the local machine on which you plan to launch the wizard. 
- A Telnet/SSH client, such as PuTTY, is installed on the local machine on which you plan to launch the wizard, and X11 forwarding is enabled. 
- All preinstallation tasks for the gateway and unit are completed. See Preparing for the Installation. - The database files (linuxx64_12201_ database.zip) are available in Cisco Prime Network 5.3 Disk 4. 
- Prime Network 5.3 fresh installation will support only Oracle 12.2.0.1. Launching the Installation Wizard To launch the installation wizard: Step 1 Launch the X client applicat ion (for example, Xming).
5-2Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway and Units Using the Installation Wizard Launching the Installation Wizard Step 2 As the root user, launch a termin al on the server where you want to install the Prime Network gateway. Step 3 Insert Disk 1: New Install in the DVD drive. (See Installation DVDs, page 1-2 ). Step 4 Mount the inserted DVD using the mount command, and move to the mount directory. Step 5 In the mount directory, locate the install.bin file and run it: ./install.bin This launches the installation wizard. Step 6 Read the introduction and click Next. In the Installation Type window, you can choose the relevant installation: 
- Prime Network gateway with an embedded database. See Installing the Gateway with Embedded Database Using the Installation Wizard, page 5-3. - Prime Network gateway with an external database. See Installing the Gateway with External Database Using the Installation Wizard, page 5-7. - Unit. See Installing a Unit Using the Installation Wizard, page 5-10 
5-3Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway and Units Using the Installation Wizard Installing the Gateway with Embedded Database Using the Installation Wizard Installing the Gateway with Embedded Database Using the Installation Wizard The following procedure describes how to install a Prime Network gateway and an embedded database using the GUI installation wizard. Step 1 Launch the installation wizard using the install.bin file on Disk 1: New Install. See Launching the Installation Wizard, page 5-1. Step 2 Read the introduction and click Next. Step 3 In the Installation Type window, select Express - Install Prime Network with Embedded Oracle Database and click Next. Step 4 In the next four windows, provide the required user and installation folder information, as follows: Step 5 Click Next. Step 6 Check the Prerequisites Summa ry window for items that are not marked [OK] and rectify them as needed (for example, add more disk space). Click Next. Field Enter: Notes Operating System User Name Window New Operating System userA username for the Prime Network operating system. This username will be used when connecting to the gateway using SSH and for other administrative purposes.This username is used as the basis for the installation directory and the database schema names. We recommend you to use pn52. In the documentation, use pnuser to represent the operating system user variable. Password A password for the Prime Network operating system user.— Prime Network User Window Password A password for the Prime Network root user.The root username and password are used to log into the Prime Network GUI applications. Enter a password that complies with the password requirements listed in the text box at the top of the screen. Operating System “r oot” Password Window Password A password for the operating system root user.— Installation Folder Window Please choose a folder Select an installation folder or use the default folder.The default installation directory is /export/home/OS-User. We recommend you to use the default directory. In the documentation, use $PRIME_NETWORK_HOME to represent the installation directory. 
5-4Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway and Units Using the Installation Wizard Installing the Gateway with Embedded Database Using the Installation Wizard Step 7 In the Gateway Installation Embedded Oracle Databa se window, enter the gateway IP address to be used for communication with the units, if it is different from the IP address that was automatically identified by the system. Step 8 Select Suite-Integrated (if you are using Prime Network with Prime Central), or Standalone. Note For suite-integrated systems, Prime Network Integration La yer must be installed. See , “Installing the Prime Network Integration Layer”. Step 9 Provide the following information in the Embedded Database windows. Embedded Database Field Enter: Notes Embedded Database Window (1) Database username Username for the Oracle database user, if you do not want to use the default username.Default is oracle. Database Server IP AddressIP address of the database server (IPv4 or IPv6). The database server could be the gateway or a remote server.Default is the IP address of the gateway. Choose a database profileSelect the database profile that represents your setup.See Creating an External Oracle Database, page 4-2 for guidelines (the information also applies to embedded databases). Prime Network calculates memory and storage requirements based on this entry. Would you like to enable database auto-backup?[yes | no] If you enter No, you can enable automatic backups later using the emdbctl command. See the Cisco Prime Network 5.3 Administrator Guide. Embedded Database Window (2) Database Zip Files PathPath to the directory in which the database zip files are located.Default is /. These files must be copi ed from Disk 4 of the Prime Network 5.3 installation DVDs. Database Home DirectoryPath to the database home directory.Default is /export/home/oracle. Must have a minimum of 9GB of disk space for oracle binaries Should not reside under the installation directory ($ PRIME_NETWORK_HOME). Database Data Files PathPath to the directory containing the datafiles (oracle-datafiles-dir)Default is /export/home/oracle/oradata/anadb. Redo Logs File Path Path to the directory containing the redo files.Should not reside on the same disk as oracle-datafiles-dir. Use ext3 partition mounted with the default mount options.
5-5Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway and Units Using the Installation Wizard Installing the Gateway with Embedded Database Using the Installation Wizard Step 10 If you selected Suite-Integrated, you will be requir ed to enter information enabling communication with Prime Central, including the Prime Central database server IP address, database port, database SID, database username and password. Click Next. Step 11 In the Operations Reports Database (Infobright) windows, enter the informat ion that will enable connection to the server on which the Infobright database is located and the folders for the Infobright data, then click Next .Archive Logs Files PathPath to the directory containing the archive log files.Should not reside on the same disk as oracle-datafiles-dir. Backup Data Files PathPath to the directory containing the backup data files.Should not reside on the same disk as oracle-datafiles-dir. Field Enter: Notes Operations Reports Database (Infobright) Window Infobright Database Server IP Address Root user password for SSH connection Infobright database server port Archive history sizeBackup history sizeWould you like to enable backup files creation? Operations Reports Database (Infobright) Folders Window Path to folder for Infobright database data Path to folder for Infobright database cache data Path to folder for Infobright database backup data Path to folder for Infobright DLP staging areaEmbedded Database Field Enter: Notes
5-6Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway and Units Using the Installation Wizard Installing the Gateway with Embedded Database Using the Installation Wizard Note Operations Reports are only available to customers with Operations Reports license prior to May 2018. For re-installation of Operations Reports cont act a Cisco customer support representative. Step 12 In the Installation Setup Summary win dow, review and verify the information. Step 13 Click Install. The installation procedure will take between 20-50 minutes to complete. Step 14 When the installation is complete, you will receive a message indicating this. If the installation fails, you will receive a message with details about the failure. The following logs are availa ble after the installation: 
- Installation logs—/var/adm/cisco/prime-network/logs/. 
- Embedded database configuration logs—$ PRIME_NETWORK_HOME /local/scripts/embedded_oracle. 
- Prime Network configuration logs—$ PRIME_NETWORK_HOME /Main/logs. Note Before launching Prime Network in the Windows 2008 server from Prime central, ensure that the host file is updated with correct host IP address to resolve the hostname.If hostname is not configured properly, then the Prime Network installation fails.
5-7Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway and Units Using the Installation Wizard Installing the Gateway with External Database Using the Installation Wizard Installing the Gateway with External Database Using the Installation Wizard The following procedure describes how to use the GUI installation wizard to install a Prime Network gateway that is connected to an external database. Step 1 Launch the installation wizard using the install.bin file on Disk 1: New Install. See Launching the Installation Wizard, page 5-1. Step 2 Read the introduction and click Next. Step 3 In the Installation Type window, select Custom: Install Prime Network with External Oracle Database and click Next. Step 4 Provide the required user and installation folder information. Step 5 Click Next. Step 6 Check the Prerequisites Summary window to see if any items do not say [OK] and rectify them as needed (for example, add more disk space). Once verified, click Next. Field Enter: Notes Operating System Username Window New Operating System UserA username for the Prime Network operating system. This username will be used when connecting to the gateway using SSH and for other administrative purposes.This username is used as the basis for the installation directory and the database schema names. We recommend you use pn52. In the documentation, we use pnuser to represent the operating system user variable. Password A password for the Prime Network operating system user.— Prime Network User Window Password A password for the Prime Network root user.The root username and password are used to log into the Prime Network GUI applications. Enter a password that complies with the password requirements listed in the text box at the top of the screen. Operating System “r oot” Password Window Password A password for the operating system root user.— Installation Folder Window Please choose a folder pn-installation-dir The default installation directory is /export/home/ OS-User. We recommend you use the default directory. This default home directory is referred to as $PRIME_NETWORK_HOME.
5-8Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway and Units Using the Installation Wizard Installing the Gateway with External Database Using the Installation Wizard Step 7 In the Gateway Installation window, enter the gatewa y IP address to be used for communication with the units, if it is different from the IP address th at was automatically iden tified by the system. Step 8 Select Suite-Integrated (if you are using Prime Network with Prime Central), or Standalone. Note For suite-integrated systems, Prime Network Integration La yer must be installed. See , “Installing the Prime Network Integration Layer.” Step 9 Provide the following information in the External Database window. Step 10 If you specified that your database needs encryption, you are prompted for an encryption method and algorithm: 
- Encryption Method—Accepted, Requested, or Required (default is Required). 
- Encryption Algorithm—Choose from the drop-down list. Step 11 If you specified that you did not want Prime Network to create the da tabase users, the External Database User Configuration window opens.External Database Field Enter: Notes Database Server IP AddressIP address of the database server.— Database Port oracle-listener-port Default port is 1521. SID oracle-SID — Database Administrator User Nameoracle-admin-user Database user who can perform administrative tasks. Database Administrator Passwordoracle-admin-password — Database Data Files Path oracle-datafiles-dir — Does your database require an encrypted connection? [yes | no] If you answer yes, you will be prompted for encryption method and algorithm after clicking Next. Do you want Prime Network to create the users? [yes | no] If you answer yes, Prime Network will create the database users with default usernames. External Database User Configuration Field Enter Notes Database schema “main” Usernamename, e.g., PN53 Database schema “dwe” Usernamename _dwe e.g., PN5.3_dwe Database Administrator Usernamename _admin Name for admin database schema Database Reports main usernamename _rep Name for reports database schema
5-9Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway and Units Using the Installation Wizard Installing the Gateway with External Database Using the Installation Wizard Step 12 If you selected Suite-Integrated, you will be requir ed to enter information enabling communication with Prime Central, including the Prime Central database server IP address, database port, database SID, database username and password. Step 13 In the Operations Reports Database (Infobright) windows, enter the informat ion that will enable connection to the server on which the Infobright database is located and the folders for the Infobright data, then click Next. Database schemes passwordspassword Password used for all schemas except the Event Archive Database EP schema usernamename _ep Name for Event Archive database schema Database EP Reports usernamename _ep_rep Name for older reports database schema Database EP Schema Passwordep-password Password for Event Archive schema Field Enter: Notes Operations Reports Database (Infobright) Window Infobright Database Server IP Address Root user password for SSH connection Infobright database server port Archive history sizeBackup history sizeWould you like to enable backup files creation? Estimate your database profileSelect the database profile that represents your setup.See Creating an External Oracle Database, page 4-2 for guidelines. Operations Reports Database (Infobright) Folders Window Path to folder for Infobright database data Path to folder for Infobright database cache data Path to folder for Infobright database backup data Path to folder for Infobright DLP staging areaExternal Database User Configuration Field Enter Notes
5-10Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway and Units Using the Installation Wizard Installing a Unit Using the Installation Wizard Note Operations Reports are only available to customers with Operations Reports license prior to May 2018. For re-installation of Operations Reports cont act a Cisco customer support representative. Step 14 In the Installation Setup Summary win dow, review and verify the information. Step 15 Click Install. The installation procedure will take between 20-50 minutes to complete. Step 16 When the installation is complete, you will receive a message indicating this. If the installation fails, you will receive a message with details about the failure. The following logs are available: 
- Installation logs—/var/adm/cisco/prime-network/logs/. 
- Configuration logs— $PRIME_NETWORK_HOME /Main/logs. Installing a Unit Using the Installation Wizard The following procedure describes how to install an additional unit using the GUI installation wizard. Note Ensure that the OS version of unit and gateway is same while adding the unit to the gateway. Note Before starting the unit installation, ensure that th e gateway to which the unit will be connected is up and running. Step 1 Launch the installation wizard using the install.bin file on Disk 1: New Install. See Launching the Installation Wizard, page 5-1. Step 2 Read the introduction and click Next. Step 3 In the Installation Type window, select Add Unit and click Next. Step 4 Provide the required user and installation folder information. Field Enter: Notes Set OS User Window Operating System User NameThe same operating system username as is configured for the gateway.— Password OS-User-password — Prime Network Administrator User Window Prime Network Administrator User Nameadmin-username User name of the administrator user for access to the various Prime Network applications. Password admin-password This is the password for the Prime Network admin user, which is used to log into the Prime Network applications.
5-11Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway and Units Using the Installation Wizard Installing a Unit Usin g the Installation Wizard Step 5 Check the Prerequisites Summary window to see if any items do not say [OK] and rectify them as needed (for example, add more disk space). Once verified, click Next. Step 6 In the Unit Installation window, enter the following: Step 7 In the Pre-installation Summary window, verify the information. Step 8 Click Install to start the Unit installation. Step 9 When the installation is complete, click Done. The following logs are available: 
- Installation logs—/var/adm/cisco/prime-network/logs/. 
- Configuration logs—$ PRIME_NETWORK_HOME /Main/logs.Installation Folder Window Please choose a folder The path to the installation directory.This should be the same installation folder as was specified for the gateway. Unit Installation Field Enter: Notes Gateway IP Address The gateway IP address to be used for communication with the units.Make sure the gateway is up and running before proceeding. Prime Network User OS Password on GatewayOS-User-password — Unit IP Address unit-ip-address — Mode [Active Unit | Standby Unit] Active units are started after they are added; standby units start when a failover occurs. Unit Protection [Enable | Disable] Enable or disable unit high availability protection. Unit Name unit-name — Unit Protection Group unit-protection-group The protection group to which the unit belongs. Main Schema Database IP Address (optional)FaultDatabase-ip-address Providing this information protects against incompatible gateway and database interface types.Field Enter: Notes
5-12Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway and Units Using the Installation Wizard Installing a Unit Using the Installation Wizard

CHAPTER 6-1Cisco Prime Network 5.3 Installation Guide 6 Installing the Prime Network Gateway Using CLI This chapter explains how to install the Prime N etwork gateway and Operations Reports using CLI commands. If you want to use the installation wizard, see , “Installing the Prime Network Gateway and Units Using the Installation Wizard”. The following topics are covered in this chapter: 
- Installation Overview, page 6-1 
- Installing the Prime Network Gateway With an Embedded Database, page 6-2 
- Installing the Prime Network Gateway With an External Database, page 6-6 
- Post Installation Tasks For the Gateway, page 6-13 
- Environment Variables, Aliases, and Folders Created During Installation, page 6-21 
- Product Services Installed with Prime Network, page 6-23 
- Troubleshooting, page 6-24 Installation Overview The Prime Network gateway can be inst alled using either an embedded da tabase or an external database. For the embedded database, Prime Network 5.3 uses a fu lly-integrated Oracle 12 c database that allows Prime Network to manage and monitor data. This Or acle database version is also supported for the external database. Note All Prime Network 5.3 fresh installation will support only Oracle 12.2.0.1. The Prime Network installation script ( install.pl) automatically performs the following: 
- Checks some system prerequisites, such as required disk space 
- Backs up and removes older versions of Prime Network software (if any exist) 
- Creates the Prime Network user pnuser, which is the operating system user for the Prime Network application. 
- Copies all required files from the installation DVD to the server under the Prime Network user home directory (/export/home/ pnuser by default), also called $ PRIME_NETWORK_HOME. - Extracts and creates the required directories. For information on folders created after installation, see Environment Variables, Aliases, and Folders Created During Installation, page 6-21. - Installs the Prime Network software
6-2Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway Using CLI Installing the Prime Network Ga teway With an Embedded Database 
- Configures the Prime Network registry 
- Sets the Prime Network environment va riables and aliases (.cshrc file) Installing the Prime Network Gateway With an Embedded Database Before You Begin 
- Verify that all preinstallation tasks have been completed. See Gateway Preinstallation Tasks—Embedded Database, page 3-1. - Its know issue that when enabled security hardening, the oper ation reports connects to PN-GW:8445 with TLSV11.0 because Operations Report does not support SSL To install the gateway with an embedded da tabase (on the same or separate server): Step 1 As the root user, launch a termin al on the server where you want to install the Prime Network gateway. Step 2 Insert Disk 1: New Install in the DVD drive. (See Installation DVDs, page 1-2 ). Step 3 Mount the inserted DVD using the mount command, and move to the mount directory. Step 4 In the mount directory, locate the install.pl script and move to its parent directory. Step 5 Start the installation with the install.pl script. (The installation procedure is automatic and requires no user input.) The -user flag creates the operating system user account for the Prime Network application, and the -dir option specifies the installation directory: perl install.pl -user pnuser [-dir directory ] Note pnuser must start with a letter and contain only the characters shown in brackets: [A-Z a-z 0-9]. It cannot contain a [.] character. For example, pn53 is permitted, but network 5.3 is not. For example, the following command creates a pnuser named pn53, and installs Prime Network in the /export/home/pn53 directory: perl install.pl -user pn53 -dir /export/home/pn53 Note The installation might take a while. You will be notified when the installation has completed successfully. Step 6 After the installation is complete, you will be prompted to configure Prime Network. Enter yes to continue with the config uration and proceed to Step 8, or enter no to configure Prime Network later using the network-conf command. Note If you choose to configure Prime Network at a later stage (not during the initial installation process), you must manually enable the network discovery functionality, as described in Enabling Network Discovery, page 12-3. Step 7 Copy the following Oracle installation .zip files from Prime Network 5.3, Disk 4: Database Binaries to the embedded_oracle directory ($ PRIME_NETWORK_HOME /local/scripts/embedded_oracle): 
6-3Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway Using CLI Installing the Prime Network Gateway With an Embedded Database 
- linuxx64_12201_database.zip Step 8 Select Set machine as Prime Network gateway, then press Enter. The Prime Network configuration utility configures the system by running a number of procedures, including generation of SSH keys. Note If you are notified that NTP is stopped or no t configured, restart or configure NTP and then proceed with the rest of the configuration. See Configuring the Network Timing Protocol, page 3-6. Step 9 Enter a password for all built-in users (root, bosenabl e, bosconfig, bosusermngr, web monitoring user). This password will be used to access the various Pr ime Network system components, and will also be used as the database schema password. The password must: 
- Contain at a minimum 9 characters. 
- Contain both upper and lower case letters. 
- Start with a letter. 
- Contain at least one number. 
- Contain at least one of the allowe d special characters: ~!#%^ (no othe r special characters to be used) 
- Not contain the username or the username in reverse. 
- Not contain cisco, cisco in reverse, or any variation. 
- Not repeat the same charact er three or more times. Step 10 When asked if Prime Network should install the database for you, select Yes. This is the embedded database option. Step 11 During the configuration, you will be requested to provide some information. Enter the required information at the prompts. The following table lists the prompts that appear at various stages of the configuration and their required settings.
6-4Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway Using CLI Installing the Prime Network Ga teway With an Embedded Database Table 6-1 Gateway Installation Prompts and Input Using Embedded Database Prompt for... Enter... Notes Database installation on a remote server.yes/no This guide assumes that the da tabase will be installed locally on the gateway server. If you want to install the embedded database on a remote server, enter yes. The next few prompts will ask you to enter the remote server details (IP a ddress, username and password to connect to the remote server, and OS root user password (if not provided earlier). Note If the IP address you enter is not the default one, the database installation software updates the hostname in the database listener’s files. Verify that /etc/hosts is updated with the correct IP address and hostname. If more than one hostname is attached to the selected IP address, the first hostname is used. Selecting a single interface for the database services. Note This prompt appears only if more than one interface is detected during the network-conf process.NIC to use for database connectionBecause Prime Network 5.3 supports dual NICs, the installation may detect that the server is configured with multiple NICs. Specify the NIC to use for the database connection. OS root user password Unix root password Prime Networ k uses the root password to set machine-level settings and to execute scripts. OS username — The username of the Unix database user. The default is oracle. OS user home directory Path to the Oracle user home directoryOS user home directory by default is /export/home/oracle. The directory must have a minim um of 6 GB of disk space for oracle binaries, and should not reside under Prime Network user home directory. Removing previous installation of Oracle.yes Default is yes. If you already have Oracle installed with the same user and home directory, enter yes to remove it before installing the new database. If you enter no, the installation will quit. Selecting Prime Network database profile.The number corresponding to the estimated profile.Select from 1-7 based on the actionable events per second. For more information on database profiles, see Creating an External Oracle Database, page 4-2. Database’s datafiles location Path to the directory containing the datafiles.Location of the database datafiles (/export/home/oracle/ora data/anadb by default). Redo logs location Path to the directory containing the redo files.Location of the redo logs. They should not be on the same disk as the data files. Example: /export/home/oracle/redo. Note Use ext3 partition mounted with the default mount options.
6-5Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway Using CLI Installing the Prime Network Gateway With an Embedded Database Prime Network to run automatic database backups?yes The default is yes. If you entered no at this prompt, you can enable automatic backups later with the emdbctl --enable_backup command. See the Cisco Prime Network 5. 3 Administrator Guide .for information on the emdbctl utility. Destination for archive lo gs Path to the directory containing the archive logs. Location of the archive logs. They should not reside on the same disk as the data files. Destination for backup files Path to the directory containing the backup files. Location of the backup files. They should not reside on the same disk as the data files. SMTP server IP/hostname Company e-mail server IP address or host name.Port 25 must be available. You must have SMTP server access from the gateway in order to receive e-mail notifications. If you enter an invalid server, you can change the SMTP server later using emdbctl -set_smtp_server as described in the Cisco Prime Network 5.3 Administrator Guide. Note Prime Network validates the SMTP server only on installations where the gateway and embedded database reside on the same server. Selecting a single interface for Prime Network backend services. Note This prompt appears only if more than one interface is detected during the network-conf process.The number corresponding with the IP address of the back-end interface to be used for gateway-to-unit communication.Because Prime Network 5.3 supports dual NICs, the installation may detect that the server is configured with multiple NICs. Specify the NIC to use for back-end services (such as transport, http, and so on) for gateway-to-unit communication. Dual NICs let you isolate the northbound interface from the back-end interface. Installing Prime Network as part of a Prime suite of products.no Default is no. If you enter yes, additional prompts on suite installation appears, as shown in Prime Suite Prompts, page 6-6. Note If you use Prime Network in suite mode, you must additionally install the Prime Network Integration Layer (PN-IL). Integration of Prime Network should have been done before installing the operations report. See Installing the Prime Network Integration Layer, page 9-1. Refer to the Cisco Prime Central Quick Start Guide to see how to integrate and configure the PN-IL in suite mode. Once the Prime Network is integrated to Prime Central, the Prime Network and the PN-IL status should be up in the Prime Central portal. E-mail ID for receiving alerts username@companyname.comE-mail address to receive notific ation when database errors occur. You can enter a single email address or a comma separated list of email addresses.Table 6-1 Gateway Installation Prompts and In put Using Embedded Database (continued) Prompt for... Enter... Notes
6-6Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway Using CLI Installing the Prime Network Gateway With an External Database After the installation is complete, the following logs are available: 
- Installation logs are available at /var/adm/cisco/prime-network/logs. 
- Configuration logs are available at $ PRIME_NETWORK_HOME /Main/logs. 
- Network Discovery logs are available at $PRIME_NETWORK_HOME /XMP_Platform/logs/existenceDiscovery.log Installing the Prime Network Gateway With an External Database This procedure describes installation of Prime Network gateway using an external database. Before installing the gateway make sure the external Oracle database is set up as described in Preparing the Oracle External Database, page 4-1. Disabling Low and Medium strength Ciphersyes/no Choose either one of the following option: 
- no —No change happens in Prime Network security configurations. 
- yes —Disables Low and Medium strength Ciphers. If you disable Low and Medium strength Ciphers, you must ensure that all network connections are using High Strength Ciphers before disabling. Note The standalone script updateciphers.pl and the install flows do not allow to set th e cipher strength to low and medium. The updateciphers.pl script only allows to configure the setting to High (not visa-versa) after the restart of services. Starting the Prime Network gateway at the end of the installation.yes Default is yes. If you enter no, you can start Prime Network later using the procedure in Starting the Prime Network Gateway, page 6-13. Prime Suite PromptsPrime Central database server IP addressIP Address After providing these inputs, Prime Network will be launched in suite mode. To integrate Prime Network with Prime Central, see Cisco Prime Central Quick Start Guide .Prime Central database SID primedb Prime Central databa se username username Prime Central database password passwordPrime Central database port port numberTable 6-1 Gateway Installation Prompts and In put Using Embedded Database (continued) Prompt for... Enter... Notes
6-7Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway Using CLI Installing the Prime Network Ga teway With an External Database Note Change and Configuration Management (CCM) does not support encrypted databases. CCM can be installed on a Prime Network gateway that uses an encrypted connection to the database, but the connection used by CCM will not be encrypted. Before You Begin Verify that all preinstallation tasks have been completed. See Gateway Preinstalla tion Tasks—External Database, page 3-3. To install the gateway with an external database: Step 1 (Optional) Obtain the Prime Network ISO image files from Download Software page on Cisco.com, and burn the ISO image files to DVDs. Note Perform this step only if you are downloading the Prime Network ISO image files from Cisco.com. Step 2 As the root user, launch a termin al on the server where you want to install Prime Network gateway. Step 3 Insert Disk 1: New Install in the DVD drive.(See Installation DVDs, page 1-2 ). Step 4 Mount the inserted DVD using the mount command, and move to the mount directory. Step 5 In the mount directory, locate the install.pl script and move to its parent directory. Step 6 Start the installation with the install.pl script. (The installation procedure is automatic and requires no user input.) The -user flag creates the operating system user account for the Prime Network application, and the -dir option specifies the installation directory: perl install.pl -user pnuser [-dir directory ] Note pnuser must start with a letter and contain only the characters shown in brackets: [A-Z a-z 0-9]. It cannot contain a [.] character. For example, pn53 is permitted, but network 5.3 is not. For example, the following command creates a pnuser named pn53, and installs Prime Network in the /opt/primenetwork51 directory: perl install.pl -user pn53 -dir /opt/primenetwork53 Note The installation might take a while. For information on the Cisco Prime Network environment created during installation, see Table 6-6. Step 7 After the installation is complete, you will be asked if you want to proceed directly to the configuration of Prime Network. Enter yes to continue with the configuration or enter no to configure Prime Network later using the network-conf command (as pnuser ). Note If you choose to configure Prime Network at a later stage (not during the initial installation process), you must manually enable the network di scovery functionality, as described in Enabling Network Discovery, page 12-3
6-8Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway Using CLI Installing the Prime Network Gateway With an External Database Step 8 Select Set machine as Prime Network gateway, then press Enter. The Prime Network configuration utility configures the system by running a number of procedures, including generation of SSH keys. Step 9 Enter the required inform ation at the prompts. Table 6-2 lists the prompts that appear at various stages of the configuration and their required settings. Table 6-2 Gateway with External Dat abase Installation Prompts and Input Prompt for... Enter... Notes Password for all built-in users (root, bosenable, bosconfig, bosusermngr, web monitoring user)The password that will be used to access the various Prime Network system components.The three login levels defined to connect to the Prime Network shell.This password will also be used as the database schemas password. You can change the password for each of these users at a later stage. See the Cisco Prime Network 5.3 Administrator Guide for changing the passwords. The password must: 
- Contain at a minimum 9 characters. 
- Contain both upper and lower case letters. 
- Start with a letter. 
- Contain at least one number. 
- Contain at least one of the allowed special characters: ~!#%^ (no other special characters to be used) 
- Not contain the username or the username in reverse. 
- Not contain cisco, cisco in reverse, or any variation. 
- Not repeat the same character three or more times. Prime Network to install the database? no After you enter no, the setup will configure the Prime Network default schema. You can manually create the database schemas, as described in Manually Creating Prime Network Database Schemas, page 6-11. Oracle server IP address/host name IP address/hostnameOracle admin username username Default is system.
6-9Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway Using CLI Installing the Prime Network Ga teway With an External Database Step 10 The installer then installs the Change and Configuration Management application as a part of the installation. Note The installation of Change and Configuration Management will abort if your Oracle account is locked during the installation process. You must unlock the account and then run the setup_xmp_nccm.cmd command to install the Change and Configuration Management components. Step 11 Enter the input for the remaining prompts as shown in the Table 6-3 .Oracle admin password password Passwor d for the database administrator. Allowing Prime Network to auto-configure the databaseyes If you enter yes, the pnuser database is configured automatically with the following default values: 
- Port 1521 
- SID: mcdb 
- No encryption 
- Prime Network-created users The pnuser _ep (Event Archive) schema uses the same settings. If you enter no, alternative database server is used to install EP schema. You need to provide the Port number, SID and whether you require an encrypted connection to the database server. If you select encrypted connection, enter the values as shown in Table 6-4. If you have manually created the database schemas, as described in Manually Creating Prime Network Database Schemas, page 6-11, you need to provide these schemas details.Table 6-2 Gateway with External Database Installation Prompts and Input (continued) Prompt for... Enter... Notes
6-10Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway Using CLI Installing the Prime Network Gateway With an External Database Table 6-3 Gateway Installation Prompts and Input Using External Database Prompt for... Enter... Notes Selecting a single interface for the database services. Note This prompt appears only if more than one interface is detected during the network-conf process.NIC to use for database connectionBecause Prime Network 5.3 supports dual NICs, the installation may detect that the server is configur ed with multiple NICs. Specify the NIC to use for the database connection. Installing Prime Network as part of a Prime suite of products.no Default is no. If you enter yes, additional prompts on suite installation appear, as shown in Prime Suite Prompts, page 6-6. Note If you use Prime Network in suite mode, you must install the Prime Network Integration Layer (PN-IL). See Installing the Prime Network Integration Layer, page 9-1. Refer to the Cisco Prime Central Quick Start Guide to see how to integrate and configure the PN-IL in suite mode. Starting Prime Network at the end of the installation.yes Default is yes. If your enter no, you can start Prime Network later using the procedure in Starting the Prime Network Gateway, page 6-13. Prime Suite PromptsPrime Central database server IP addressIP address These prompts appears if you decided to install Prime Network as part of the suite. Prime Central database SID primedbPrime Central database usernameusername Prime Central database passwordpassword Prime Central database port port number
6-11Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway Using CLI Installing the Prime Network Ga teway With an External Database Table 6-4 shows the parameters displayed for a remote database installation that uses an encrypted connection. After the installation is completed following logs are available: 
- Installation logs are available at /var/adm/cisco/prime-network/logs. 
- Configuration logs are available at $ PRIME_NETWORK_HOME /Main/logs. 
- Network Discovery logs are available at $PRIME_NETWORK_HOME /XMP_Platform/logs/existenceDiscovery.log Manually Creating Prime Network Database Schemas Note This topic applies only if you are using Prime Network with external database. Use the procedure in this section if you want to cr eate database schemas manually. You can choose any name for the schema. By default, Prime Network uses pnuser to name the schemas. In the following table, pnuser is Table 6-4 Parameters For An Encrypted Connection Prompt for... Enter... Notes Oracle’s listener port port-number Default is 1521 Oracle’s SID SID Prime Central Database SIDEncrypted connection for database yes Default is yes. Type of encryption method Enter option (1-3) Number corresponding to the encryption method you would like to use. Type of encryption algorithm Enter option (1-9) Number corresponding to the encryption algorithm you would like to use. Schema Name Description Example pnuser Fault Database—Active and archived network and non-network events and tickets ( archived events and tickets are events and tickets that were moved to an archive partition in the Fault Database)pn53 pnuser _ep Event Archive—Raw traps and syslogs received from devicespn53_ep pnuser_ rep Used by reports mechanism pn53_rep pnuser_ ep_rep pn53_ep_rep
6-12Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway Using CLI Installing the Prime Network Gateway With an External Database To manually create database schemas: Step 1 Log into the database as the system user. Step 2 Enter the following commands to create the databa se schemas. You can choose any name for the usernames and filenames. The password must be identical for the schemas. 
- For pnuser, pnuser _dwe, pnuser _ep, pnuser _xmp, execute the following command: create tablespace user datafile ' file-location/user .dbf' size 1024M autoextend on next 256M; create temporary tablespace user_temp tempfile 'file-location/user_temp.dbf' size 100m autoextend on next 5m maxsize 5000m;create user user identified by " default-password " default tablespace user temporary tablespace user_temp; grant connect to user; grant resource to user; grant SELECT_CATALOG_ROLE to user; 
- For pnuser _rep and pnuser _ep_rep, execute th e following command: create user user identified by "default-password " default tablespace pnuser temporary tablespace pnuser_temp; grant connect to user; grant resource to user; grant SELECT_CATALOG_ROLE to user; grant CREATE SYNONYM to user; 
- For pnuser _admin create tablespace user datafile ' file-location/user .dbf' size 100M autoextend on next 100M maxsize 500m; create user user identified by " default-password " default tablespace user temporary tablespace pnuser_temp profile default; GRANT RESOURCE TO user; GRANT DBA TO user; GRANT CONNECT TO user; GRANT SELECT ANY DICTIONARY TO user; GRANT ANALYZE ANY TO user; GRANT SELECT ANY TABLE TO user; GRANT EXECUTE ON DBMS_LOCK TO user WITH GRANT OPTION; GRANT ALTER SYSTEM TO user; ALTER USER user QUOTA UNLIMITED ON user; Enabling the pnuser_admin user to run maintenance tasks on other schemas To enable the pnuser_admin user to run maintenance tasks, such as gathering statistics, on the other Prime Network database schemas, complete the following steps:pnuser _xmp Change and Configuration Management (CCM), Compliance Manager, Compliance Audit, Command Manager, Transaction Managerpn53_xmp pnuser _admin Database administrator for maintenance tasks—such as gathering statistics—on the other Prime Network database schemaspn53_adminSchema Name Description Example
6-13Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway Using CLI Post Installation Tasks For the Gateway Step 1 As the Oracle UNIX user, use SQL*Plus to log into user sys as sysdba. Step 2 Enter one of the following commands: 
- If the pnuser _admin user does not exist, enter: SQL> grant execute on dbms_lock to system with grant option; 
- If the pnuser _admin user already exists, enter: SQL> grant execute on dbms_lock to pnuser_admin with grant option; Step 3 Verify that your database contains the temporar y TEMP tablespace, which is required by the new Prime Network admin database user. If this tables pace does not exist, create the TEMP tablespace. Post Installation Tasks For the Gateway After installing the gateway, pe rform these post-installation tasks. 
- Starting the Prime Network Gateway, page 6-13 
- Verifying Connectivity, page 6-15 
- Configuring Prime Network Post-Installation, page 6-15 
- Verifying the Redirected Ports, page 6-18 
- Verifying the Drools Rules Configuration, page 6-19 
- service iptables save, page 6-19 
- Verifying the Monitoring (Graphs) Configuration, page 6-19 
- Verifying the Installation of Registry Directories, page 6-19 
- Adding Oracle Database Files, page 6-20 
- Updating the Database Host in the Registry for NAT, page 6-21 Starting the Prime Network Gateway Step 1 As a Prime Network user, if you did not start the gateway at the end of the installation process, start it by entering the following command: networkctl start The gateway may require a few minutes to load. Note Prime Network 5.3 will automatically restart whenever the gateway server is restarted. If you want to disable this behavior (so that Prime Network has to be manually started after a gateway restart), see the Cisco Prime Network 5.3 Administrator Guide. Step 2 As a Prime Network user, check the status of all processes and daemons by entering the following command: status
6-14Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway Using CLI Post Installation Tasks For the Gateway The output lists all processes. For ea ch AVM process that is checked, the status command displays, in brackets, the number of exceptions found in the total number of log file lines for that process. For example, the information for A VM 0 is [OK 0/39]; that is, 0 exceptions in the 39 log file lines that were checked. The status command shows the version of the Prime Network installed and also veri fies that the gateway processes are up and running. The pro cesses are listed in the following table. Note Check the log files for each A VM if there are any problems. The log files are located under $PRIME_NETWORK_HOME /Main/logs. .AVM Number Process A VM 0 High Availability/Switch A VM 11 Gateway A VM 19 Auto-Add AV M 2 5 F a u l t A g e n tA VM 35 Service Discovery A VM 41 Compliance Manager A VM 44 Operations Reports A VM 76 Job scheduler A VM.A VM 77 Change and Configuration Management (CCM)A VM 78 VNE topology A VM 83 TFTP Server (CCM)A VM 84 Reports A VMA VM 99 Management A VMA VM 100 Event Collector — webserver daemon (client connection)— secured connectivity daemon
6-15Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway Using CLI Post Installation Tasks For the Gateway Verifying Connectivity Verify the connectivity between the components as follows: 
- Gateway and units— The gateway must have conn ectivity to all units. The gateway communicates frequently with the units to exchange information. Some unit-to-unit (VNE-to-VNE) communication may pass through the gateway. Th e units, managed devices, and gateway may not be located on separate networks. 
- Gateway and clients— IP connectivity is required between the clients and the gateway. The Events and Vision GUIs also require IP connectivity to the database. The Events GUI is the only client application that communicates directly with the database. Clients support automatic client updates from the gateway and, depending on the upgrade, the data can be up to 30 MB. 
- Units and NEs—Unit host VNEs and therefore re quire SNMP/Telnet connectivity to the network elements. 
- Gateway to Oracle database and unit to Oracle data base—Required if you are installing an external database. See Verifying the Connectivity to the Database, page 6-15. - Gateway and units to Infobright database server—R equired if you are installing Operations Reports. Verifying the Connectivity to the Database Note This section is applicable only if you are using Prime Network with external database. To confirm that your database is configured correctly: Step 1 As pnuser, connect to SQLPLUS by ente ring the following command: sqlplus username/'password '@'(DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL = TCP)(HOST = host)(PORT = port)))(CONNECT_DATA =(SID = sid)))' The password is the same as the root built-in password, host is the server where Oracle is installed, port is the listener’s port (default is 1521) and sid is the database’s name (default is mcdb). Step 2 Confirm that the SQL client can conn ect to the database. If you see the a prompt similar to the following, the connection was successful: SQL*Plus: Release 12.2.0.1.0 Production on Tue Jan 22 11:59:18 2019 Copyright (c) 1982, 2016, Oracle. All rights reserved. Connected to: Oracle Database 12c Enterprise Edition Release 12.2.0.1.0 - 64bit Production If the test fails, contact your local da tabase administrator and repeat the test. Configuring Prime Network Post-Installation The standard Prime Network installation process includes the configuration phase. However, you can choose to configure Prime Network at a later stage.
6-16Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway Using CLI Post Installation Tasks For the Gateway Note Do not rerun the network-conf script after A VMs or units are added. Rerunning the network-conf script could cause problems with the Prime Network registry. To access the Prime Ne twork configuration: Step 1 Make sure the database and listener are up, and as pnuser, enter the following command: network-conf Step 2 The first time you log in, you are prompted to change the default password. It is recommended that you do so. To change the defa ult user password, enter: passwd pnuser Step 3 Provide the necessary information at the prompts, as described in Installing the Prime Network Gateway With an Embedded Database, page 6-2 and Installing the Prime Network Gateway With an External Database, page 6-6. Note Root access is required to execute the scripts in the following two procedures: 1. Changing System Account of the Prime Network OS User Name or/and Database User Name 2. Changing a System Ac count in the Local HA Configuration Setup The script execution fails if the root access is blocked. Changing System Account of the Prime Netw ork OS User Name or/and Database User Name To change the Prime Network OS user or/and database user name from the gateway and unit, follow these steps. 1.Log in to the Prime Network server. Warning When you execute the ChangePrimeNetworkAndOracleUser.sh script the Prime Network application on both the gateway and unit will be down. 2.Run the following script as root user, $PRIME_NETWORK_HOME/local/scripts/ChangePrimeNetworkAndOracleUser.sh Log can be found at /tmp 3.Enter the user name to change either a Prime Network user na me or Oracle user name after Prime Network installation. Make sure to follow the below mentioned points: a.Prime Network user name must be same in Gateway and unit. b.If required, configure the devices with new Prime Network user name, which is similar to previous Prime Network user name, after the script execution is completed. If VNE's are configured with ftp protocol, the new prime network username should be updated in the device to work in CCM. Changing a System Account in the Local HA Configuration Setup To change the Prime Network OS user name, Databa se user name, or both Oracle and Prime Network OS user name: Step 1 Log in to the primary node that is configured at the time of installation.
6-17Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway Using CLI Post Installation Tasks For the Gateway Warning When you execute the ChangePrimeNetworkAndOra cleUserLocalHA.sh scri pt both the active and standby Prime Network application will be down. Step 2 As root user execute ChangePrimeNetworkAndOracleUserLocalHA.sh that is available under $PRIME_NETWORK_HOME/local/scripts. Note If your setup has unit added to it then execute the ChangePrimeNetworkAndO racleUser.sh script, which is available under $PRIMEHOME/local/scripts. Step 3 Use the following table values to change the Prim e Network OS username, Or acle Database username or both Oracle and Prime Network OS user name.. Table 6-5 Changing OS User Name, Da tabase User Name or Both Oracle and Prime Network OS User Name Action Prompt for... Enter... Notes To Change Prime Network OS User Name, select the Change Prime Network OS Username only optionSecondary Cluster node IP IP address of the secondary nodeThe Script displays the curent Prime Network user. Press Enter to continue or provide the prime network user name in case it is different Entering new user name New Prime Network user nameOn successful completion the script displays the following message Requested users has been changed and activated successfully. Unfreeze the services after the execution of the scriptTo Un-freeze the servi ces, use the following 
- clusvcadm -U <service-name> (RHEL 6.x) 
- pcs resource manage <service-name> (RHEL 7.x) To change Oracle database username, select the Change Oracle Database Username only optionSecondary Cluster node IPIP address of the secondary nodeThe script displays the current Oracle user. Press Enter to coninue or provide the Oracle user name in case it is different. Entering new Oracle Database user nameNew Oracle user nameOn successful completion the script displays the following message: Requested users has been changed and activated successfully.
6-18Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway Using CLI Post Installation Tasks For the Gateway Verifying the Redirected Ports Prime Network redirects some ports (161, 162, 514, 69) during the installation for receiving the traps and messages. Verify that these ports were redire cted by entering the fo llowing as the root user: iptables -L -t nat The result should contain the following rows: REDIRECT udp -- anywhere anywhere udp dpt:snmptrap redir ports 1161 REDIRECT udp -- anywhere anywhereudp dpt:snmptrap redir ports 1162 REDIRECT udp -- anywhere anywhereudp dpt:syslog redir ports 1514 REDIRECT udp -- anywhere anywhereudp dpt:tftp redir ports 1069 If not, enter the following:Unfreeze the services after the execution of the scriptTo Un-freeze the servi ces, use the following 
- clusvcadm -U <service-name> (RHEL 6.x) 
- pcs resource manage <service-name> (RHEL 7.x) To change both Oracle and Prime Network OS Username, select the Change both Prime Network OS Username & Oracle Database Username optionSecondary Cluster node IPIP address of the secondary nodeThe script displays the current Prime Network user. Press Enter to continue or provide the Prime Network user name in case it is different. Enter the new Prime Network user name New Prime Network user name The script displays th e current Oracle user name, Press Enter to continue or provide the Oracle Database user name in case it is different. Enter the new Oracle user name New Oracle user name On successful completion the script displays the following message: Requested users has been changed and activated successfully Unfreeze the services after the execution of the scriptTo Un-freeze the servi ces, use the following 
- clusvcadm -U <service-name> (RHEL 6.x) 
- pcs resource manage <service-name> (RHEL 7.x)Table 6-5 Changing OS User Name, Databas e User Name or Both Or acle and Prime Ne twork OS User Name (continued) Action Prompt for... Enter... Notes
6-19Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway Using CLI Post Installation Tasks For the Gateway iptables -t nat -A PREROUTING -p udp --dport 161 -j REDIRECT --to-port 1161 iptables -t nat -A PREROUTING -p udp --dport 162 -j REDIRECT --to-port 1162iptables -t nat -A PREROUTING -p udp --dport 514 -j REDIRECT --to-port 1514 iptables -t nat -A PREROUTING -p udp --dport 69 -j REDIRECT --to-port 1069 ip6tables -t mangle -A PREROUTING -p udp --dport 69 -j TPROXY --on-port 1069ip6tables -t mangle -A PREROUTING -p udp --dport 514 -j TPROXY --on-port 1514 ip6tables -t mangle -A PREROUTING -p udp --dport 161 -j TPROXY --on-port 1161 ip6tables -t mangle -A PREROUTING -p udp --dport 162 -j TPROXY --on-port 1162service iptables save Verifying the Drools Rules Configuration To confirm that the Drools rules file was created correctly, check the $ PRIME_NETWORK_HOME /Main/data directory and verify that the post.drl file exists. If it does not exist, rerun the installation. Verifying the Monitoring (Graphs) Configuration To confirm that the Monitoring (graphs) tool is working correctly: Step 1 Open a web browser on a client th at is connected to the gateway. Step 2 Enter the following URL to connect to the Cisco Prime Network graph: https:// gateway-IP-address :1311/graphs/ Note The username and password for the graphs were configured during installation. For changing the password for monitoring (graphs) tool, see Cisco Prime Network 5.3 Administrator Guide. Step 3 If you cannot log in, the tool may not be enabled. You can enable and disable the tool by logging in as pnuser and running webcontrol start or webcontrol stop. Verifying the Installation of Registry Directories To confirm that the registry dire ctories are installed on the gateway: Step 1 On the server, browse to the directory ~/Main/registry/ConfigurationFiles. Step 2 Verify that the directory contains the following subdirectories: 
- 127.0.0.1 
- 0.0.0.0 Step 3 Verify that the webserver daemon is up and running by executing networkctl status. 6-20Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway Using CLI Post Installation Tasks For the Gateway Adding Oracle Database Files Note This topic is applicable only if you are using Prime Network with embedded database. Use the add_emdb_storage.pl script (or add_emdb_storage.pl -ha for deployments with gateway high availability) to add database files according to the database size you estimate that you will need. For usage of add_emdb_storage.pl -ha script, see Cisco Prime Network 5.3 High Availability Guide. When using this script, you are prompted to provide the database profile, the es timated database capacity and the history size for events and workflows. This enables the script to calculate the maximum size of the database, and to create the data files, temp files, and redo logs. See Prime Network Gateway and Database Requirements, page 2-2 for information on database sizing. Before You Begin If you need assistance estimatin g the database size, contact your Cisco account representative. Step 1 Log into the gateway as pnuser. Step 2 Change directories to $ PRIME_NETWORK_HOME /Main/scripts/embedded_db and enter the following command: ./add_emdb_storage.pl Step 3 Enter the number corresponding to the estimated database profile that meets your requirement. Step 4 Enter the event and workflow archiving size in days. Note If you enter incorrect values—such as the wrong database profile estimate—you can rerun the script with different inputs. If you encounter any errors, messages simila r to the following examples are displayed. 
- If there is not enough disk space to create the additional database files or redo logs, enter another location. 
- If the files or redo logs cannot be created for any reason, you will see an error message and the following prompt: - How would you like to continue? --------------------------------- 1) Retry 2) Skip (move to the next in list) 3) Abort (1 - 3) [default 1] For example, if the correct permissions were not set, you would see the following. Failed to add datafile for pn53:-1119: ORA-01119: error in creating database file '/2del/pn53_DATA11.dbf' ORA-27040: file create error, unable to create file Linux-x86_64 Error: 13: Permission denied The menu choices provide with you with an opportunity to fix the permissions and retry creating the file or log.
6-21Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway Using CLI Environment Variables, Aliases, and Folders Created During Installation The log file is located in $ PRIME_NETWORK_HOME /Main/logs/emdb/add-storagetime-stamp .log. Updating the Database Host in the Registry for NAT If you are using NAT with the Events client, update the database host in the registry so it contains the hostname instead of the IP address. Complete the following steps after the gateway installation is complete and the system is up and running. Note If you already use a hostname instead of an IP addr ess, you do not have to repeat this procedure. Step 1 Verify that the Windows client workstations have the correct Domain Name System (DNS) mapping. Step 2 From ~/Main, enter the following commands: ./runRegTool.sh -gs 127.0.0.1 set 0.0.0.0 site/persistency/nodes/main/Host database-server-hostname ./runRegTool.sh -gs 127.0.0.1 set 0.0.0.0 site/persistency/nodes/ep/Host database-server-hostname Step 3 Enter the following command to restart the Prime Network system: networkctl restart Environment Variables, Aliases, and Folders Created During Installation The Prime Network installation script creates environment variables, folders, aliases, and services on the Prime Network gateway. Table 6-6 defines the pn-user environment variables defined by the installation script. Caution Do not change permissions on the PRIME_NETWORK_HOME directory. If the per missions are too lax, SSH communication problems can occur and the gateway might not start.Table 6-6 pn-user Environment Variables Defined by the Installation Script Variable Name Default PRIME_NETWORK_HOME Note At the command line, enter $PRIME_NETWORK_HOME for this variable. For compatibility with previous Cisco Active Network Abstraction releases, this variable was not changed./export/home/ pnuser JA VA_HOME PRIME_NETWORK_HOME /java NCCM_HOME PRIME_NETWORK_HOME /NCCMComponents XMP_HOME PRIME_NETWORK_HOME /XMP_Platform. 
6-22Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway Using CLI Environment Variables, Aliases, a nd Folders Created During Installation Table 6-7 lists the aliases defined by the installation script. Table 6-8 lists the folders created in Prime Network 5.3.Table 6-7 Aliases Defined by the Installation Script Table Alias Content reg Changes the directory to $PRIME_NETWORK_HOME /Main/registry main Changes the directory to $ PRIME_NETWORK_HOME /Main logs Changes the directory to $PRIME_NETWORK_HOME /Main/logs Table 6-8 Folders Created in Prime Network Folder Contents Folders in PRIME_NETWORK_HOME. Main/bosconfig Prime Network configura tion files (syntax of the commands, supported errors, and the connection configuration) Main/bosconfig/bos_shell_scripts User-created scriptsMain/data Drools configuration files and user-defined scripts.Main/logs Log output files ( AVM-ID .out; for example, 0.out or 11.out) Main/registry Local copy of registry filesMain/registry/ConfigurationFiles Golden source (master registry) configuration files in the Prime Network gateway Main/registry/templates Registry file templa tes used by the Prime Network gateway for global system changes local/scripts Scripts on the gateway and unitsMain/scripts Scripts on the gateway and unitsThird_Party Third-party filesMain/unix UNIX maintenance scripts and utilitiesMain/reportfw/rptdocument ReportsMain/drivers VNE driver filesprime_integrator Integrating Prime Network into Prime CentralNCCMComponents Configuration and Change Management (CCM) XMP_Platform Contains XMP platform components used by CCMpentaho Operations Reports
6-23Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway Using CLI Product Services Installed with Prime Network Product Services Installed with Prime Network Table 6-9 lists the product services that are installed with the Prime Network system. Table 6-9 Product Services Installed with Prime Network Name FunctionConfiguration InformationTCP or UDP Port NumberDynamic TCP or UDP Port RangesInterdependencies with Other Features, Services, and ApplicationsTraffic Classification avm[1-999] Main applicationMain/registry/Av m[NUM].xml8000+A VM number for secured XML RPC 2000+A VM number for local management2000-3000, 8000-9000 (TCP)Java, Perl, Tcsh Inner protocol sheer_secured daemon Secured connectivity between gateway and unitlocal/sheer_secur ed/sheer_config1101 (TCP) — — SSH webserver daemon Serves the client Web Start and the diagnostics tool with graphsutils/apache/conf / sheer.conf1311 (TCP) — — HTTP Machine interfaceBQL machineto-machine interface— 9002 (TCP) — Java — Secure machine interfaceSecured (SSL) BQL machine-tomachine interface— 9003 (TCP) — Java — Transport switchGateway/unit internal message bus.— 9390 (TCP) — Java — Client Applications TransportClient/gatewa y message bus. This PTP connection is secured by SSL.— 9771 (TCP) — Java —
6-24Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway Using CLI Troubleshooting Troubleshooting The following troubleshooting tips help you to solve common problems in Prime Network Installation. Problem/Message Solution/Action Required Problem Swap file entry error Solution Increase the swap file size in two ways: Enter the keyword “-override_swap” along with the installation command. For example. perl install.pl –user pn53 –override_swap dd if=/dev/zero of=/swapfile bs=1024 count=65536 (based on the requirement size, the bs & count entry will differ) mkswap /swapfile chmod 0600 /swapfileswapon /swapfile To enable it at boot time: Edit /etc/fstab to include the following entry: /swapfile swap swap defaults 0 0 Problem Error in deploying fetch_expect or RRDs or Embedded database (on RHEL 5.8) Solution Remove the “=” symbol from the following file: Cat /etc/profile.d/proxy.csh Problem Host file entry error Solution Check the host file for local host entry: Cat /etc/hosts 127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4 ::1 localhost localhost.localdomain localhost6 localhost6.localdomain6Local host IP hostname hostname.domainname For eg, if the hostname is pn-dev-u-008 and its ip add is 172.25.98.208, then the entry should be 127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4 ::1 localhost localhost.localdomain localhost6 localhost6.localdomain6 172.25.98.208 pn-dev-u-008 pn-dev-u-008.cisco.com
6-25Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway Using CLI Troubleshooting Problem SMTP TIME OUT Error (on both RHEL 5.8 & 6.5)This occurs when there is SMTP time out error. Solution 1.Get to the following file: /etc/opt/quest/vas/vas.conf 2.Edit the following entry: prompt-local-pw = From “This is your UNIX password: “ to “Password:” prompt-vas-ad-pw = From “This is your UNIX password: “ to “Password:” Problem COMPACT LSB error Solution While installing any RPM, update the LSB core with the following command: yum install redhat-lsb-core or yum update redhat-lsb-core Problem It is time consuming to install multiple RPMs individuallySolution To install Multiple RPM’s simultaneously: 1.Create a txt file and copy all the RPM names. 2.Enter the following command: yum install `awk '{print $1}' ./rpm.txt` -y where, “rpm.txt” is name of the text file that you created. During installation or upgrade you may encounter the following errors: Problem Unable to establish master SSH connection: master process exited unexpectedly at reader PrimeNetwork::DB::Oracle::_sshThis occurs when mast er process exited unex pectedly at reader PrimeNetwork::DB::Oracle::_ssh Solution Check whether the Openssh or Openssl got installed and updated. Solution Failed to backup the database with the following error ORA-27369: job of type EXECUTABLE failed with exit code: Operation not permitted ORA-06512: at "SYS.DBMS_ISCHED", line 198 ORA-06512: at "SYS.DBMS_SCHEDULER", line 594 ORA-06512: at line 1 (DBD ERROR: OCIStmtExecute). ABORTING. ***Solution Enable the backup and give proper permission to the folder for both backup and archive, which are under Oracle home folder.Problem/Message Solution/Action Required
6-26Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway Using CLI Troubleshooting Problem Error: Failed on creating inventory logical tablesThis occurs when there is a SQL syntax error. For example: check the log and get into that location to check the syntax. In this case, /export/home/pn43/Main/plugins/newalarm/deployment/infobr ightdeployment/inventory/logical Problem Failed to copy ssh keys from gateway erro r (during unit adding)Check the following: 
- proxy settings and file permissions of /$PRIME_NETWORK_HOME/lo cal/ana_secured and /$PRIME_NETWORK_HOME/ 
- RHEL version. If the RHEL version is 6.5, make sure the openssl rpm is updated (to 57 version). openssl-1.0.1e-57.el6.i686.rpm openssl-1.0.1e-57.el6.x86_64.rpm 
- Make sure that firewall is configured properly or in stopped state. Problem Prime Network failed to start with the following error: This unit (10.104.63.97) is not connected to 10.104.63.96 gateway anymore.Check if both Unit and GW got installed on the same directory path. For example, either in /export/home or /home. Problem Unable to launch the CCM applicationCheck for the following: 
- Web server should be up 
- Tomcat should be up 
- dmctl statusProblem/Message Solution/Action Required
6-27Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway Using CLI Troubleshooting Problem Receiving the following error entries: Unzipping p23054354_121010_Linux-x86-64.zip on the database server Stopping the database and listener /export/home/anaoracle/product/1 2.2.0/db_1/bin/dbshut: line 160: /export/home/oracle/product/12.1. 0 / d b _ 1 / s h u t d o w n. l o g: P e r m i s s i o n denied Installing p23054354_121010_Linux-x86-64.zip on the database server. This may take a while Starting the database and listener touch: cannot touch `/export/home/oracle/product/12.2.0/db_1/startup.log': Permission denied chmod: changing permissions of `/export/home/oracle/product/12.2.0/db_1/startup.log': Operation not permitted /export/home/anaoracle/product/1 2.2.0/db_1/bin/dbstart: line 346: /export/home/oracle/product/12.2. 0 / d b _ 1 / s t a r t u p. l o g: P e r m i s s i o n deniedThis occurs when there is no proper permission to ivne-drivers.tar file & oracle home folder. Solution Check the permissions of copied ivne-drivers.tar file and oracle home folder. Problem Unit AVM failed / unreachable to start the Prime Network after RollbackSolution Check if the hostname entry on /etc/hosts is appropriate. Problem Receiving errors during XMP platform and Web server installation process.Solution Make sure all the Required RPMs for Oracle Database 12c got installed. Ensure that two mandatory RPMS; libXext-1.1 (x86_64) and libXtst-1.0.99.2 (x86_64) are installed properly.Problem/Message Solution/Action Required
6-28Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway Using CLI Troubleshooting Problem The following ports are unreachable on the PN Gateway (ipadd): 6081, 9490, 1101”.while adding unit with gateway. (using either ipv4 or ipv6 address)Solution Make sure that: 
- Ports such as 6081, 9490, 1101 are in listening state. 
- iptables (for both ipv4 and ipv6) got turned off. 
- Selinux got disabled or in permissive mode. Problem Compliance engine status is downSolution Check the ComplianceService.log under: PRIME_NETWORK_HOME/XMP_Platform/logs and nccm.log under PRIME_NETWORK_HOME utils/independent/compliance/bin Solution Check the DB ip address entry in the following folder path: PRIME_NETWORK_HOME/utils/independent/compliance/resources /server/global/nccmDatabase.properties Problem Compliance Engine not starting: .Before upgrading to 5.3, take the backup file “nccmDatabase.properties” that is located in: PRIME_NETWORK_HOME/utils/independent/compliance/resources /server/global/nccmDatabase.properties Problem Could not open '/tmp/ana_db_properties.properties' for reading No such file or directorySolution Check the oracle 12c files permissions.Problem/Message Solution/Action Required
6-29Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway Using CLI Troubleshooting Problem Unit servers shows Virtual IP address during Network configuration. Figure 6-1 Unit ServersSolution This occurs when either gateway or Unit server is not installed on the same directory. For example:/export/home/pnuser. Make sure to install the Unit servers with the same directory path in which the Gateway is installed. Problem Receiving errors ending with number 256. Figure 6-2 Errors ending with 256 Solution This occurs when the oracle is not uninstalled properly.Problem/Message Solution/Action Required 
6-30Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Gateway Using CLI Troubleshooting

CHAPTER 7-1Cisco Prime Network 5.3 Installation Guide 7 Installing Prime Network Units This chapter covers the installation and po st installation tasks for Prime Network units. 
- Installing a Unit, page 7-1 
- Post Installation Task s For Units, page 7-4 Installing a Unit Complete the following steps to install the Prime Network unit and the tools that are required for unit functionality, including JDK_1.8.0_162 and Perl 5.16. Note Ensure that the OS version of unit and gateway is same while adding the unit to the gateway. Also, make sure that the home directory of the unit or the redund ant unit is the same as the home directory of the gateway. Step 1 Before starting with the installation, check the unit prerequisites in Prime Network Unit Requirements, page 2-10 and make sure you have completed all the unit preinstallation tasks in Unit Preinstallation Tasks, page 3-4. Step 2 Insert Disk 1: New Install in the DVD drive. (See Installation DVDs, page 1-2 .) Step 3 Open a Telnet or SSH session to the unit and log in as root. Step 4 Back up and remove the old version of the unit (if an older version exists). For backup procedures, see the Cisco Prime Network 5.3 Administrator Guide. Step 5 To change directories to the CD directory, enter: cd /cdrom/cdrom0/Server Step 6 To install the Cisco Prime Network unit, complete one of the following steps: a.For a new Prime Network 5.3 installa tion, enter the following command. perl install.pl -user pn53 -dir /export/home/pn53 -uninstall_previous_versions -override_swap -override_ports You must enter the same pnuser and directory path that you used when you installed the gateway. (If the gateway and unit have different username s and directory paths, the unit will not start.) For example, if the name of the us er is pn53, enter the above command.
7-2Cisco Prime Network 5.3 Installation Guide Installing Prime Network Units Installing a Unit The installation of the unit starts. Note This process might take a while. Step 7 After the installation is complete, you will be prompted to configure Prime Network. Enter yes to continue to Step 8 or no to continue to the next step and configure later using the network-conf command. (You can run network-conf by opening a Telnet or SSH to the unit, logging in as pnuser, and running network-conf .) Step 8 Select Set machine as Prime Network unit, then press Enter. The Prime Network configuration utility configures the system by running a number of procedures. Step 9 Enter the required information at the prompts. The following table lists the prompts that appears at various stages of the unit configuration and their required settings Table 7-1 Prompts A Unit Field Enter: Notes Checking NTP configuration on machine.yes Default is yes. Gateway IP address IP address of the gatewayMake sure the gatewa y is up and running before proceeding. OS root user password The Unix root password.Prime Network uses the root password to set machine-level settings and to execute scripts as “root”. Selecting a single interface for Prime Network backend services. Note This prompt appears only if more than one interface is detected during the network-conf process.The number corresponding with the IP address of the back-end interface to be used for gateway-to-unit communication.This prompt appears if more than one interface is detected during the network-conf. Proceeding with installation for unit behind NAT. Note This prompt appears if the unit does not have connectivity to the gateway.yes If the unit is connected to a gateway with IPv4 and IPv6 interfaces (dual stack), a second listener must be added to the unit. See Configuring Dual Listeners, page 7-3. Prime Network administrator username and passwordusername and passwordPrime Network internal admin user, used for secure communi cation with the gateway. Selecting the unit protection group nameChoose from the listed options.— Checking if the unit is a standby unit.no Default is no. Unique name for the unit Unit name —
7-3Cisco Prime Network 5.3 Installation Guide Installing Prime Network Units Installing a Unit Step 10 When configuring the unit, if the SSH keys are not retrieved automatically within 60 seconds, the following message is displayed: “Connection to gateway-IP-address failed. 60 seconds timeout exceeded.” To resolve this issue, verify that the unit can reach port 6081 on the gateway. Configuring Dual Listeners If the unit connects to a gateway with multiple interf aces (dual stack), the installer asks you to specify the interface that should be used. This happens wh en the gateway has multiple interfaces (dual stack) and the unit is installed with inte rface type that differs from the in terface on which the database is installed. For example, the gateway and database ar e installed on an IPv4 interface. The gateway also has an IPv6 interface, and the unit only has an IPv6 interface. To add the unit, the database must be configured with dual listeners and an interface that allows the unit to communicate with the database. For Embedded Database To add a listener to an Oracle embedded database installation: Step 1 As pnuser, log into the Prime Network gateway. Step 2 Change to the embedded database directory: cd Main/scripts/embedded_db Step 3 Run the following perl script: add_oracle_listener.pl Step 4 Answer the script's questions. Is the database installed on a remote server? (yes,no) If you enter yes, the following response appears: Provide the new IP Address to be supported by the listener. Enter the database IP address th at the new listener should use. If you enter no, the following response appears: The following network interfaces were detected on this host. Please select a single interface to be used by the new listener: Select the address to be added to the listener.Enabling unit protection. yes Default is yes. When this option is enabled, high availability is enabled on the unit. Entering the database interface accessible from the unit.Oracle listener IP This appears wh en the unit's IP version is different from the Oracle listener IP version.Table 7-1 Prompts A Unit Field Enter: Notes
7-4Cisco Prime Network 5.3 Installation Guide Installing Prime Network Units Post Installation Tasks For Units For External Database To add a listener to an Oracle external database installation: Step 1 As the Oracle user, log into the Oracle database. Step 2 Change to the Oracle home directory: cd $ORACLEHOME/network/admin Step 3 Add the new address to the listener.ora file. For example: LISTENER = (DESCRIPTION_LIST =(DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = 10.56.22.55)(PORT = 1521)) (ADDRESS = (PROTOCOL = TCP)(HOST = 2001:420:44ff:b8:221:28ff:fe04:bba7)(PORT = 1521))) ) ADR_BASE_LISTENER = /export/home/oracle Step 4 Stop and then start the listener by executing the following command: lsnrctl stop lsnrctl start Note In dual-stack gateway installation, redundant units must be of same IP type as the unit. In other words, an IPv4 redundant unit cannot replace an IPv6 unit. Post Installation Tasks For Units The following sections describe post installation tasks to verify the Prime Network unit installation: 
- Verifying the Prime Network Version and the Unit Processes, page 7-4 
- Verifying the Unit Configuration, page 7-5 Verifying the Prime Network Version and the Unit Processes The networkctl status command verifies that the following unit processes are up and running: 
- A VM 0—High availability/switch process 
- A VM 25—Event persistence 
- A VM 83—Internal use; used as a TFTP serv er by Change and Configuration Management 
- A VM 99—Management process 
- A VM 100—Prime Network Event Collector (AEC) process Note A VM 100 is disabled by default. To enable it, refer to the “Enabling a Single Event Collector on a Gateway or a Unit” section in the Cisco Prime Network 5.3 Administrator Guide. 7-5Cisco Prime Network 5.3 Installation Guide Installing Prime Network Units Post Installation Tasks For Units 
- secured connectivity daemon At this point in the installation, no A VMs have be en added. When you add A VMs and assign VNEs to them, they appear as A VM ID, where ID is the number assigned to the A VM. As a Prime Network user, to check the status of all processes and daemons, enter: networkctl status The output lists all processes. For ea ch AVM process that is checked, the status command displays, in brackets, the number of exceptions found in the total number of log file lines for that process. For example, the information for A VM 0 is [OK 0/45]; that is, 0 exceptions in the 45 log file lines that were checked: ----------------------------------------------------------------------------- .-= Welcome to server-name, running Prime Network unit (pn53 (build 347)) =-. ----------------------------------------------------------------------------- + Checking for services integrity: - Checking if host's time server is up and running [DOWN] - Checking if secured connectivity daemon is up and running [OK] + Detected AVM99 is up, checking AVMs - Checking for AVM103's status [OK 0/857] - Checking for AVM83's status [OK 0/45] -Checking for AVM101’s status [OK 0/857] -Checking for AVM0's status [OK 0/57] - Checking for AVM100's status [DISABLED] - Checking for AVM25's status [OK 0/35] Verifying the Unit Configuration Use this procedure to verify that the golden source registry was configured correctly on the unit. Step 1 On the server, locate and open the $ PRIME_NETWORK_HOME /Main/registry/avm99.xml file. Step 2 Confirm that the file cont ains an entry for the key parent, which is the value of the IP address of the gateway. If it does not contain the entry, rerun the installation. 
7-6Cisco Prime Network 5.3 Installation Guide Installing Prime Network Units Post Installation Tasks For Units

CHAPTER 8-1Cisco Prime Network 5.3 Installation Guide8 Installing the Vision, Events, and Administration Clients There are two methods for installing/launching the clients: This chapter covers the following: 
- Launching the Clients From the Web Start Page, page 8-1 
- Installing the Prime Network Clients on Your Computer, page 8-3 
- Troubleshooting Clients, page 8-6 Note The client installation methods in this chapter ar e only relevant if Prime Network is installed as a standalone product. If you installed Prime Netw ork as part of a suite, see Configuring the Prime Network, Prime Optical, and Prime Fulfillment Servers as Suite Components” in the Cisco Prime Central Quick Start Guide. Launching the Clients From the Web Start Page Prime Network enables you to access all its GUI clie nts from the Web Start page on the gateway. It provides single sign-on (SSO) for all GUI clients. After you enter your credentials, you can access any of the clients. Before You Begin Verify the following: 
- All the client requirements are met. For more information on the requirements, see Prime Network Client Requirements, page 2-12 .Client Installation Method Description Java Web Start technologyThe clients are launched from the gateway by entering a URL in the browser. No manual installation is required, and client upgrades are fully automated. Installation executable filesThe clients are manually installed using the executables from the DVD or the gateway server. 
8-2Cisco Prime Network 5.3 Installation GuideInstalling the Vision, Events, and Administration Clients Launching the Clients From the Web Start Page 
- Java 8 update 60 is installed on your computer. If not, download it from the Java download site: http://www.java.com. Note Prime Network was tested on Java 8 update 60, however it is expected to work with lower Java 8 updates as well. 
- Ports 6080 and 6081 are open. For other ports required for Prime Network, see Required Ports for Prime Network, page 2-32. To access the clients using Java Web Start technology: Step 1 Log into the gateway by entering: http://gateway-host-ip :6080/ana/services/install/install/webstart.html where gateway-host-IP is the gateway host name or IP address. The Prime Network applications launch page is displayed and provides access to all of the Prime Network GUI clients. Step 2 Enter your user name and password in the Prime Network login window and click Login. 8-3Cisco Prime Network 5.3 Installation GuideInstalling the Vision, Events, and Administration Clients Installing the Prime Network Clients on Your Computer Step 3 Click on the Prime Network application you want to access. A.jnlp file is downloaded. Step 4 Click Continue in the Security Warning screens. The client application jar fi les are downloaded and the Prime Network application starts. Step 5 Enter the gateway username and password, then click OK. Note If you want to launch a client from a differen t gateway, repeat this procedure from the other gateway. After the first Java Web Start application launch, a sh ortcut menu is added to the Start menu under the gateway IP address or hostname. Use this shortcut menu to launch the application for subsequent usage. Installing the Prime Network Clients on Your Computer This section provides procedures for installing the Prime Network client from the DVD or by downloading the client executable from the gateway server. Before You Begin Verify the following: 
- All the client requirements are met. For more information on the requirements, see Prime Network Client Requirements, page 2-12. - Disk 2: Client, Integration Layer, and Documentation is available. (See Installation DVDs, page 1-2 .) 
- There is IP connectivity between the gateway and th e client workstation that you are about to install. 
- Ports 6080 and 6081 are open. For other ports required for Prime Network, see Required Ports for Prime Network, page 2-32. - Make sure that you do not have any outdated client files. The client installation wizard gu ides you step-by-step through th e client installation process. Step 1 Use either of the following options to begin the client installation: 
- Insert Disk 2: Client, Integration Layer, and Documentation in the DVD drive. The client installation wizard launches automatically and the Welcome window is displayed. 
8-4Cisco Prime Network 5.3 Installation GuideInstalling the Vision, Events, and Administration Clients Installing the Prime Network Clients on Your Computer If the client installation wizard does not launch automatically, browse to the DVD directory and launch the client executable (CiscoPr imeNetwork.exe for 32-bit systems or CiscoPrimeNetwork_64bit.exe for 64-bit systems). 
- Open a web browser and download the client in stallation executable from the gateway using this URL:http:// gateway-IP-address :6080/ana/services/install/install/index.html where gateway-IP-address is the IP address of the gateway. The system makes a best effort to detect whether your operating system is 32-bit or 64-bit and indicates the recommended download. Click on the re levant link to download the exe file. You can also download Vision, Ev ents, and Admin clients. 
- After the download is complete, launch the downloa ded file. The client installation wizard launches and the Welcome window is displayed. Step 2 Click Next. The Destination Location window is displayed. Click Browse to change the installation directory, if you do not want to use the default, then click Next. 8-5Cisco Prime Network 5.3 Installation GuideInstalling the Vision, Events, and Administration Clients Installing Prime Network Clients in a Remote Personal Computer Note The default installation location is C:\Cisco Systems\Prime Network\. If you are installing on Windows 7, do not install the Prime Network clients in the Program Files folder. Only Windows administrators can run the clients if they are installed in that folder. Step 3 In the Select Components window, select the clients you want to install (Vision, Events, and/or Administration) and click Next. Step 4 If you want to change the default Program Ma nager group, enter your preference and click Next. Note Cisco Prime Network is the default Program Manager group. Cisco Prime Network overwrites any existing icons. If you choose to have multiple client installations, you should add a version number to the Program Manager group; for example, Prime Network 5.3. Step 5 Click Next to start the installation. Step 6 When the installation is complete, choose the op tions displayed in the final installation window, according to your preference: 
- Create “Quick Launch” icons—Create a Quick Launch icon for Prime Network Vision and Cisco Prime Network Administration on the Quick Launch toolbar. 
- Launch Cisco Prime Network Vision—Immedi ately launch Prime Network Vision. Step 7 Click Finish. Installing Prime Network Clients in a Remote Personal Computer This section provides procedure for installing the Pr ime Network client in a remote Personal Computer (PC). Before You Begin 
- Ensure that the following System requirements are set: –Operating System-Windows 10 –Memory (RAM)-8GB –Processor-Intel Core i5 CPU @ 2.30GHz Step 1 Connect two Windows 10 machine to the netw ork (local machine and Remote machine). Note Do not install Prime Network GU I clients in a local machine. Step 2 Install Prime Network GUI clients (A dministration, Vision, Events and so on) in a remote machine. Make a note of the IP address of the remote machine. Step 3 In the Client, open the Remote Desktop Connection application.
8-6Cisco Prime Network 5.3 Installation GuideInstalling the Vision, Events, and Administration Clients Troubleshooting Clients Note Click Search for Remote Desktop Connection in Windows 10 and you can see the Application in Search results. Click on it and open that application in Windows 10. Figure 8-1 Remote Desktop Connection Step 4 In the Computer field, enter the IP address and click Connect. Step 5 Now, you will be asked to enter credentials of the remote machine. Once you enter correct credentials, you can access the remote machine from local machine. Step 6 After accessing the remote machine, launch the Prim e Network Administration GUI, Vision GUI client, or Events GUI client. After the client installation is finished, use Cisco Prime Network Administration to complete the deployment of Cisco Prime Network. For information, see the Cisco Prime Network 5.3 Administrator Guide. Troubleshooting Clients This table explains how to troubleshoot typical client problems and respond to client messages. Problem/Message Action Required Latency problems Close any other applications running on the desktop.Citrix problems There may be issues establishing SSL connection or creating a cache folder to the Prime Network client. Follow th e instructions in Using Prime Network Clients with Citrix, page 2-14. Message: An automatic upgrade of the Prime Network installer is required to connect to the specified server. The application will restart after the upgrade has completed.The server and client have differ ent versions of the launcher. Let the automatic upgrade continue.
8-7Cisco Prime Network 5.3 Installation GuideInstalling the Vision, Events, and Administration Clients Troubleshooting Clients Message: Client not compatible You are trying to la unch a client that is not compatible with the gateway. Install updated clients as described in: 
- Launching the Clients From the Web Start Page, page 8-1 
- Installing the Prime Network Clients on Your Computer, page 8-3 Message: Another Prime Network client accessing a different server is open on your computer. This additional Prime Network client will open using the same installer version as the currently open Prime Network client.This occurs when another Prime Network application is running and is connected to a different ga teway—For example, a client is already connected to gateway1 and you are trying to connect to gateway2. Click OK. The client will connect to gateway2 but will use the client launcher from gateway. Consequently, the GUI might not match the host code. You cannot open any clients. If you encounter a problem in opening a Prime Network application, try to regenerate the application files at the Prime Network server by logging in Prime Network gateway and execute the script clientregpacker.sh located at PRIME_NETWORK_HOME / Main/Scripts After the execution of changePrimeNetworkOSAndOracle User.sh script, unable to dis-integrate Prime Network from Prime Central.This occurs when you change the SSH user name. After the execution of changePrimeNetworkOSAndOracleUser.sh script, follow the re-integration process of changePrimeNetworkOSAndOracleUser.sh script in the Prime Network-Prime Central setup. 1.In Prime Network/Prime Cent ral setup before executing changePrimeNetworkOSAndOracleUser.sh script, Dis-integrate Prime Network from Prime Central. 2.Execute the changePrimeNetworkOSAndOracleUser.sh script. 3.Integrate Prime Network with Prime Central again.Problem/Message Action Required
8-8Cisco Prime Network 5.3 Installation GuideInstalling the Vision, Events, and Administration Clients Troubleshooting Clients

CHAPTER 9-1Cisco Prime Network 5.3 Installation Guide 9 Installing the Prime Network Integration Layer Prime Network can be used with Multi-Technolog y Operations Systems Interface (MTOSI) and 3rd Generation Partnership Project (3GPP) northbound in terfaces. To enable this, you must install the Prime Network Integration Layer (PN-IL) along with the MTOSI and 3GPP bundles. Note The PN-IL must be installed if you intend to use Prime Network in suite mode. The PN-IL server allows Prime Network to expose MTOSI and 3GPP APIs over Simple Object Access Protocol (SOAP). The integration layer exposes MTOSI and 3GPP interfaces to enab le clients to register and receive notifications. For information on interfa ces exposed by the integration layer for MTOSI and 3GPP, refer to the Cisco Prime Network OSS Guide. An OSS client can use th ese standard and vendor extension APIs to integrate with Prime Network. There are two methods for installing the PN-IL—usin g the GUI wizard (preferred method) or using CLI commands. The following topics guide you through these PN-IL tasks: 
- Installing the PN-IL Using the Installation Wizard, page 9-2 
- Installing the PN-IL (CLI Method), page 9-4 
- Enabling and Disabling the PN-IL Health Monitor, page 9-5 
- Managing FTP for Prime Network Integration Layer Server, page 9-5 
- Changing the Ports Used by the PN-IL, page 9-7 Note If the integration layer is installed and you want to upgrade to the current vers ion, refer to the section Upgrading the Prime Network Integr ation Layer (PN-IL), page 10-36. Prerequisites for Installing the PN-IL Before you start installing the PN-IL: 
- Make sure Prime Network is completely installed. 
9-2Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Integration Layer Installing the PN-IL Using the Installation Wizard 
- Verify that the ports required by PN-IL are available. See the Prime Network Integration Layer Ports, page 2-35. To change the default ports used by PN-IL, see the section Changing the Ports Used by the PN-IL, page 9-7. - Verify that the system has at le ast 4 GB of RAM available using the top command. 
- Verify that the system has minimum of 1 GB free space in the temp directory. 
- To use the GUI method (installation wizard), make sure that: –An X client application, such as Xming, is installed on the local mach ine where you plan to launch the wizard. –A Telnet/SSH client, such as PuTTY, is installed on the local machine where you plan to launch the wizard, and X11 forwarding is enabled. –Max user processes value on the machine is higher than 2048. Check this by executing: command ulimit -a Installing the PN-IL Using the Installation Wizard The PN-IL can be quickly and easily inst alled using the GUI installation wizard. Before you Begin Make sure that all the prerequisites for installing the PN-IL are met. See Prerequisites for Installing the PN-IL, page 9-1. Step 1 Launch the X client application (for example, Xming). Step 2 As the root user, launch a terminal to the Prime Network gateway server. Step 3 Insert Disk 2: Software and Documentation in the DVD drive. (See Installation DVDs, page 1-2 ). Step 4 Mount the inserted DVD using the mount command, and move to the mount directory. Step 5 In the mount directory, locate the PNIntegrationLayer_v2.3.0.bin file and run it. This will launch the installation wizard. ./PNIntegrationLayer_v2.3.0.bin Step 6 Read the introduction in the Welcome page and click Next. Step 7 In the License page, accept the terms of the License Agreement and click Next. Step 8 In the Prime Network Credenti als page, provide the following information, then click Next. - Operating System user—The username for the Prime Network operating system that was defined during installation of the Prime Network gateway. 
- Prime Network Root User—The username for the root user that was defined during installation of the Prime Network gateway. 
- Prime Network Root User Password—Password for the root user. Step 9 After you have entered the Prime Network credential s, the installation checks the disk space and RAM and identifies whether Prime Network is inst alled in standalone or suite mode. Click OK to proceed with the installation.
9-3Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Integration Layer Installing the PN-IL Using the Installation Wizard Figure 9-1 PN-IL Installation Wiza rd - Prime Network Credentials Step 10 The Port Details page lists the ports used by th e PN-IL. Verify that they are available. Click Next. Step 11 Review the pre-installation summary. If you need to change any of the user inputs, click Previous, otherwise click Install to continue. Step 12 To run 3GPP services in Prime Network, use th e following command to enable the NBI script: cd $PRIMEHOME install/scripts/accessconfig.sh nbi enable Step 13 Restart the PN-IL: $PRIMEHOME/bin/itgctl restart Note For successful installation of PNIL, karaf process should be running. If the process is not running try itgctl restart. Step 14 When the installation is complete, click Done to close the wizard. Step 15 Verify the PN-IL installation by logging into the Prime Network bin directory on the gateway as the Prime Network user (e.g., pn53) and executing this command: cd $PRIMEHOME/bin itgctl status The integration layer status should be “Restarted”. Note After the PN-IL installation is complete, a new e nvironmental variable $PRI MEHOME is created and points to the PN-IL installation directory.
9-4Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Integration Layer Installing the PN-IL (CLI Method) Installing the PN-IL (CLI Method) Before you Begin Make sure that all the prerequisites for installing the PN-IL are met. See Prerequisites for Installing the PN-IL, page 9-1. To install PN-IL: Step 1 As the root user, open a terminal on the Prime Network gateway server where you want to install PN-IL. Step 2 Insert Disk 2: Software and Documentation in the DVD drive. Step 3 Mount the inserted DVD using the mount command and change to the mount location. Step 4 Change to the pnuser: su - pnuser Step 5 Create an installation directory for PN-IL (pnil in this example). mkdir -p $PRIME_NETWORK_HOME/ pnil Step 6 Copy the PN-IL installation tar file fro m the mount location to this directory. cp /mnt/**/Integration/sil-esbx.x.x.tar.gz $PRIME_NETWORK_HOME/ pnil-directory Step 7 Move to the directory in which the tar file was copied and extract the PN-IL installation tar: cd $PRIME_NETWORK_HOME/ pnil-directory tar -zxf sil-esbx.x.x.tar.gz Step 8 Move to the directory in which the installation tar files were extracted and run the installation script: cd sil-esb -x.x.x./install/packages/ ./installAndConfigureEsb.sh Step 9 Reload user profile using the following command: source $PRIME_NETWORK_HOME/.cshrc The installation does the following: 
- Sets the $PRIMEHOME variable to the PN-IL home directory. 
- Sets up a PN-IL health monitor that checks the PN-IL status every 3 minutes. Step 10 Configure PN-IL in standalone mode by running the following command as pnuser. Note If you installed Prime Network in suite mode, you must configure PN-IL to run in suite mode after Prime Network has been integrated with Prime Central. Refer to the Cisco Prime Central Quick Start Guide. Step 11 Go to the path cd $PRIMEHOME/bin. itgctl config 1 --anaPtpServer ana_host_ip --anaPtpUser user --anaPtpPw password --authURL pnetwork-authentication-URL where: 
- user is the Prime Network root user (usually root) 
- password is the Prime Network root user password
9-5Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Integration Layer Enabling and Disabling the PN-IL Health Monitor 
- pnetwork-authentication-URL is the URL used to authenticate Prime Network calls; usually https://localhost:6081/ana/services/username Step 12 To run 3GPP services in Prime Network, use th e following command to enable the NBI script: cd $PRIMEHOME install/scripts/accessconfig.sh nbi enable Step 13 Restart the PN-IL: $PRIMEHOME/bin/itgctl restart Note For successful installation of PNIL, karaf process should be running. If the process is not running try itgctl restart. Enabling and Disabling the PN-IL Health Monitor The PN-IL health monitor checks the PN-IL status every 3 minutes. If the services are down for any reason, the health monitor brings the PN-IL back up. If you do not want PN-IL to be automatically restar ted (such as for a maintenance window), manually disable the health monitor. As pnuser, enter the following: $PRIMEHOME/local/scripts/il-watch-dog.sh disable To re-enable the health monitor: $PRIMEHOME/local/scripts/il-watch-dog.sh enable Note By default, the PN-IL health monitor is disabled. Managing FTP for Prime Network Integration Layer Server Each PN-IL FTP server has a primary and a seconda ry FTP server setup with a failover option or a replication option 
- Failover—If the primary server is not reachable, files are transferred to the secondary FTP server. If the secondary server is also no t reachable, files are copied to th e configured directory on the local machine. 
- Replication—Files are transferred to both the primary and the secondary FTP servers. The PN-IL directory contains a script (ftpConfig.sh) th at is available in the PN-IL installation directory. The default location is $PRIMEHOME /esb/bin. Use the ftpConfig.sh script with the following options to modify the file transfer component: ftpConfig.sh [-help ] [-ftp enable | disable ] [-localDir new-location ] [-replication enable | disable ] [-clearConfig ] [-display ]
9-6Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Integration Layer Managing FTP for Prime Network Integration Layer Server Storage Location for PN-IL Replicated Files Table 9-1 shows where the files are stored when the replic ation is enabled/disabled. Tick mark indicates ftp details are configured for the particular FTP server. Table 9-1 FTP Configuration with Replication Enabled/ DisabledOptions Description -help View the FTP options for standalone integration layer. -ftp enable | disableEnables and disables the FTP service. -localDir new-locationChanges the storage director y that is used on the local machine when file transfer is disabled (the default is /tmp). -replication enable | disableEnables and disables replication of XML and status files on both primary and secondary FTP servers. To s ee where files are stored, see Storage Location for PN-IL Replicated Files, page 9-6. -clearConfig Clears the FTP configuration. See Clearing the FTP Configuration for the Standalone Integration Layer Server, page 9-7 -display options Displays the FTP configurations, with the following options: im [-hostOption primary | secondary ]Displays all servers configured for Inventory Management interface type for 3GPP. Use -hostOption to specify the primary or secondary server. global Displays FTP configurations for primary and secondary servers across all management interface type for 3GPP. all Displays global FTP configurations Primary FTP Secondary FTP Rep lication Files Stored Under: xx Primary x Primary xx Secondary x Primary Primary, Secondary
9-7Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Integration Layer Changing the Ports Used by the PN-IL Clearing the FTP Configuration for the Standalone Integration Layer Server Use one of these command to clear the configuration depending on the server type: 
- Global primary server: ./ftpConfig.sh -clearConfig true -hostOption primary -mgmtDataType global 
- Global secondary server: ./ftpConfig.sh -clearConfig true -hostOption secondary -mgmtDataType global 
- IM primary server: ./ftpConfig.sh -clearConfig true -hostOption primary -mgmtDataType im 
- IM secondary server: ./ftpConfig.sh -clearConfig true -hostOption secondary -mgmtDataType im Changing the Ports Used by the PN-IL This section explains how to change the default ports listed in Prime Network Integration Layer Ports, page 2-35. Note These procedures stop the PN-IL. If you do not want the health monitor to automatically restart the PN-IL after 3 minutes, disable it as described in Enabling and Disabling the PN-IL Health Monitor, page 9-5. Changing the NIO and SSL Ports By default, the NIO and SSL transport ports are 61616 and 61615. To change the port numbers: Step 1 Edit the $PRIMEHOME/esb/etc/activemq.broker.cfg as follows: 
- Change the nioTransportPort value to a port number that is not in use, such as 61614. 
- Change the sslTransportPort value to a port number that is not in use, such as 61613. Step 2 Edit the $PRIMEHOME/esb/etc/com.cisco.p rime.esb.jms.cfg fi le and change the prime.connection.port value to the value of nioTransportPort from Step 1. Step 3 Save and close the activemq.broker.cfg and com.cisco.prime.esb.jms.cfg files. Step 4 From the $PRIMEHOME/bin directory, stop the integration layer server by invoking itgctl stop. Changing the MTOSI Web Services Port By default, the MTOSI web services implementation port is 9110. To change the port number:
9-8Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Integration Layer Migrating the PN-IL from Standalone Mode to Suite Mode Step 1 Open the $PRIMEHOME/esb/etc/com.cisco.pr ime.esb.mtosi.cfg file and change the mtosiPort value to a port number that is not in use. Step 2 Save and close the com.cisc o.prime.esb.mtosi.cfg file. Step 3 From the $PRIMEHOME/bin directory, stop the integration layer server by invoking itgctl stop. Changing the 3GPP Web Services Port By default, the 3GPP web services implementat ion port is 9220. To change the port number: Step 1 Open the $PRIMEHOME/esb/etc/com.cisco.p rime.esb.tgpp.cfg file and change the tgppPort value to a port number that is not in use. Step 2 Save and close the com.cisco.prime.esb.tgpp.cfg file. Step 3 From the $PRIMEHOME/bin directory, stop the integration layer server by invoking itgctl stop. Changing the Alarm Web Services Port By default, the Alarm web services implementation port is 9020. To change the port number: Step 1 Open the $PRIMEHOME/esb/etc/com.cisco.pr ime.esb.alarm.cfg file and change the alarmMgmtPort value to a port number that is not in use. Step 2 Save and close the com.cisc o.prime.esb.alarm.cfg file. Step 3 From the $PRIMEHOME/bin directory, stop the integration layer server by invoking itgctl stop. Migrating the PN-IL from Standalone Mode to Suite Mode If Prime Network was originally installed in standa lone mode and was subsequently migrated to work as part of a suite, you need to migrate the PN-IL to suite mode as well. You can do this using the installation wizard. During the installation, the system automatically detect s that the migration to suite mode is required and, after receiving your confirmation, proceeds with the relevant installation and configuration. To migrate the PN-IL to suite mode: Step 1 Log in to the Prime Network gateway as the Prime Network user. Step 2 Stop the PN-IL instance and then disabl e PN-IL Health checker, as follows: $PRIMEHOME/bin/itgctl stop $PRIMEHOME/local/scripts/il-watch-dog.sh disable
9-9Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Integration Layer Migrating the PN-IL from St andalone Mode to Suite Mode Step 3 Launch the installation wizard and follow Steps 1 through 8 in Installing the PN-IL Using the Installation Wizard, page 9-2. Step 4 After you have provided the Prime Network credentials, the system identifies that Prime Network is installed in suite mode. Click Continue Migration in the displayed message: Figure 9-2 Migration to Suite Mode Step 5 Click Next in the Port Details page. Step 6 In the Pre-Installation Summary page, check that the installation mode is Suite Mode Deployment, then click Install. Step 7 When the installation is complete, click Done to close the wizard.
9-10Cisco Prime Network 5.3 Installation Guide Installing the Prime Network Integration Layer Migrating the PN-IL from Standalone Mode to Suite Mode

CHAPTER 10-1Cisco Prime Network 5.3 Installation Guide10 Upgrading and Rolling Back Prime Network This section covers tasks on how to upgrade from Prime Network 4.2.2, 4.2.3, 4.3, 4.3,1, 4.3.2, 5.0, 5.1, or 5.2 to 5.3 or roll back from Prime Network 5.3 to 5. 2, 5.1, 5,0, 4.3.2, 4.3.1, or 4.3. If you want to upgrade from an earlier version of Prime Network, you must first upgrade to Prime Network 4.0 and then you can upgrade to Prime Network 5.3. To upgrade 4.0 from earlier versions of Prime Networ k, refer Prime Network 4. 0 DVD contents. For the upgrade procedure, see Cisco Prime Network 4.0 Installation Guide. This section contains the following topics: 
- Prime Network Upgrade Overview, page 10-2 
- Preparing to Upgrade Prime Network (Pre-Upgrade Checklist), page 10-4 
- Upgrading to Prime Network 5.3 from 5.2, 5.1, 5.0, 4.3.2, 4.3.1, 4.3 (Inte rmediate Steps), page 10-8 
- Upgrading to Prime Network 5.3 and Oracle 12.2.0.1, page 10-12 –In-line RHEL Upgrade of 6.7, 6.8, 6.9, 6.10, 7.4, 7.5, and 7.7 with Prime Network 5.3 and Oracle 12.2.0.1, page 10-12 –Major RHEL Upgrade from 5.x to 6.x and 6.x to 7.x, page 10-12 –Upgrading to Prime Network 5.3 in Suite Mode, page 10-14 
- Verifying the Prime Network Operations Reports Upgrade from 4.0 to 5.3, page 10-20 
- Rolling Back to Earlier Prime Network Version from Prime Network 5.3 Including Oracle Rollback, page 10-21 
- Upgrading the Prime Network Integration Layer (PN-IL), page 10-36 
- Prime Network Post-upgrade Tasks, page 10-38 
- Configuring Clusters for Pacemaker and Corosync Setup, page 10-17 Prime Network Upgrade Overview The upgrade procedure backs up the existing user directory and then adds any new Prime Network 5.3 libraries, files, and code to the existing installation. Any changes to the database are made automatically as part of the upgrade. The majority of your customiz ations and user-defined information remain intact 
10-2Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Prime Network Upgrade Overview and available after upgrading. A list of what is migrated is provided in Table 10-1 on page 10-2. If Operations Reports is installed, it will be upgraded automatically during the upgrade process. The amount of time required to upgrade Prime Network depends on your deployment size and system performance. During upgrade, the system will be down. Contact your Cisco account representative for an estimated upgrade duration. Table 10-1 shows the components aff ected by the Prime Network upgrade and whether those components are upgraded automatically. If they are not updated automatically, the manual procedure you must perform is provided. Table 10-1 Components Affected by the Prime Network Upgrade Component DescriptionUpgraded Automatically?C o m m e n t s VNE AVMs avm*.xml files with managed element definitionsYes — Third-party VNE supportSupport for non-Cisco VNEsNo Prime Network supports third-party devices through Cisco Advanced Services engagement. As of release 5.2, Prime Network will not natively support third-party devices, and a Cisco Advanced Services contract will be required for their enablement and support. Database schema changesAdd, change, or remove database schema tables to meet the Cisco Prime Network 5.3 schema definitionYes — Database data preservationMigrates the old data representation to the Cisco Prime Network 5.3 representation, where applicableYes All tickets and events are available after upgrading. All other data (such as maps, users, and so on) are preserved and migrated. Database (general)— No You must retain the same database type after migration. In other words, you cannot upgrade from: 
- A database located on the gate way server to a database located on a remote server (and vice versa) 
- A customer-provided database to an embedded database. Users and scopes — Yes All users and scopes are maintained.Northbound API trap forwarding and SNMPOut-of-box support for the SNMP trap forwarding mechanismYes The Cisco-EPM-NOTIFICATI ON-MIB structure includes a running index in the object identifier (OID) suffix, instead of a constant number as in previous releases. For more information, contact Cisco Advanced Services. Northbound API: IMO and BQLChanges made to information model objects (IMOs)Yes IMOs might change between versions to support new features. For more information, contact Cisco Advanced services. 
10-3Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Prime Network Upgrade Overview Customizations: Business objects— Yes Review IMO changes to veri fy that the OID associated with the business object did not change. Customizations: Soft propertiesSoft properties remain backward compatible and are available in Prime Network 5.3 after upgrading.Yes — Customizations: Command BuilderUser-defined commands Yes — Built-in Command Builder scriptsPrime Network built-in activation scriptsYes The upgrade procedure updates the built-in changes and removes scripts that are no longer part of the product. See Prime Network Post-upgrade Tasks, page 10-38 to understand which commands require installation after the upgrade. Customizations: Drools rules— Yes The Post.drl rule is available after upgrading. Customizations: crontab filesPrime Network crontabs are configured as part of the installationYes, if in proper locationIf you have user-defined cron jobs, place them in PRIME_NETWORK_HOME /local/cron/crontab.user.list. The upgrade will automatically add the user-defined cron jobs. User-defined cron jobs th at are not placed in this directory will be removed. See Prime Network Post-upgrade Tasks, page 10-38. Customizations: External launch pointsExternal launch configurationYes Review IMO changes to veri fy that the OID associated with the launch command did not change. Customizations: Message of the DayMessage of the Day configurationYes Registry — Yes New Prime Network 5.3 registry files are available automatically after the upgrade. Customizable registry files, including avm+.xml an d site*, are available and upgraded automatically. Review any customized registry configurations in site.xml and avm*.xml to understand wh ether they are relevant to Prime Network 5.3. Contact your Cisco account representative, if necessary. pnuser _admin userUser with database administrator permissions who can run maintenance tasks—such as gathering statistics—on the other Prime Network database schemas.Yes —Table 10-1 Components Affected by th e Prime Network Upgrade (continued) Component DescriptionUpgraded Automatically?C o m m e n t s
10-4Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Preparing to Upgrade Prime Network (Pre-Upgrade Checklist) Preparing to Upgrade Prime Network (Pre-Upgrade Checklist) Table 10-2 shows the pre-upgrade tasks that must be pe rformed before upgrading to Prime Network 5.3.Security: SSH and SSL keysPrime Network SSL keystore and truststore keys, SSH keys, and registry encryption keysYes Prime Network SSL keystore and truststore keys are maintained. These keys are used by all SSL sockets, including BQL and PTP clients. Prime Network SSH keys and registry encryption keys are also maintained. Prime Network persistency filesInventory, events, and link persistency dataYes All persistency files are available after the upgrade. Standby units — Yes Standby units comple te their upgrade when they are restarted by the gateway (when an active unit goes down and the standby unit is brought online). GUI client — No If you had an installed client, you need to reinstall it after upgrade. If you access the clients via Web Start, no action is required. Network Service Activation (NSA)— No Cisco Prime Network Activation functionality is no longer available in Prime Network 5.3. Transaction Manager replaces the Prime Network Workflow and Activation features that were availabl e in previous releases. For details on setting up Transaction Manager, see Setting Up Transaction Manager, page 12-4. For information on how to use Transaction Manager, see the Cisco Prime Network 5.3 Customization Guide. Change and Configuration Management Software image and device configuration filesYes All the software and devi ce configuration changes are retained as part of the upgrade. High availability configurationUpgrades for RHCS/Oracle Active Data Guard gateway high availabilityNo If you have gateway high availability, move the Prime Network and Oracle serv ices to maintenance mode before you run the upgrade, then move them back to normal mode after it. Operations ReportsUser-defined reports Yes All user defined repor ts created prior to the upgrade will be available post-upgrade.Table 10-1 Components Affected by th e Prime Network Upgrade (continued) Component DescriptionUpgraded Automatically?C o m m e n t s
10-5Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Preparing to Upgrade Prime Network (Pre-Upgrade Checklist) Table 10-2 Gateway Pre-Upgrade Tasks Task Referred Topic/Action Required Step 1 If you are managing third-party devices, make note of them. You will need to give this information to your Cisco representative to enable the support after the upgrade.Prime Network supports third-party devices through Cisco Advanced Services engagement. As of release 5.2, Prime Network will not natively support third-party devices, and a Cisco Advanced Services contract will be required for their enablement and support. Step 2 Insert Disk 3: Upgrade Files into the DVD drive.Copy these files from the DVD to the temporary upgrade directory you created: 
- ivne-drivers.tar file 
- Prime_Network_upgrade directory and its dependent contents Step 3 Insert Disk6: Upgrade Files for Prime_Network_upgrade into the DVD drive.Copy these files from the DVD to the same temporary upgrade directory you created for Disk 3: 
- jars 
- Prime_Network5.3.0_others.jar 
- Prime_Network5.3.0_registry.jar 
- Prime_Network5.3.0_third_party.jar Step 4 Familiarize yourself with the upgrade process and identify areas that may require manual changes.Components affected by upgrade are listed in Table 10-1. Step 5 Back up your database and files stored on the gateway. Note You will need this data in case you perform a rollback.External database: 
- Back up your gateway data by logging into the gateway and running this command from PRIME_NETWORK_HOME /Main/scripts: backup.pl backup-folder 
- Back up the Oracle database using your Oracle documentation. Embedded database: a.Log in to the gateway as pnuser. b.Change to the embedded database directory: # cd $PRIME_NETWORK_HOME/Main/scripts/embedded_db c.Execute the backup script: # emdbctl --backup For information on emdbctl utility used in the above procedure, refer to the Cisco Prime Network 5.3 Administrator Guide. Note If you would like to rollback embedded database later, please ensure that the proc edure described in database rollback Prerequisites, page 10-22 is done.
10-6Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Preparing to Upgrade Prime Network (Pre-Upgrade Checklist) Step 6 Apply the database configurations and recommendations.Preparing the Oracle Exte rnal Database, page 4-1 Step 7 Verify that the server machines comply with the system hardware and software requirements.Installation Requirements, page 2-1 Gateway: CPU and Memory Requirements for Different Network Sizes, page 2-3 Step 8 Verify that the backup directory has at least 6000 MB of free space for pnuser .Example: df –k /backup_dir Step 9 Verify that the database has at least 8 GB of RAM available (the minimum requirement).For the database storage sizing guidelines, contact your Cisco account representative. Step 10 Verify that all required ports are free. Required Ports for Prime Network, page 2-32. Step 11 Make sure all database sessions (such as TOAD, SQL, and so on) are closed.Other TOAD/SQL sessions apart from Prime Network established session should be closed. Step 12 Place any customized crontab files in PRIME_NETWORK_HOME /local/cron/c rontab.user.list. User-defined cron jobs that are not placed in this directory will be removed.— Step 13 (External database only) Restart Prime Network and th e Oracle database.1.As pnuser, stop Prime Network: networkctl stop 2.As oracle user, stop and restart Oracle: sqlplus shutdown immediate startup 3.As pnuser, restart Prime Network: networkctl start Step 14 Verify that the gateway and units are powered up and connected by opening an SSH session between gateway and all units.__ Step 15 Verify that Oracle a nd the Oracle listener are running.Starting the Oracle Listener (External Database), page 3-6Table 10-2 Gateway Pre-U pgrade Tasks (continued) Task Referred Topic/Action Required
10-7Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Preparing to Upgrade Prime Network (Pre-Upgrade Checklist) Step 16 Drop the TMP_BIG_TICKET2 table if it is already created.Prior to Prime Network 5.3 upgrade, run the below query in Data base (DB): 1.Log in to the Prime Network DB and do the following: a.As pnuser, execute sqlplus <PN Username>/<PN User Password>@"[<Gateway IP>]:1521/<SID>" Example: sqlplus pn43/Admin123#@"[10.76.80.19]:1521/mcdb" Notemcdb – SID is the value that is set for environment variable ORACLE_SID) 2.Execute the below query: BEGIN EXECUTE IMMEDIATE 'DROP TABLE TMP_BIG_TICKET2'; EXCEPTION WHEN OTHERS THEN IF SQLCODE != -942 THEN RAISE; END IF; END;/ Step 17 (Only for NAT units) Stop the Prime Network application and remove the current crontab.Enter the following commands on each of the NAT units: networkctl stop; crontab -r; Note To restart the crontab later, see Restarting Crontab Jobs for NAT Units, page 10-39. Step 18 (Local and geographic gateway high availability) Verify that the gateways and units with Red Ha t installed have rsync 3.0.6 or newer. Verify the rsync version installed on the gateway/units using the command: [root@primebgl01-lnx ~]# rpm -qa rsync rsync-3.0.6-9.el6_4.1.x86_64 [root@primebgl01-lnx ~]# Step 19 If using an external database, verify your database settings. Note Prime Network 5.3 requires the Oracle JVM and partitioning options.See , “Preparing the Oracle External Database” Step 20 If you are running RHEL 7.x, ensure that the following three RPMs are installed: 
- apr-util-1.5.2-6.el7.x86_64.rpm 
- apr-1.4.8-3.el7_4.1.x86_64.rpm 
- pcre-8.32-17.el7.x86_64.rpmSee Required Red Hat Services and RPMs, page 2-16 Note Apache bring up fails in absence of these three RPMs.Table 10-2 Gateway Pre-U pgrade Tasks (continued) Task Referred Topic/Action Required
10-8Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Upgrading to Prime Network 5.3 from 5.2, 5.1, 5.0, 4.3.2, 4.3.1, 4.3 (Intermediate Steps) Supported Prime Network Upgrade and Rolling back versions Refer the following table for supported Prime Network Upgrade and rolling back versions. Table 10-3 Supported Prime Network Upgrade and Rolling back versions Upgrading to Prime Network 5.3 from 5.2, 5.1, 5.0, 4.3.2, 4.3.1, 4.3 (Intermediate Steps) Note The steps provided below are intermediate steps that are to be followed while Upgrading to Prime Network 5.3 and Oracle 12.2.0.1, page 10-12. After upgrading to Prime Network 5.3 you must also up grade to Oracle 12.2.0.1 ve rsion. No other Oracle version must be used with Prime Network 5.3. If you are running Prime Network with RHEL 5.8 before upgrading Prime Network 5.3, upgrade the RHEL version to RHEL 6.x or 7.x version based on your current Prime Network RHEL version support. Caution Do not apply any service patches during any phase of the upgrade to Prime Network 5.3. Apply them after the upgrade is completed. Before You Begin 
- Before you begin the upgrade, perform the pre-upgrade tasks in Preparing to Upgrade Prime Network (Pre-Upgra de Checklist), page 10-4. - As Oracle user, take a backup of the file sqlnet.ora available at the following location without changing its permission: (for Oracle 12.1.0.2) $ORACLE_BASE/product/12.1.0.2/db_1/network/adminUpgrade from Upgrade to Rollback to PN 4.0 4.3.1 -> 5.3 4.3.1PN 4.1 4.3.1 -> 5.3 4.3.1PN 4.2 4.3.1 -> 5.3 4.3.1PN 4.2.1 4.3.1 -> 5.3 4.3.1PN 4.2.2 5.0 -> 5.3 5.0PN 4.2.3 5.0 -> 5.3 5.0PN 4.3 5.3 5.0PN 4.3.1 5.3 4.3.1PN 4.3.2 5.3 4.3.2PN 5.0 5.3 5.0PN 5.1 5.3 5.1PN 5.2 5.3 5.2
10-9Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Upgrading to Prime Network 5.3 from 5.2, 5.1, 5.0, 4.3.2, 4.3.1, 4.3 (Intermediate Steps) (for Oracle 12.1.0.1) $ORACLE_BASE/product/12.1.0.1/db_1/network/admin Note While upgrading Prime Network in a HA setup, you should always start the upgrade from the Primary gateway as active gateway. The active gateway shoul d not be the secondary gateway when starting the upgrade process. To upgrade the Prime Network gateway: Step 1 Create a temporary upgrade directory on the gateway. Note Make sure that upgrade directory is not a subdirectory of $PRIME_NETWORK_HOME (which is /export/home/ pnuser by default). Step 2 Insert Disk 3: Upgrade Files into the DVD drive. Step 3 Copy these files from the DVD to the temporary upgrade directory you created: 
- ivne-drivers.tar file 
- Prime_Network_upgrade directory and its dependent contents Step 4 Insert Disk 6: Upgrade Files for Prime_Network_upgrade into the DVD drive. Step 5 Copy these files from the DVD to the same temporary upgrade directory you created for Disk 3: 
- jars 
- Prime_Network5.3.0_others.jar 
- Prime_Network5.3.0_registry.jar 
- Prime_Network5.3.0_third_party.jar Step 6 Assign pnuser :pngroup owner permissions to the Prime_Network_upgrade directory and its contents: chown –R pnuser:pngroup Prime_Network_upgrade Step 7 To verify the group name, run the following command as pnuser: id --group --name Step 8 As pnuser, move to the following location in your temporary upgrade directory: cd Prime_Network_upgrade Step 9 If you have not upgraded from fresh install of Prime Ne twork 5.2, 5.1, 5.0, 4.3.2, 4.3.1, 4.3, 4.2.3, or 4.2.2 to Prime Network 5.3, as PN user, run status command to check if Compliance Manager is UP, if not, run: cmctl start For example, pn53@imeir-pn50-01 [~]% cmctl status Up Step 10 Start the upgrade: perl upgrade.pl Note Compliance server should be up and running for performing the upgrading process. 
10-10Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Upgrading to Prime Network 5.3 from 5.2, 5.1, 5.0, 4.3.2, 4.3.1, 4.3 (Intermediate Steps) Note While exporting custom policies, if you are prompted with the following message, Export failed, Do you want to continue (YES/NO), then you can follow the below conditions based on your requirements:Choose NO to stop the upgrading process and exit, or YES to continue. When you choose YES, the following message appears:Warning ! All the custom policies has been wi ped out, Do you want to continue (YES/NO). Choose NO to stop the upgrading process and exit, or YES to continue the upgrade process. Step 11 Enter the required information as shown in the following table. Step 12 After the upgrade is complete, Prime Network restarts. Log in as pnuser for the environment changes to take effect. Note While importing the custom policies, if the number of custom policies exported is zero, then the importing process is skipped with a message No Custom Policies to import. If the custom policies exported is not zero and if the compliance server is up, then the importing process begins. If the compliance server is not up within 30 seconds, the following message is prompted to the user: Failed: Run <PN_Home>/util s/independent/compliance/bin/ importPolicies.sh manually Step 13 If any of the preceding steps fail, the following error message is shown: Failed to execute hook-type for hook-name. See log for further details. - Hook hook-name terminated with failure - Please choose one of the following: 1. Abort the upgrade process 2. Re-run the hookPrompt for... Enter... Notes Password for OS root user Operating system root passwordLinux root password In a high availability environment, you will be required to enter the OS root user for each machine in the setup. Verifying whether you have completed database backupyes This prompt is to check whether yo u have recently completed database backup. Default is yes. If you enter no, the upgrade process will stop and will ask you to back up the database. For information on backing up your database, see Step 5 in the pre-upgrade checklist. Destination location for backing up the existing installation tar filedirectory Specify a directory with at least 6000 MB of free space. Verify that the backup directory is available for pnuser. The backup directory needs write permission. Enter the following command to add write permission to the backup directory: chmod 777 <directory> Disabling Configuration Audit yes Configuration Audit is deprecated and replaced by Compliance Audit. If you still want to use Configuration Audit, enter no and it will remain available from Change and Configuration Management. Path to the ivne-drivers.tar file full pathname Provide the full pathname to the temporary upgrade location from Step 1. Prime Network root password root password The root password used to log into the Prime Network GUI applications.
10-11Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Upgrading to Prime Network 5.3 from 5.2, 5.1, 5.0, 4.3.2, 4.3.1, 4.3 (Intermediate Steps) In the error message, hook-type and hook-name are the type and name of the procedure that failed. a.Check the upgrade log ( PRIME_NETWORK_HOME /Main/upgradetimestamp .log) to identify the reason for the failure. b.If you can identify the problem and fix it manually, do so; then, choose option 2 to rerun the hook. The upgrade procedure continues from the procedure that failed. c.If you cannot fix the problem, choose option 1 to cancel the upgrade. Af ter canceling the upgrade, Prime Network cannot be started. Contact your Cisco account representative to fix the problem; then, rerun the upgrade. The upgrade procedure continues from the procedure that failed. Note If you decide not to rerun the upgrade, y ou must roll back to your base Prime Network environment, including rolli ng back the database. See Rolling Back to Earlier Prime Network Version, page 10-34. Step 14 If you upgraded a gateway configured with local high availability, take the ana and oracle_db services out of maintenance mode: clusvcadm -U ana clusvcadm -U oracle_db Step 15 Clear the web browser cache. Step 16 Perform the necessary tasks listed in Prime Network Post-upgrade Tasks, page 10-38. Note To remove previous device packag e reference errors in avm file: 11 .out, execute the following command as a Prime Network user: networkctl restart –avm 11. After the upgrade of Prime Network, you can implement SNMPv2 protocol on all devices. Follow the below steps to run the script: 1.Navigate to ‘<PRIME_NETWORK_HOME>/local/ scripts’ directory in the GateWay (GW). 2.Run the script as pnuser from the GW. Note To run script, Prime Network should be down in both GW and Units. This condition is applicable for all VNEs and not applicable to a specific VNE. 3.Run the script file using the command below: perl updateSNMPver.pl <currentSnmpver> <newSnmpVer> Ex1: perl updateSNMPver.pl v2 v2only Ex2: perl updateSNMPver.pl v1 v2only Note Valid SnmpVer parameters for the above script are v1,v2,v2 only and the parameters are case sensitive. The log files are available in the following path; ‘<PRIME_NETWORK_HOME>/SnmpVe rchange_logs’ in the GW. 4.Start the Prime Network to reflect the changes.
10-12Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Upgrading to Prime Network 5.3 and Oracle 12.2.0.1 Upgrading to Prime Network 5.3 and Oracle 12.2.0.1 In-line RHEL Upgrade of 6.7, 6.8, 6.9, 6.10, 7.4, 7.5, and 7.7 with Prime Network 5.3 and Oracle 12.2.0.1 To perform the in-line upgrade from RHEL 6.x to 6.7, 6.8, 6.9, 6.10, and from 7.4 to 7.5 or 7.7 with Prime Network 5.3 and Oracle 12.2.0.1, follow the procedure provided below: Step 1 Upgrade to Prime Network 5.3 using Prime_Netw ork_upgrade directory from the temporary directory you created for Disk 3 and Disk 6. See Upgrading to Prime Network 5.3 from 5.2, 5.1, 5.0, 4.3.2, 4.3.1, 4.3 (Intermediate Steps), page 10-8. Step 2 Upgrade embedded Oracle 12 using the embedded_upgrade_12.2 directory from the temporary directory you created for Disk 3 and Disk 6. See Upgrading the Embedded Database to Oracle 12.2.0.1, page 10-43. Step 3 To perform the in-line upgrade from 6.x to 6.7, 6.8, 6.9, 6.10 and from 7.4 to 7.5 or 7.7 with latest Open ssl package, contact your System Admin for RHEL in-line upgrade. Step 4 After upgrading the RHEL, login with pnuser and verify the web server st atus and the compliance engine status. Step 5 Login as pnuser and restart A VM11 using the following command: anactl restart -avm 11 Note If you have Unit server attached with Gateway, fi rst upgrade the Gateway as mentioned in the above steps. Major RHEL Upgrade from 5.x to 6.x and 6.x to 7.x To upgrade the RHEL, follow the below steps: Step 1 Note down the pnuser name and Password, and Oracle userna me and Database profile that you had selected while installing Prime Network lower version. Step 2 Upgrade to Prime Network 5.3 from Prime Network lower version using Prime_Netw ork_upgrade directory from the temporary directory y ou created for Disk 3 and Disk 6. See Upgrading to Prime Network 5.3 from 5.2, 5.1, 5.0, 4.3.2, 4.3.1, 4.3 (Intermediate Steps), page 10-8. Step 3 Upgrade embedded Oracle 12 using the embedded_upgrade_12.2 directory from the temporary directory you created for Disk 3 and Disk 6. See Upgrading the Embedded Database to Oracle 12.2.0.1, page 10-43. Step 4 Login as pnuser and backup the embedded oracle da tabase and Prime Network data using the commands below: cd $Prime_Network_Home/Main/scripts/embedded_db run: emdbctl --backupcd $Prime_Network_Home/Main/scripts run: backup.pl backup-folder
10-13Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Upgrading to Prime Network 5.3 and Oracle 12.2.0.1 Note If you have operations reports in Gateway, unin stall it before performin g PN Database backup. Step 5 Copy the latest backup folder in $Prime_Network_Home/backup to your local server (for example, other than the server you are currently using). Step 6 Re-image the Gateway server to RHEL 6.x or 7.x version based on your current Prime Network RHEL version support. If you have a Unit server attached in the Gateway, re-image the Unit server to RHEL 6.x or 7.x version based on your current Prime Network RHEL version support. Note After you complete the re-imaging of the Gateway se rver to RHEL 6.x or 7.4, ensure to restore the backup data. Step 7 Install the Prime Network 5.3 Gateway, Oracle 12.2. 0.1 and the Unit server. If you have unit Gateway setup in PN lower version, use the pnuser name and Password, and Oracle username and Database profile that you had chosen while installing PN Gateway lower version. Note If you have installed the embedded Oracle in remote server for Prime Network lower version, install embedded database 12.2.0.1 on the same server for Prime Network 5.3. Step 8 Once installation is complete, login as a Prime user, back up the Prime network Gateway data and embedded database $PRIME_NETWORK_HOME/Main/scr ipts/embedded_db # emdbctl --backup. Please refer Prime Network 5.3 Administrator guide to know more on how to back up the Gateway data and the embedded database. Step 9 Navigate to $ANA_HOME/backup location, and remove the back up file folder in the location. Step 10 Paste the backup file folder which you alread y have in your local machine to the location $ANA_HOME/backup. Step 11 Provide the group owner permissions to the back up file directory and its contents as follows: chown - R pnuser: pngroup. Example: chown -R pn51:ana Step 12 Login as pnuser and restore the embedded oracle da tabase and Prime Network data using the commands below: cd $Prime_Network_Home/Main/scripts/embedded_db run: emdbctl --restore cd $Prime_Network_Home/Main/scripts run: restore.pl restore-folder Step 13 Once the restoring process is completed, check the status of Prime Network using the command: anactl status Step 14 Ensure that the status of both compliance engine and web server is up using the commands: cmctl status webcotrol status Step 15 Start the Unit server as a pnuser using the command: anactl start
10-14Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Upgrading to Prime Network 5.3 in Suite Mode Upgrading to Prime Network 5.3 in Suite Mode To upgrade to Prime Network 5.3 in suite mode, follow the procedure provided below: Step 1 Follow the upgrade procedures described below: Upgrading to Prime Network 5.3 from 5.2, 5.1, 5.0, 4.3.2, 4.3.1, 4.3 (Intermediate Steps), page 10-8In-line RHEL Upgrade of 6.7, 6.8, 6.9, 6.10, 7.4, 7.5, and 7.7 with Prime Network 5.3 and Oracle 12.2.0.1, page 10-12 Step 2 Integrate Prime Network in suite mode with Prime Ce ntral 2.1. Refer to the Integrating Prime Network with Prime Central topic of the Cisco Prime Central Quick Start Guide. Step 3 Upgrade to Prime Network Integration Layer 2. 2.0 from PN-IL earlier release. Refer to the Appendix 10, “Upgrading PN-IL in Standalone Mode” e topic of the Cisco Prime Network 5.3 Installation Guide Step 4 Integrate Prime Network Integration Layer 2.2.0 in suite mode with Prime Central 2.1. Refer to the Integrating the Prime Network Integration Layer with Prime Central topic of the Cisco Prime Central Quick Start Guide. Upgrading or Downgrading OS in HA Environment You can upgrade or downgrade RHEL version on the local cluster and install HA on all VMs. For example, you can install VM1 and VM2 in a local cluster and VM3 as Geo/DR in a Local with Geographical setup or Install VM1 in a local cluste r and VM3 as Geo/DR in a Geo only setup. VM1 is considered as Local or Primary VM, VM2 as secondary local cluster VM where both PN and oracle services not running, and VM3 as standby and distant Geo/DR. Upgrade of OS in HA Environment To perform the upgrade, follow the steps: Step 1 Install HA on a Local cluster VM with Geographical setup or Geographical only setup that has RHEL5.8 or 6.x on all VMs. Step 2 Shutdown the Primary VM (VM1) in case of both Local+HA local clusters without loss of generality. Step 3 Execute the following script on the StandBy VM (VM3): #perl primeha-fail Note After execution, VM3 will be your new Primary, and either VM1 or VM2 will be your new Geo/DR. Step 4 Upgrade the RHEL from 5.8 to 6.x or 7.7 on the local cluster. -or-Upgrade the RHEL from 6.x to 7.7 on the local cluster.
10-15Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Upgrading or Downgrading OS in HA Environment Complete the below steps: a.Take the backup of Prime Network, re-image th e server with RHEL 6.x or RHEL 7.7, install the Prime Network 5.3, and then restore the Prime Network backup. b.In case, if you are re-imaging the server with RHEL 7.7, ensure to configure the cluster with Pacemaker. For more information, see Configuring Clusters for Pa cemaker and Corosync Setup. Note In Prime Network 5.3, in-line upgrade is supported from RHEL 6.9 to RHEL 6.10. For support on new RHEL 6.10 installation with Prime Network 5.3, co ntact the account manager and the Advance Services representative. Step 5 Setup VM cluster (VM1 or VM2) for HA installation as shown below: a.Create /etc/hosts file b.Set permissions for both /tmp and /etc/shadow c.Mount build locations d.Mount again various 4 disk partitions without loss of generality on the primary VM as shown below: –mount/dev/sdb1/export1/ana-home/ana –mount/dev/sdb2/ora/opt/ora1 –mount/dev/sdb3/directio –mount/dev/sdb4/datafiles/dbf Step 6 Log in to the Primary VM (VM1) without lo ss of generality, and then navigate to /tmp path to unzip RH_ha.zip. Note Your new Geo/DR VM will be the new DR. Step 7 Navigate to /tmp/RH_ha path and then ex ecute the following script on VM1: #"perl resumeFromFailOver.pl –- reinstall_setup" from /tmp/RH_ha on the primary VM Note When the script fails, do the following: a. Add OVERRIDE_SWAP =true to the file /tmp/RH_ha/auto_install_RH.ini b. Execute perl install_Prime_HA.pl-autoconf auto_install_RH.ini Step 8 Execute perl resumeFromFailOver.pl --reconfigure_setup also on the primary VM1. Step 9 Log in to standby VM (VM3) and navigate to /tmp/RH_ha path. Step 10 Execute “ perl resumeFromFailOver.pl --setup_replication” on the standby VM (VM3). Step 11 To upgrade OS on your new primary VM(VM3) to RHEL 6. 5 or 6.7 or 6.8 or 7.4, repeat steps 2 through 10. a.Shutdown VM3 and execute perl primeha –fail script on Local VM (VM1). b.Upgrade OS on VM3 to 6.7, 6.8, 6.9, 6.10, 7.4, or 7.5.
10-16Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Upgrading or Downgradin g OS in HA Environment Note In Prime Network 5.3, in-line upgrade is supported from RHEL 6.9 to RHEL 6.10. For support on new RHEL 6.10 installation with Prime Netw ork 5.3, contact the account manager and the Advance Services representative. c.Setup VM3 to install HA If VM3. d.Execute the scripts perl resumeFromFailOver .pl –-reinstall_setup and perl resumeFromFailOver.pl --reconfigure_setup on VM3. e.Execute perl resumeFromFailOver.pl --setup_replication on VM1. Downgrade OS in HA Environment To perform the downgrade follow the steps: Step 1 Install HA on a Local cluster VM with Geographica l setup or Geographical only setup that has RHEL 6.5, 6.7, 6.8, 7.4, 7.5, or 7.7 on all VMs. Step 2 Shutdown the Primary VM without loss of gene rality in case of both Local +HA clusters. Step 3 Execute the following script on the StandBy VM (VM3): #perl primeha-fail Note After execution, VM3 will be your new Primary, and either VM1 or VM2 will be your new Geo/DR. Step 4 Downgrade the RHEL from 7.7 to 6.x on the local cluster. Note Downgrade to RHEL 5.8 is not supported. Step 5 Setup VM cluster for the HA installation as shown below: a.Create /etc/hosts file b.Set permissions for both /tmp and /etc/shadow c.Mount build locations d.Mount again various 4 disk partitions without loss of generality on the primary VM as shown below: –mount/dev/sdb1/export1/ana-home/ana –mount/dev/sdb2/ora/opt/ora1 –mount/dev/sdb3/directio –mount/dev/sdb4/datafiles/dbf Step 6 Login to the Primary VM without loss of generality, and then navigate to /tmp path to unzip RH_ha.zip. 
10-17Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Configuring Clusters for Pacemaker and Corosync Setup Note Your new Geo/DR VM will be the new DR. Step 7 Navigate to /tmp/RH_ha path and then execute the following script: #"perl resumeFromFailOver.pl –- reinstall_setup" from /tmp/RH_ha on the primary VM Note When the script fails, do the following: a. Add OVERRIDE_SWAP =true to the file /tmp/RH_ha/rf_auto_install_RH.ini b. Execute perl install_Prime_HA.pl-autoconf rf_auto_install_RH.in Step 8 Execute perl resumeFromFailOver.pl --reconfigure_setup also on the primary VM. Step 9 Login to standby VM and navigate to /tmp/RH_ha path. Step 10 Execute perl resumeFromFailOver.pl--setup_replication on the standby VM. Step 11 To downgrade OS on your new primary VM to RHEL6.x, repeat steps 2 through 10. a.Shutdown VM3 and execute perl primeha –fail script on Local VM (VM1) b.Downgrade OS on VM3 to RHEL 6.x c.Setup VM3 to install HA d.Execute the scripts perl resumeFromFailOver .pl –-reinstall_setup and perl resumeFromFailOver.pl --reconfigure_setup on VM3 e.Execute perl resumeFromFailOver.pl --setup_replication on VM1. Configuring Clusters for Pacemaker and Corosync Setup From RHEL7.2 onwards Pacemaker is the defaul t cluster resource manager. Pacemaker provides maximum availability for your cluster services and resources by detecting and recovering node and resource-level failures. It uses messaging and membership capabilities provided by Corosync to keep the resource availability on any of the cluster nodes Corosync is the open source cluster engine that ma nages cluster interconnect and maintains the same cluster configuration across all the cluster nodes. All the configuration changes will be replicated to other node using corosync cluster engine. Pace maker and Corosync are powerful open source technologies that completely replaces the CMAN and RGManager technologies from previous Redhat cluster releases. Use the following procedure to configure clusters: Step 1 Install the required packages for Pacemaker on both nodes. yum-config-manager --enable rhel-7-server-optional-rpms yum install pcs fence-agents-all yum install lvm2-cluster gfs2-utils yum install nfs-utils rpcbindyum install pacemaker pcs Step 2 (Optional) Verify Pacemaker /Corosync /pcs is available or not-a | grep pacemaker. rpm -q -a | grep corosync
10-18Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Configuring Clusters for Pacemaker and Corosync Setup rpm -q -a | grep pcs Step 3 Stop the firewalld services and Network Manager on both nodes. systemctl disable firewalld.service systemctl stop firewalld.service systemctl stop NetworkManager.service Step 4 Disable selinux on both nodes. update SELINUX=enforcing  permissive [root@pn53-qa-ha-01 /]# setenforce 0 [root@pn53-qa-ha-01 /]# getenforce permissiveOR Configure SELINUX=disabled in the /etc/selinux/config file: vi /etc/selinux/config Step 5 (Optional) Verify Hostnames on both nodes. [root@pn53-qa2-ha-01 /]# cat /etc/hostname pn50-qa2-ha-01 [root@pn53-qa2-ha-02 /]# cat /etc/hostname pn50-qa2-ha-02 Step 6 (Optional) Verify system configurations. cat /etc/sysconfig/network-scripts/ifcfg-ens192 Step 7 Add Hostnames, IP addresses and Virtua l IPs on both nodes (Vi /etc/hosts) [root@pn53-qa2-ha-01 /]# vi /etc/hosts 127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4 ::1 localhost localhost.localdomain localhost6 localhost6.localdomain6 10.56.57.204 pn51-qa2-ha-01 pn52-qa2-ha-01.cisco.com 10.56.57.205 pn51-qa2-ha-02 pn52-qa2-ha-02.cisco.com 10.56.57.212 ana-cluster-ana10.56.57.211 ana-cluster-oracle [root@pn53-qa2-ha-02 /]# vi /etc/hosts Step 8 Set the cluster password on both the nodes. passwd hacluster Step 9 Start and enable the pcsd sevice on both nodes. systemctl start pcsd.service systemctl enable pcsd.service Step 10 Authenticate and authorize the nodes, any one node pcs cluster auth <Node1> <Node2> (Proper “HOSTNAME” should be given as it is case sensitive) Eg: pcs cluster auth pn52-qa2-ha-01 pn52-qa2-ha-02. Step 11 Start the cluster on one of the nodes. Execute the below command: pcs cluster setup --start --name <Cluster_Name> <Node1> <Node2> Note Node1 and Node2 can accept hostname and is case sensitive. For example, pcs cluster setup --start --name hacluster pn 53-qa2-ha-01 pn52-qa2-ha-02
10-19Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Configuring Clusters for Pacemaker and Corosync Setup Step 12 Enable a cluster with the speci fied command on both nodes. pcs cluster enable – all Step 13 Log in to the Cluster GUI. For example, https:// <Anynode>:2224;https://10.56.57.204:2224 a.Enter the username and password. b.Click Login o access the HAcluster. The High Availability Management window appears. Figure 10-1 High Avail ability Login Screen Step 14 To add a Hostname to an existing Cluster GUI, follow the below steps: a.Click the MANAGE CLUSTERS tab, and then click Add Existing. Figure 10-2 Add Existing Clusters b.In the Add Existing Cluster dialog box, enter th e relevant hostname/IP of a node, and then click Add Existing. Note To create a new cluster, click Create New. Step 15 To view individual Cluster information, follow the below steps: a.In the Left pane, check a cluster name to view the nodes, resources, and fence-devices information of the selected cluster. 
10-20Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Verifying the Prime Network Operations Reports Upgrade from 4.0 to 5.3 Note Prime Network installation does not support fencing. Fencing can be configured manually as per the instructions in RHEL documentation. Step 16 In the right pane, under the Nodes area, click any one node and view the Cluster Status in GUI or in CLI. Verifying the Prime Network Operations Reports Upgrade from 4.0 to 5.3 Note This section is applicable only for users who has purchased the Prime Network Operation Reports tool prior to May 2018 and are upgrading from previous releases. When upgrading the Prime Network Operations Reports from 4.0 to 5.3, you must manually enter the following URL of Operations Reports in the Address field: https:// < gateway-IP >:< port-number >/ prime-network-reports Where, Gateway-IP—gateway IP of th e Operations Reports portal. Port-number—SSL port number that was configured du ring installation. The default SSL port is 8445. Note In Prime Network, Operations reports application us es TSL 1.0. This is because Pentaho does not allow TSL 1.1 and 1.2 versions and SSL 3. 0 and 2.0 versions with RHEL 6.8. 
10-21Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Rolling Back to Earlier Prime Network Version from Prime Network 5.3 Including Oracle Rollback Rolling Back to Earlier Prime Network Version from Prime Network 5.3 Including Oracle Rollback This section describes the procedure to rollback to earlier versions of Pr ime Network and Oracle from Prime Network 5.3 and Oracle 12.2.0.1. Note You must do Oracle rollback before rollin g back to an earlier Prime Network version. Refer the following table to decide which Oracle version to rollback to: Table 10-4 Oracle Rollback Procedures After completing Oracle rollback, rollback to an earlier Prime Network version. Refer Rolling Back to Earlier Prime Network Version, page 10-34 .If you are rolling back to Prime Network version Rollback to this Oracle versionRefer the following procedures in order In 
- Standalone or 
- Local HA 5.2, 5.1, 5.0 Oracle 12.1.0.2 
- Prerequisites, page 10-22 
- Standalone and Local HA: Rollback to Oracle 12.1.0.2, page 10-24 4.3.2, 4.3.1, 4.3 Oracle 12.1.0.1 
- Prerequisites, page 10-22 
- Standalone and Local HA: Rollback to Oracle 12.1.0.1, page 10-26 In 
- Geo DR or 
- Local HA + Geo DR 5.2, 5.1, 5.0 Oracle 12.1.0.2 
- Prerequisites, page 10-22 
- Geo DR and Local HA + Geo DR: Rollback to Oracle 12.1.0.2, page 10-28 4.3.2, 4.3.1, 4.3 Oracle 12.1.0.1 
- Prerequisites, page 10-22 
- Geo DR and Local HA + Geo DR: Rollback to Oracle 12.1.0.1, page 10-31
10-22Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Rolling Back to Earlier Prime Network Version from Prime Network 5.3 Including Oracle Rollback Rolling Back to Earlier Oracle Version Prerequisites Step 1 Ensure that the Prime Network backup has been taken as per Step 4 of Table: Gateway Pre-Upgrade Tasks. Step 2 Execute the following command as root user to switch to oracle user: su - <oracleuser> Step 3 Change directory to $ORACLE_BASE/backup and record the time stamp of earlier Prime Network version backup (which is Year: 2019 Month: 02 Date: 26 HR:15 MIN: 54 in the example below) and the file name. Note For Oracle rollback in Geo DR and Loca l HA, the path for backup file is /ora/opt/ora1/backup. For example, oracle@pn-sgw-02-lnx [~]#cd $ORACLE_BASE/ oracle@pn-sgw-02-lnx [~]# cd backup oracle@pn-sgw-02-lnx [~/backup]# ls -la total 5913504 drwxr-xr-x. 2 oracle oinstall 4096 Feb 26 15:54. drwxr-x---. 16 oracle oinstall 4096 Feb 25 20:41 ..-rw-r-----. 1 oracle dba 180060160 Feb 25 15:38 ANADB_before_upgrade_cold_07tqpc3p_1_1 -rw-r-----. 1 oracle dba 10125312 Feb 26 15:45 cfc-4025296251-20190226-01-rw-r-----. 1 oracle dba 10125312 Feb 26 15:54 cfc-4025296251-20190226-02 -rw-r-----. 1 oracle dba 1114112 Feb 25 20:21 CONTROLFILE_before_upgrade.rman -rw-r--r--. 1 oracle dba 1393 Feb 25 20:18 PFILE_before_upgrade.manual-rw-r-----. 1 oracle dba 10043392 Feb 25 20:21 snapcf_anadb.f -rw-r-----. 1 oracle dba 98304 Feb 25 20:20 SPFILE_before_upgrade.rman Step 4 (Applicable only for Local HA and Local HA + Geo DR) On Active server, freeze the cluster configured serv ices (ana and oracle_db) by executing the following command as the root user: clusvcadm -Z <service-name> (for RHEL 6.x) pcs resource unmanage <service-name> (for RHEL 7.x) Step 5 (Applicable only for Local HA + Geo DR) a.On both Active and Standby server, navigate to the location (for Oracle 12.1.0.2) cd /ora/opt/ora1/oracle/product/12.1.0.2/db_1/network/admin/ (for Oracle 12.1.0.1) cd /ora/opt/ora1/oracle/product/12.1.0.1/db_1/network/admin/ and edit the file tnsnames.ora to match the below content: Note The line to be edited in file tnsnames.ora is shown in bold below. ----------------------------------------------------------------------------------------------------------- # tnsnames.ora Network Configuration File: /ora/opt/ora1/oracle/product/12.1.0.2/db_1/network/admin/tnsnames.ora # Generated by Oracle configuration tools.
10-23Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Rolling Back to Earlier Prime Network Version from Prime Network 5.3 Including Oracle Rollback ANADB = (DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = 10.56.57.214)(PORT = 1521)) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = anadb) ) ) ANADB_SB = (DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = 10.56.57.199)(PORT = 1521)) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = anadb_sb) ) ) ~ ---------------------------------------------------------------------------------------------------------- b.On Standby server, navigate to the location (for Oracle 12.1.0.2) cd /ora/opt/ora1/oracle/product/12.1.0.2/db_1/network/admin/ (for Oracle 12.1.0.1) cd /ora/opt/ora1/oracle/product/12.1.0.1/db_1/network/admin/ and edit the file listener.ora to match the below content: Note The line to be added in file listener.ora are shown in bold below. ----------------------------------------------------------------------------------------------------------- # listener.ora Network Configuration File: /ora/opt/ora1/oracle/product/12.1.0.2/db_1/network/admin/listener.ora # Generated by Oracle configuration tools. LISTENER = (DESCRIPTION_LIST = (DESCRIPTION = (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1521)) (ADDRESS = (PROTOCOL = TCP)(HOST = pn-ha-qa-pn50-dr.cisco.com)(PORT = 1521)) ) ) SID_LIST_LISTENER = (SID_LIST = (SID_DESC =
10-24Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Rolling Back to Earlier Prime Network Version from Prime Network 5.3 Including Oracle Rollback (GLOBAL_DBNAME=anadb) (SID_NAME = anadb) (ORACLE_HOME= /ora/opt/ora1/oracle/product/12.1.0.2/db_1) ) (SID_DESC = (GLOBAL_DBNAME=anadb_sb) (SID_NAME = anadb) (ORACLE_HOME= /ora/opt/ora1/oracle/product/12.1.0.2/db_1) ) )ADR_BASE_LISTENER = /ora/opt/ora1/oracle ~ ----------------------------------------------------------------------------------------------------------- Standalone and Local HA: Rollback to Oracle 12.1.0.2 Step 1 Execute the following commands as a pnuser to stop the Prime Network gateway: networkctl stop Step 2 To rollback Oracle 12.2.0 .1 to Oracle 12.1.0.2: a.Execute the following commands: su – <oracleuser> cd $ORACLE_HOME/rdbms/adminsqlplus / as sysdba SHUTDOWN IMMEDIATE startup downgrade pfile=<pfilename>; To retrieve the pfilename, switch to oracle user and go to pfile location: Note In case of Local HA rolback, the path for pfile will be cd /ora/opt/ora1 /oracle/admin/anadb/pfile/ oracle@pn-sgw-02-lnx [~]# cd /export/home/oracle/admin/anadb/pfile/ oracle@pn-sgw-02-lnx [~/admin/anadb/pfile]# ls init.ora.1242019133348 For example, <pfilename> = /export/home/oracle/admin/anadb/pfile/init.ora.1242019133348 SQL> startup downgrade pfile=/export/home/oracle/admin/anadb/pfile/init.ora.1242019133348
10-25Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Rolling Back to Earlier Prime Network Version from Prime Network 5.3 Including Oracle Rollback SPOOL downgrade.log @catdwgrd.sqlSPOOL OFF SHUTDOWN IMMEDIATE Exit b.Copy the three files, namely cshrc, inventory.xml, and oratab, and execute source command as follows: oracle@pn-sgw-02-lnx [~]# cd /etc oracle@pn-sgw-02-lnx [/etc]# ls -la | grep oratab -rw-rw-r--. 1 oracle dba 791 Feb 26 12:03 oratab -rw-r--r--. 1 root root 789 Feb 26 12:03 oratab.12.1.0.2oracle@pn-sgw-02-lnx [/etc]# cp oratab.12.1.0.2 oratab oracle@pn-sgw-02-lnx [/etc]# cd oracle@pn-sgw-02-lnx [~]# ls -la | grep .cshrc-rw-r--r--. 1 oracle oinstall 1306 Feb 26 12:03 .cshrc -rw-r--r--. 1 root root 1304 Feb 26 12:03 .cshrc.12.1.0.2 oracle@pn-sgw-02-lnx [~]# cp .cshrc.12.1.0.2 .cshrc oracle@pn-sgw-02-lnx [~]# cd oracle@pn-sgw-02-lnx [~]# cd oraInventory/ContentsXML/oracle@pn-sgw-02-lnx [~/oraInventory/ContentsXML]# ls -la | grep inventory.xml -rw-rw----. 1 oracle dba 573 Feb 26 12:00 inventory.xml -rw-rw----. 1 oracle dba 478 Feb 26 11:59 inventory.xml.12.1.0.2oracle@pn-sgw-02-lnx [~/oraInventory/ContentsXML]# cp inventory.xml.12.1.0.2 inventory.xml oracle@pn-sgw-02-lnx [~/oraInventory/ContentsXML]# cd oracle@pn-sgw-02-lnx [~]# source .cshrc c.Replace the sqlnet.ora file available at location $ORACLE_BASE/product/12.1.0.2/db_1/network/admin with the backup file that you took in Before You Begin, page 10-8 of Upgrading to Prime Network 5.3 from 5.2, 5.1, 5.0, 4.3.2, 4.3.1, 4.3 (Intermediate Steps), page 10-8. d.Execute the following commands: cd $ORACLE_HOME/rdbms/admin sqlplus / as sysdba STARTUP UPGRADE SPOOL reload.log@catrelod.sql SPOOL OFF SHUTDOWN IMMEDIATESTARTUP @utlrp.sql e.Switch to Prime Network user an d execute the following commands: pn432@pn-sgw-02-lnx [~]% cd Main/scripts/embedded_db/
10-26Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Rolling Back to Earlier Prime Network Version from Prime Network 5.3 Including Oracle Rollback pn432@pn-sgw-02-lnx [~/Main/scripts/embedded_db]% emdbctl --update_oracle_home pn432@pn-sgw-02-lnx [~]% networkctl start f.Switch to oracle user and restart the lsnrctl status: lsnrctl stop lsnrctl start Step 3 Rollback Prime Network and restore the database as described in Rolling Back to Earlier Prime Network Version, page 10-34. Step 4 (Applicable only for Local HA) Unfreeze the cluster configured se rvices (ana and oracle_db) by executing the following command as the root user: clusvcadm -U <service-name> (for RHEL 6.x) pcs resource manage <service-name> (for RHEL 7.x) Standalone and Local HA: Rollback to Oracle 12.1.0.1 Step 1 Execute the following commands as a pnuser to stop the Prime Network gateway: networkctl stop Step 2 To rollback Oracle 12.2.0 .1 to Oracle 12.1.0.1: a.Execute the following commands: su – <oracleuser> cd $ORACLE_HOME/rdbms/admin sqlplus / as sysdba SHUTDOWN IMMEDIATE startup downgrade pfile=<pfilename>; To retrieve the pfilename, switch to oracle user and go to pfile location: Note In case of Local HA rolback, the path for pfile will be cd /ora/opt/ora1/ oracle/admin/anadb/pfile/ oracle@pn-sgw-02-lnx [~]# cd /export/home/oracle/admin/anadb/pfile/ oracle@pn-sgw-02-lnx [~/admin/anadb/pfile]# lsinit.ora.1242019133348 For example, <pfilename> = /export/home/oracle/admin/anadb/pfile/init.ora.1242019133348 SQL> startup downgrade pfile=/export/home/oracle/admin/anadb/pfile/init.ora.1242019133348 SPOOL downgrade.log
10-27Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Rolling Back to Earlier Prime Network Version from Prime Network 5.3 Including Oracle Rollback @catdwgrd.sql SPOOL OFFSHUTDOWN IMMEDIATE Exit b.Copy the three files, namely cshrc, inventory.xml, and oratab, and execute source command as follows: oracle@pn-sgw-02-lnx [~]# cd /etc oracle@pn-sgw-02-lnx [/etc]# ls -la | grep oratab-rw-rw-r--. 1 oracle dba 791 Feb 26 12:03 oratab -rw-r--r--. 1 root root 789 Feb 26 12:03 oratab.12.1.0.1 oracle@pn-sgw-02-lnx [/etc]# cp oratab.12.1.0.1 orataboracle@pn-sgw-02-lnx [/etc]# cd oracle@pn-sgw-02-lnx [~]# ls -la | grep .cshrc -rw-r--r--. 1 oracle oinstall 1306 Feb 26 12:03 .cshrc-rw-r--r--. 1 root root 1304 Feb 26 12:03 .cshrc.12.1.0.1 oracle@pn-sgw-02-lnx [~]# cp .cshrc.12.1.0.1 .cshrc oracle@pn-sgw-02-lnx [~]# cd oracle@pn-sgw-02-lnx [~]# cd oraInventory/ContentsXML/ oracle@pn-sgw-02-lnx [~/oraInventory/ContentsXML]# ls -la | grep inventory.xml-rw-rw----. 1 oracle dba 573 Feb 26 12:00 inventory.xml -rw-rw----. 1 oracle dba 478 Feb 26 11:59 inventory.xml.12.1.0.1 oracle@pn-sgw-02-lnx [~/oraInventory/ContentsXML]# cp inventory.xml.12.1.0.1 inventory.xml oracle@pn-sgw-02-lnx [~/oraInventory/ContentsXML]# cdoracle@pn-sgw-02-lnx [~]# source .cshrc c.Replace the sqlnet.ora file available at location $ORACLE_BASE/product/12.1.0.1/db_1/network/admin with the backup file that you took in Before You Begin, page 10-8 of Upgrading to Prime Network 5.3 from 5.2, 5.1, 5.0, 4.3.2, 4.3.1, 4.3 (Intermediate Steps), page 10-8 d.Execute the following commands: cd $ORACLE_HOME/rdbms/admin sqlplus / as sysdba STARTUP UPGRADE SPOOL reload.log@catrelod.sql SPOOL OFF SHUTDOWN IMMEDIATESTARTUP @utlrp.sql e.Switch to Prime Network user an d execute the following commands: pn432@pn-sgw-02-lnx [~]% cd Main/scripts/embedded_db/
10-28Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Rolling Back to Earlier Prime Network Version from Prime Network 5.3 Including Oracle Rollback pn432@pn-sgw-02-lnx [~/Main/scripts/embedded_db]% emdbctl --update_oracle_home pn432@pn-sgw-02-lnx [~]% networkctl start f.Switch to oracle user and restart the lsnrctl status: lsnrctl stop lsnrctl start Step 3 Rollback Prime Network and restore the database as described in Rolling Back to Earlier Prime Network Version, page 10-34. Step 4 (Applicable only for Local HA) Unfreeze the cluster configured se rvices (ana and oracle_db) by executing the following command as the root user: clusvcadm -U <service-name> (for RHEL 6.x) pcs resource manage <service-name> (for RHEL 7.x) Geo DR and Local HA + Geo DR: Rollback to Oracle 12.1.0.2 Step 1 Execute the following commands to move the Standby server from OPEN_MODE to MOUNTED mode: su – <oracleuser> sqlplus / as sysdba SHUTDOWN IMMEDIATEstartup mount select open_mode from v$database; OPEN_MODE-------------------- MOUNTED exit Step 2 Execute the following commands as pnuser to stop the Prime Network gateway on both Active and Standby server: networkctl stop Step 3 To rollback Oracle 12.2.0 .1 to Oracle 12.1.0.2: Note After logging in to SQL, the following three additional commands must be executed on both servers after each SQL command to ensure that the sequence generated in Active server is synced with the Standby server: On Active server: select thread#, max(sequence#) "Last Primary Seq Generated" from v$archived_log val, v$database vdb where val.resetlogs_change# = vdb.resetlogs_change# group by thread# order by 1;
10-29Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Rolling Back to Earlier Prime Network Version from Prime Network 5.3 Including Oracle Rollback On Standby server: select thread#, max(sequence#) "Last Standby Seq Received" from v$archived_log val, v$database vdb where val.resetlogs_change# = vdb.resetlogs_change# group by thread# order by 1; select thread#, max(sequence#) "Last Standby Seq Applied" from v$archived_log val, v$database vdb where val.resetlogs_change# = vdb.resetlogs_change# and val.applied in ('YES','IN-MEMORY') group by thread# order by 1; a.Execute the following commands on both servers unless stated otherwise: su – <oracleuser> cd $ORACLE_HOME/rdbms/admin sqlplus / as sysdbaSHUTDOWN IMMEDIATE startup downgrade pfile=<pfilename>; To retrieve the pfilename, switch to oracle user and go to pfile location: oracle@pn-sgw-02-lnx [~]# cd /ora/opt/ora1/oracle/admin/anadb/pfile/ oracle@pn-sgw-02-lnx [~/admin/anadb/pfile]# ls init.ora.1242019133348 For example, <pfilename> = /ora/opt/ora1 /oracle/admin/anadb/pfile/init.ora.1242019133348 SQL> startup downgrade pfile= /ora/opt/ora1 /oracle/admin/anadb/pfile/init.ora.1242019133348 SPOOL downgrade.log @catdwgrd.sql [execute this command only on Active server] SPOOL OFFSHUTDOWN IMMEDIATE Exit b.Copy the three files on both servers, namely cshrc, inventory.xml, and oratab, and execute source command on both servers as follows: oracle@pn-sgw-02-lnx [~]# cd /etc oracle@pn-sgw-02-lnx [/etc]# ls -la | grep oratab-rw-rw-r--. 1 oracle dba 791 Feb 26 12:03 oratab -rw-r--r--. 1 root root 789 Feb 26 12:03 oratab.12.1.0.2 oracle@pn-sgw-02-lnx [/etc]# cp oratab.12.1.0.2 orataboracle@pn-sgw-02-lnx [/etc]# cd oracle@pn-sgw-02-lnx [~]# ls -la | grep .cshrc -rw-r--r--. 1 oracle oinstall 1306 Feb 26 12:03 .cshrc-rw-r--r--. 1 root root 1304 Feb 26 12:03 .cshrc.12.1.0.2 oracle@pn-sgw-02-lnx [~]# cp .cshrc.12.1.0.2 .cshrc oracle@pn-sgw-02-lnx [~]# cdoracle@pn-sgw-02-lnx [~]# cd oraInventory/ContentsXML/ oracle@pn-sgw-02-lnx [~/oraInventory/ContentsXML]# ls -la | grep inventory.xml
10-30Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Rolling Back to Earlier Prime Network Version from Prime Network 5.3 Including Oracle Rollback -rw-rw----. 1 oracle dba 573 Feb 26 12:00 inventory.xml -rw-rw----. 1 oracle dba 478 Feb 26 11:59 inventory.xml.12.1.0.2oracle@pn-sgw-02-lnx [~/oraInventory/ContentsXML]# cp inventory.xml.12.1.0.2 inventory.xml oracle@pn-sgw-02-lnx [~/oraInventory/ContentsXML]# cd oracle@pn-sgw-02-lnx [~]# source .cshrc c.Replace the sqlnet.ora file available at location $ORACLE_BASE/product/12.1.0.1/db_1/network/admin with the backup file that you took in Before You Begin, page 10-8 of Upgrading to Prime Network 5.3 from 5.2, 5.1, 5.0, 4.3.2, 4.3.1, 4.3 (Intermediate Steps), page 10-8 d.Execute the following commands on both servers unless stated otherwise: cd $ORACLE_HOME/rdbms/admin sqlplus / as sysdba STARTUP UPGRADESPOOL reload.log @catrelod.sql [execute this command only on Active server] SPOOL OFF SHUTDOWN IMMEDIATE STARTUP [execute this command only on Active server] STARTUP MOUNT [execute this command only on Standby server] @utlrp.sql [execute this command only on Active server] Note Before performing Step 4, execute the three SQL commands mentioned in the note of Step 3To rollback Oracle 12.2.0.1 to Oracle 12.1.0.2:, page 10-28 to ensure that the sequence generated in Active server is synced with the Standby server. Step 4 Check if the sequence number is same on both se rvers and execute the foll owing commands only on Standby server to move the serv er from OPEN_MODE to READ ONLY: a. Start mrp process ALTER DATABASE RECOVER MANAGED STANDBY DATABASE USING CURRENT LOGFILE DISCONNECT FROM SESSION; b.Stop mrp process ALTER DATABASE RECOVER MANAGED STANDBY DATABASE CANCEL; c.Change to READ ONLY ALTER DATABASE OPEN READ ONLY; d.Start mrp process ALTER DATABASE RECOVER MANAGED STANDBY DATABASE USING CURRENT LOGFILE DISCONNECT FROM SESSION; Step 5 Exit SQL and Oracle user on both servers. Step 6 On Active server, login as pnuser and execute the foll owing commands under /Main/scripts/embedded_db: emdbctl --update_oracle_home For example,
10-31Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Rolling Back to Earlier Prime Network Version from Prime Network 5.3 Including Oracle Rollback pn432@pn-sgw-02-lnx [~/Main/scripts/embedded_db]% emdbctl --update_oracle_home pn432@pn-sgw-02-lnx [~]% networkctl start Step 7 Switch to oracle user and restart th e lsnrctl status on both servers: lsnrctl stop lsnrctl start Step 8 Rollback Prime Network and restore the database as described in Rolling Back to Earlier Prime Network Version, page 10-34. Step 9 (Applicable only for Local HA + Geo DR) Unfreeze the cluster configured services (ana an d oracle_db) by executing the following command as the root user: clusvcadm -U <service-name> (for RHEL 6.x) pcs resource manage <service-name> (for RHEL 7.x) Geo DR and Local HA + Geo DR: Rollback to Oracle 12.1.0.1 Step 1 Execute the following commands to move the St andby server from OPEN_M ODE to MOUNTED mode: su – <oracleuser> sqlplus / as sysdba SHUTDOWN IMMEDIATEstartup mount select open_mode from v$database; OPEN_MODE-------------------- MOUNTED exit Step 2 Execute the following commands as pnuser to stop the Prime Network gateway on both Active and Standby server: networkctl stop Step 3 To rollback Oracle 12.2.0 .1 to Oracle 12.1.0.1: Note After logging in to SQL, the following three additional commands must be executed on both servers after each SQL command to ensure that the sequence generated in Active server is synced with the Standby server: On Active server: select thread#, max(sequence#) "Last Primary Seq Generated" from v$archived_log val, v$database vdb where val.resetlogs_change# = vdb.resetlogs_change# group by thread# order by 1; On Standby server: select thread#, max(sequence#) "Last Standby Seq Received" from v$archived_log 
10-32Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Rolling Back to Earlier Prime Network Version from Prime Network 5.3 Including Oracle Rollback val, v$database vdb where val.resetlogs_change# = vdb.resetlogs_change# group by thread# order by 1; select thread#, max(sequence#) "Last Standby Seq Applied" from v$archived_log val, v$database vdb where val.resetlogs_change# = vdb.resetlogs_change# and val.applied in ('YES','IN-MEMORY') group by thread# order by 1; a.Execute the following commands on both servers unless stated otherwise: su – <oracleuser> cd $ORACLE_HOME/rdbms/admin sqlplus / as sysdbaSHUTDOWN IMMEDIATE startup downgrade pfile=<pfilename>; To retrieve the pfilename, switch to oracle user and go to pfile location: oracle@pn-sgw-02-lnx [~]# cd /ora/opt/ora1/oracle/admin/anadb/pfile/ oracle@pn-sgw-02-lnx [~/admin/anadb/pfile]# ls init.ora.1242019133348 For example, <pfilename> = /ora/opt/ora1 /oracle/admin/anadb/pfile/init.ora.1242019133348 SQL> startup downgrade pfile= /ora/opt/ora1 /oracle/admin/anadb/pfile/init.ora.1242019133348 SPOOL downgrade.log @catdwgrd.sql [execute this command only on Active server] SPOOL OFF SHUTDOWN IMMEDIATE Exit b.Copy the three files on both servers, namely cshrc, inventory.xml, and oratab, and execute source command on both servers as follows: oracle@pn-sgw-02-lnx [~]# cd /etc oracle@pn-sgw-02-lnx [/etc]# ls -la | grep oratab -rw-rw-r--. 1 oracle dba 791 Feb 26 12:03 oratab-rw-r--r--. 1 root root 789 Feb 26 12:03 oratab.12.1.0.1 oracle@pn-sgw-02-lnx [/etc]# cp oratab.12.1.0.1 oratab oracle@pn-sgw-02-lnx [/etc]# cdoracle@pn-sgw-02-lnx [~]# ls -la | grep .cshrc -rw-r--r--. 1 oracle oinstall 1306 Feb 26 12:03 .cshrc -rw-r--r--. 1 root root 1304 Feb 26 12:03 .cshrc.12.1.0.1oracle@pn-sgw-02-lnx [~]# cp .cshrc.12.1.0.1 .cshrc oracle@pn-sgw-02-lnx [~]# cd oracle@pn-sgw-02-lnx [~]# cd oraInventory/ContentsXML/oracle@pn-sgw-02-lnx [~/oraInventory/ContentsXML]# ls -la | grep inventory.xml -rw-rw----. 1 oracle dba 573 Feb 26 12:00 inventory.xml -rw-rw----. 1 oracle dba 478 Feb 26 11:59 inventory.xml.12.1.0.1
10-33Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Rolling Back to Earlier Prime Network Version from Prime Network 5.3 Including Oracle Rollback oracle@pn-sgw-02-lnx [~/oraInventory/ContentsXML]# cp inventory.xml.12.1.0.1 inventory.xml oracle@pn-sgw-02-lnx [~/oraInventory/ContentsXML]# cd oracle@pn-sgw-02-lnx [~]# source .cshrc c.Replace the sqlnet.ora file available at location $ORACLE_BASE/product/12.1.0.1/db_1/network/admin with the backup file that you took in Before You Begin, page 10-8 of Upgrading to Prime Network 5.3 from 5.2, 5.1, 5.0, 4.3.2, 4.3.1, 4.3 (Intermediate Steps), page 10-8. d.Execute the following commands on both servers unless stated otherwise: cd $ORACLE_HOME/rdbms/admin sqlplus / as sysdbaSTARTUP UPGRADE SPOOL reload.log @catrelod.sql [execute this command only on Active server] SPOOL OFF SHUTDOWN IMMEDIATE STARTUP [execute this command only on Active server] STARTUP MOUNT [execute this command only on Standby server] @utlrp.sql [execute this command only on Active server] Note Before performing Step 4, execute the three SQL commands mentioned in the note of Step 3To rollback Oracle 12.2.0.1 to Oracle 12.1.0.1:, page 10-31 to ensure that the sequence generated in Active server is synced with the Standby server. Step 4 Check if the sequence number is same on both se rvers and execute the foll owing commands only on Standby server to move the serv er from OPEN_MODE to READ ONLY: a. Start mrp process ALTER DATABASE RECOVER MANAGED STANDBY DATABASE USING CURRENT LOGFILE DISCONNECT FROM SESSION; b.Stop mrp process ALTER DATABASE RECOVER MANAGED STANDBY DATABASE CANCEL; c.Change to READ ONLY ALTER DATABASE OPEN READ ONLY; d.Start mrp process ALTER DATABASE RECOVER MANAGED STANDBY DATABASE USING CURRENT LOGFILE DISCONNECT FROM SESSION; Step 5 Exit SQL and Oracle user on both servers. Step 6 On Active server, login as pnuser and execute the foll owing commands under /Main/scripts/embedded_db: emdbctl --update_oracle_home For example, pn432@pn-sgw-02-lnx [~/Main/scripts/embedded_db]% emdbctl --update_oracle_home
10-34Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Rolling Back to Earlier Prime Network Version from Prime Network 5.3 Including Oracle Rollback pn432@pn-sgw-02-lnx [~]% networkctl start Step 7 Switch to oracle user and restart th e lsnrctl status on both servers: lsnrctl stop lsnrctl start Rollback Prime Network and restore the database as described in Rolling Back to Earlier Prime Network Version, page 10-34. Step 8 (Applicable only for Local HA + Geo DR) Unfreeze the cluster configured se rvices (ana and oracle_db) by executing the following command as the root user: clusvcadm -U <service-name> (for RHEL 6.x) pcs resource manage <service-name> (for RHEL 7.x) Rolling Back to Earlier Prime Network Version Rollback to Prime Network 5.2, 5.1, 5.0, 4.3.2, 4. 3.1, or 4.3 is available if you encounter problems during the upgrade, or if you want to roll back to the previous version after the upgrade completes. Before You Begin 
- Verify that the gateway and units are powered up and connected; that is, you can open an SSH session between the gateway and all units. 
- Disconnect standby and NAT units from the gateway using the Administration GUI. 
- Verify that the Prime Network application is not running with networkctl status. - Before performing the rollback, stop PN integration layer and watchdog monitoring process. For stopping the Integration layer, refer , “Installing the Prime Network Integration Layer”. - Rollback Oracle version, refer Table 10-4 Oracle Rollback Procedures. To Roll back Prim e Network gateway: Step 1 If your deployment has units that are connected to th e gateway, roll back the units (before rolling back the gateway). The rollback will remove redundant units from the registry and the golden source. Step 2 Configure all units using the following command: network-conf -rollback Step 3 Enter no at the prompt to start the unit. Step 4 Restore the backed-up database and start the database services and the listener. Because the database table structure changes after the upgr ade, the database is backed up as part of the upgrade process. The old table structure must be recovered. Note If you have a gateway high availability deploy ment, the services ana and oracle_db services should be moved to maintenance state.
10-35Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Rolling Back to Earlier Prime Network Version from Prime Network 5.3 Including Oracle Rollback 
- To restore an external database, contact your database administrator. 
- To restore an embedded database: –Log into the gateway as pnuser. –Change to the directory PRIME_NETWORK_HOME /Main/scripts/embedded_db: # cd $PRIME_NETWORK_HOME/Main/scripts/embedded_db –Restore the embedded database to the latest backup taken as per Step 1 of Prerequisites, page 10-22: Note While executing emdctl --restore_db, enter the time stamp and ensure that your restore is from the time stamp you recorded in Step 3 of Prerequisites (which is Year: 2019 Month: 02 Date: 26 HR:15 MIN: 54 in the step’s example). # emdbctl --restore_db For more information on prompts that appear while restoring an embedded database, see the Cisco Prime Network 5.3 Administrator Guide. After restoring the database, enter no at the prompt to start Prime Network. Step 5 As pnuser, move to the temporary upgrade directory (created in Step 1 of the procedure in Upgrading to Prime Network 5.3 from 5.2, 5.1, 5.0, 4.3.2, 4.3.1, 4.3 (Intermediate Steps), page 10-8 ). Step 6 Enter the following command to change to the upgrade directory: cd Prime_Network_upgrade Step 7 Enter the following command on the gateway (only): perl rollback.pl Step 8 Perform the rollback by enteri ng the required information as shown in the following table. Step 9 When the rollback is complete, log in as the pnuser to apply the environment changes. Step 10 Start the unit: 
- networkctl start (without running network-conf again) Step 11 Reconnect standby and NAT units to the gateway using the Administration GUI. Prompt for... Enter: Notes Confirm that you have restored the databaseyes Confirm that you have restored the database. Note If you have not restored the database, enter no and exit the script. Restore the database and begin again. Confirm whether you have reinstalled unitsyes Confirm that you performed Step 3. Note If you have not rolled back the units, enter no and exit the script. Rollback the units and begin again. Confirm whether you want to roll back to the older versionyes — Full path to the backup file full pathname Location of the backup file (it is not deleted during the rollback). An example is: /export/home/PrimeNetworkBackUp _xxxxxxxxxx.tar.gz
10-36Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Upgrading the Prime Network Integration Layer (PN-IL) Note 1. Rollback logs can be found in the Prime_Network_upgrade folder under PRIME_NETWORK_HOME. 2. If you are rolling back in Geo DR, after performing the rollback, execute the following command as pnuser: webcontrol start If you get the following error: (98)Address already in use: make_sock: could not bind to address [::]:1311 (98)Address already in use: make_sock: could not bind to address 0.0.0.0:1311 Execute the following command to list the webserver processes: grep webserver Kill the running processes using the kill command. Re-check the error by executing webcontrol start command. Upgrading the Prime Network Integration Layer (PN-IL) If the PN-IL is installed on your system, you can upgrade using the instructions in these topics: 
- Upgrading PN-IL in Standalone Mode, page 10-36 
- Upgrading PN-IL in Suite Mode, page 10-37 Note If the PN-IL is not installed on your system, you can install it using the instructions in Installing the PN-IL (CLI Method), page 9-4 Upgrading PN-IL in Standalone Mode Before You Begin Perform these tasks as pnuser: - Disable the health monitor to disable the PN-IL se rvices permanently otherwise the services will start automatically after a delay of 3 minutes. $PRIMEHOME/local/scripts/il-watch-dog.sh disable 
- Back up the $PRIMEHOME directory. For example, ./ilUpgradeUtility.sh backup 
- Stop the PN-IL using the following command: itgctl stop To upgrade a standalone PN-IL: Step 1 As the root user, launch a termin al on the Prime Network gateway se rver where you want to install PN-IL. Step 2 Create a temporary directory.
10-37Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Upgrading the Prime Network Integration Layer (PN-IL) Step 3 Insert Disk 3: Upgrade Files in the DVD drive and copy its content to the temporary directory you created in Step 2. Step 4 Insert Disk 6: Upgrade Files for Prime_Network_upgrade in the DVD drive and copy its content to the temporary directory you created in Step 2, so that it has the contents of both Disk 3 and Disk 6. Step 5 Log in as pnuser: su - pnuser Step 6 Create a temporary PN-IL upgrade directory. mkdir -p $PRIME_NETWORK_HOME/pnilupgrade Step 7 Copy the PN-IL upgrade tar file from the mount location to the pnilupgrade directory. cp /mnt/**/Upgrade/PNIntegrationLayerUpgrade_1.0.0.0-2.3.0.tar.gz $PRIME_NETWORK_HOME/pnilupgrade Step 8 Navigate to the directory in which the tar file was copied and extract the PN-IL upgrade tar. cd $PRIME_NETWORK_HOME/pnilupgrade tar -zxf PNIntegrationLayerUpgrade_1.0.0.0-2.3.0.tar.gz Step 9 Navigate to the extracted files directory. cd PNIntegrationLayerUpgrade_1.0.0.0-2.3.0 Step 10 Run the upgrade script ./upgradeIntegrationLayer.sh Step 11 Enter yes at the prompt to continue the upgrade process. The upgrade process is completed and the log file directory changes based on the PNIL versions changes. Step 12 Perform the following post-upgrade tasks: a.As pnuser, reload the user profile: source $PRIME_NETWORK_HOME/.cshrc b.Configure the PN-IL in standalone mode: itgctl config 1 c.Start the PN-IL: $PRIMEHOME /bin/itgctl start d.Enable the health monitor: $PRIMEHOME/local/scripts/il-watch-dog.sh enable Upgrading PN-IL in Suite Mode If you have been working with Prime Network 5.3, you will have PN-IL 2.1 installed on your system. The procedure for upgrading to PN-IL 2.1 in suite mo de is the same as upgrading in standalone mode. See Upgrading PN-IL in Standalone Mode, page 10-36. If you have been working with a re lease prior to Prime Network 5.3, follow the instructions below to upgrade to PN-IL 2.1. 
10-38Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Prime Network Post-upgrade Tasks Step 1 Upgrade PN-IL in standalone mode as described in Upgrading the Prime Network Integration Layer (PN-IL). Step 2 Perform these tasks on the Prime Central Server to create a backup of the PN-IL configuration data. a.Log in to the Prime Central server as root. ssh root @Prime-Central-host-IP-address su - prime-central-user b.Create Prime Central upgrade directory mkdir -p $PRIMEHOME/upgrade c.Copy the PN-IL upgrade tar file (example: PNIn tegrationLayerUpgrade_1.0.0.0-2.3.0.tar.gz) from the upgrade directory on the Prime Network server to the upgrade directory on the Prime Central server. d.Extract the files. tar -zxf PNIntegrationLayerUpgrade_1.0.0.0-2.3.0.tar.gz e.Run the PN-IL upgrade utility script to crea te a backup tar file in $PRIMEHOME/backup. ./ilUpgradeUtility.sh backup Step 3 Perform these tasks on the Prime Network server to restore the PN-IL configuration. a.As pnuser, copy the backup tar from the Prime Central upgrade directory to Prime Network server. b.Extract the files: tar -zxf il_backup_2.1.0.0.tar.gz c.Run the PN-IL utility script to restore the PN-IL configuration: ./ilUpgradeUtility.sh restore untar-files-directory Step 4 Perform these tasks on Prim e Central as described in Cisco Prime Central Quick Start Guide. 
- Upgrade Prime Central 
- Integrate Prime Network and PN-IL with Prime Central Step 5 Start the upgraded PN-IL: $PRIMEHOME/bin/itgctl start Prime Network Post-upgrade Tasks After the upgrade to Prime Network 5.3 is complete, perform the post-upgrade tasks that apply to your deployment. 
- Enable Units to Restart Automaticall y After they are Rebooted, page 10-39 
- Restoring Customized Crontabs, page 10-39 
- Restarting Crontab Jobs for NAT Units, page 10-39 
- Fixing the Database Entry for Vision Clients with NAT, page 10-40 
- Updating the Port Watchdog (A VM Protection) Scripts, page 10-40
10-39Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Prime Network Post-upgrade Tasks 
- Restore Links Between Devices and Cloud VNEs, page 10-40 
- Support for Third-Party VNEs, page 10-41 
- Command Builder Scripts, page 10-41 
- Gathering DB Statistics in First 24 Hours, page 10-41 
- Integration Changes, page 10-42 Enable Units to Restart Automatically After they are Rebooted After upgrade, you need to perform the following steps on each unit in your setup otherwise the units will not restart automatically after they are rebooted. Step 1 Log into the unit as pnuser. Step 2 Copy rootdeploy.cmd from the gateway, as follows: remote_copy.cmd "<Gateway_IP>:.deploy/independent/on_boot/rootdeploy.cmd" ".deploy/independent/on_boot/rootdeploy.cmd" Step 3 Switch to the root user: su - root As the root user, execute the root deploy command: cd $PRIME_NETWORK_HOME/.deploy/independent/on_boot; ./rootdeploy.cmd Restoring Customized Crontabs If you saved user-defined cron jobs in PRIME_NETWORK_HOME /local/cron/crontab.user.list, they are restored. User-defined cron jobs th at are not placed in this direct ory must be manually recreated. Restarting Crontab Jobs for NAT Units Cron jobs on NAT units must be manually restarted. Step 1 Log into the unit as pnuser. Step 2 Copy the upgrade_restart_crons.pl script from the gateway, as follows: remote_copy.cmd [gw-ip]:$PRIME_NETWORK_HOME/Main/scripts/upgrade_restart_crons.pl Main/scripts Step 3 Run the upgrade_restart_crons.pl script. It will display output similar to the following: ./Main/scripts/upgrade_restart_crons.pl + Updating the unit's cronjobsWriting log to ~/Main/logs/upgrade_crons.log - Copying the files from the gateway (gateway's_ip) - Restarting the cronjobs+ Please wait while the unit is being updated.................................Done.
10-40Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Prime Network Post-upgrade Tasks Step 4 Verify that the crontab list is not empty: crontab -l Step 5 The upgrade is now complete. Run the status command and check the version number to make sure that the upgrade has been successful. Fixing the Database Entry for Vision Clients with NAT If you are using network address translation (NAT ) with the Prime Network Vision client, update the database host in the Prime Network registry to contain the hostname inst ead of the IP address. If you already use a hostname instead of an IP a ddress, you do not have to repeat this procedure. Step 1 Make sure Prime Network is running. Step 2 Verify that the client workstations have the correct Domain Name System (DNS) mapping. Step 3 From PRIME_NETWORK_HOME /Main, run the following commands: ./runRegTool.sh -gs 127.0.0.1 set 0.0.0.0 site/persistency/nodes/main/Host database-server-hostname./runRegTool.sh -gs 127.0.0.1 set 0.0.0.0 site/persistency/nodes/ep/Host database-server-hostname Step 4 Enter the following command to restart Prime Network: networkctl restart Updating the Port Watchdog (AVM Protection) Scripts After upgrading to Prime Network 5.3, copy the port watchdog scripts to /var/adm/cisco/prime-network/scripts. Enter the following commands as the root user: mkdir –p /var/adm/cisco/prime-network/scripts cp PRIME_NETWORK_HOME /Main/scripts/port_watchdog.pl /var/adm/cisco/prime-network/scripts cp PRIME_NETWORK_HOME /Main/scripts/keep_alive_port_watchdog.pl /var/adm/cisco/prime-network/scripts chmod -R 700 /var/adm/cisco/prime-network/scripts chown -R pnuser:network /var/adm/cisco/prime-network/scripts Restore Links Between Devices and Cloud VNEs If your deployment had cloud VNEs that were conn ected to devices with static links, the connection between the cloud VNE and the device may be lost after the upgrade. De lete and recreate the link using the Administration GUI. 
10-41Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Prime Network Post-upgrade Tasks Support for Third-Party VNEs Prime Network supports third-party devices through Cisco Advanced Services engagement. As of release 5.0, Prime Network will no t natively support third-party devices, and a Cisco Advanced Services contract will be required for their enablement and support. Command Builder Scripts If you had customized Command Builder scripts (which you should have uninstalled), you may need to update your scripts if your deployment: 
- Executes command scripts using the Prime Network northbound APIs (for example, BQL) 
- Includes references to IMOs or to the Prime Network internal model Verify whether the command names, parameters, or IMO references ha ve changed, in which case you must update your scripts. The reinstall your customized scripts. Gathering DB Statistics in First 24 Hours The pnuser _admin user performs maintenance tasks— such as gathering statistics—on the other Prime Network database schemas. After this user is created, a cron job runs every 24 hours to gather statistics on the Fault Database tables. However, if you expect a high scale in the first 24 hours, you might need to manually force statistics gathering twice during the first day, 1 and 5 hours afte r noise start. To force st atistics gathering, enter the following UNIX command as pnuser: cd $PRIME_NETWORK_HOME/Main/scripts; ./call_update_ana_stats.pl >& /dev/null If you deploy Prime Network to handle a high event rate, disabling Oracle’s au tomatic maintenance jobs is recommended. Automatic mainte nance significantly affects Oracle performance and increases event processing time. See Disabling Automatic Maintenance Jobs, page 4-8. Prime Network supports the resetVneSSHv2Algorithms.pl to clean up the ‘algorithms’ key in avm registry files. It is recommended to run this script if you are managing the VNE’s from Prime Network3.7 or earlier. To run the script, follow the below steps: Step 1 Navigate to ‘<PRIME_NETWORK_HOME> /local/scripts’ directory in GW. Ensure the following: –Script runs as PN user from the GW. –PN should be down in both GW and Units. Step 2 Run the script file using the below command: perl resetVneSSHv2Algorithms.pl Step 3 Start the PN in GW and Units to reflect the changes.
10-42Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Prime Network Post-upgrade Tasks Integration Changes Adding Managed Elements to the Database Manually for PC-FM Resync After upgrading Prime Network, you can execute BQ L commands to invoke a VNE insert operation in a new MANAGED ELEMENTS table for all the exis ting MANAGED ELEMENTS. Execute the below BQL commands, which has a VNE name “CopyAllManagedElementsToDB” and IP “0.0.0.0”. Note Make sure to execute the BQL command before restarting PNIL. BQL execution w ill not introduce any new VNE, but only performs DB refreshing fo r all the existing VNE’s; inserts all Managed Elements to DB. <?xml version="1.0" encoding="UTF-8"?> <command name="Create"> <param name="imobject"> <value> <management.IElementManagement type="management.IElementManagement" instance_id="0"> <ID type="Oid">{[MCNetwork][MCVM(IP=X.X.X.X)][ElementManagement(Key=CopyAllManagedElementsToDB)]}</ID> <IP type="com.sheer.types.IPAddress">0.0.0.0</IP> <ElementName type="String">CopyAllManagedElementsToDB</ElementName> </management.IElementManagement> </value> </param> </command>"." Note Replace X.X.X.X in the above BQL with Gateway IP Address. To terminate the further processing of BQL, an Exception that will be returned as part of the response to the BQL must be invoked (Invocation of this Exception is an already available approach used for Validating the input values while creating a new VNE through Modelling tabs.) Note The below exception message is ex pected after executing the BQL: “<Description type="String">ERROR (5133): The VNE's name contains invalid characters. valid chars are: A-Z, a-z, 0-9, _, '@', '!', '~', '.', ' '.</Description>” For details on BQL and other integrations after the upgrade, refer to the Cisco Developer Network at https://developer.cisco.com/site/prime-network/.
10-43Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Upgrading the Embedded Database to Oracle 12.2.0.1 Upgrading the Embedded Database to Oracle 12.2.0.1 Before you Begin 
- Copy the following Oracle installation.zip files from Prime Network 5.3, Disk 4: Database Binaries to a directory on the machine on which the embedded database is installed (either on the local gateway server or a remote server): –linuxx64_12201_database.zip 
- Ensure that you have created a temporary di rectory and copied th e contents of both Disk 3 and Disk 6 into it. 
- Copy the embedded_upgrade_12.2 folder from the temporary folder you created for Disk 3 and Disk 6 into the directory of the gateway server. 
- Ensure that there is a minimum of 12 GB free disk space. This space is freed up after the upgrade has completed successfully. 
- Ensure that database backup an d restore are enabled. See “Enabl ing Embedded Oracle Database Backups” section in the Cisco Prime Network Administration Guide. Step 1 If your setup has cluster, freeze th e cluster configured services (ana and oracle_db) using the following command: clusvcadm -Z service Example-Upgrading the Embedded Database to Oracle 12.2.0.1 Step 1 In the database server, perform the following steps: a.Copy the zip file to /tmp/upg12c. –linuxx64_12201_database.zip b.Copy the embedded_upgrade_12.2 to /tmp/upg12c. c.Create the staging directory by entering the following commands: mkdir /export/home/stg cd /tmp/upg12c d.As a root user, grant full permission for perl file: chmod 777 upgrade_embedded_oracle_12.1.0.2_to_12.2.0.1.pl e.Upgrade to Oracle 12.2.0.1 by entering the following command: # perl upgrade_embedded_oracle_12.1.0.2_to_12.2.0.1.pl Enter the name of the OS user of the database [oracle] Enter the staging/upgrade directory. This directory should have at least 9GB free space [/export/home/stg]Running pre-upgrade validations Could not find linuxx64_12201_database.zip under /mnt/oracleupgrade. Please enter the location of the zip files: /DB_files/12.2.0.1Extracting /DB_files/12.2.0.1/linuxx64_12201_database.zip Diagnosing the database status Installing the software
10-44Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Upgrading the Embedded Da tabase to Oracle 12.2.0.1 Running pre-upgrade tasks Copying files to new Oracle home Verifying no files needs media recovery and no backup is runningBefore proceeding with the upgrade, this procedure will take a backup of the database. you may choose between 1. Offline (Cold) backup (requires database downtime) [default] 2. Online (Hot) backup Enter option: (1-2) 1 The database is about to be shutdown. Please stop PrimeNetwork and any other application using the database. Hit the 'Enter' key when ready to continue Stopping the database & listener Backing up the database. Stopping the database & listener Backing up system files Upgrading the database. This step may take at least 40 minutes.Executing post upgrade tasks. Upgrading timezone file Identifying new invalid objectsCopying PrimeNetwork scripts to new Oracle home Restarting Oracle cronjobs Upgrade completed successfully. Logs can be found under /opt/ora/oracle/ana_logs/upgradeTo complete the upgrade, enter the following command as the Prime Network user: cd ~/Main/scripts/embedded_db; emdbctl --update_oracle_home Step 2 Enter the required information as shown in the following table. Step 3 Login to Oracle, and restart the embedded Oracle by following command: #lsnrctl stop #lsnrctl startPrompt for... Enter... Notes OS username Username for the Oracle database user.Default is oracle. Staging/upgrade directory Path to the directory from which the upgrade will run and to which the database zip files will be extracted.Default is /export/home/stg Location of zip files Path to the directory to which the Oracle zip files were copied.— Database backup method Offline (Cold) backup or Online (Hot) backupWith cold backup, the database is down during the backup. With hot backup, the database continues to run until the upgrade starts. Downtime is shorter but the backup might take longer. Default is cold backup.
10-45Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Upgrading the Embedded Database to Oracle 12.2.0.1 in a HA Setup with Geographical Redundancy and Upgrading the Embedded Database to Oracle 12.2.0.1 in a HA Setup with Geographical Redundancy and Oracle ADG Before you Begin 
- To be performed on both primary and standby gateway servers: Copy the following Oracle installation.zip files from Prime Network 5.3 Disk 4: Database Binaries to a directory on the machines on which the embedded database is in stalled (both the primary and standby gateway servers): –linuxx64_12201_database.zip 
- Copy the embedded_upgrade_12.2 folder from the temporary folder you created for Di sk 3 and Disk 6 in to the directory of the gateway server. 
- Ensure that there is a minimum of 12 GB free disk space on each of the servers. This space is freed up after the upgrade has completed successfully. 
- Verify that database replication works properly pr ior to starting the database upgrade by performing the geographical verification tests described in the Cisco Prime Network 5.3 High Availability Guide. Step 1 On the standby gateway server, run the Oracle soft ware upgrade and prepare the standby server for database upgrade. Navigate to the upgrade scripts directory and enter the following command: perl standby_db_prepare_for_upgrade12.1.0.2_to_12.2.0.1.pl Step 2 On the primary gateway server, start the databa se upgrade by entering the following command: perl upgrade_embedded_oracle_12.1.0.2_to_12.2.0.1.pl Step 3 Enter the required information as shown in the following table. Step 4 On the primary gateway server, verify that the Oracle listener is running by entering the following command as the root user: Prompt for... Enter... Notes OS user name Username for the Oracle database user.Default is oracle. Staging/upgrade directory Path to the directory to which the upgrade zip file was copied.— Location of zip files Path to the directory to which the Oracle zip files were copied.— Database backup method Offline (Cold) backup or Online (Hot) backupWith cold backup, the database is down during the backup and the gateway is stopped. With hot back up, the database continues to run until the upgrade starts. Downtime is shorter but the backup might take longer. Default is cold backup.
10-46Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Upgrading the Embedded Database to Oracle 12.2.0.1 in a HA Setup with Geographical Redundancy and su - oracle -c "lsnrctl status" Step 5 On the standby gateway server, set back the replic ation redo apply by executing the following command: perl standby_db_post_upgrade12.1.0.2_to_12.2.0.1.pl Example-Upgrading the Embedded Database to Oracle 12.2.0.1 in a HA Setup with Geographical Redundancy and Oracle ADG Step 1 Stop the Prime Network. Step 2 Verify if the replication between databases work. Step 3 On Active and Standby server, perform the following steps: a.Navigate to the location where the em bedded Oracle softwa re is available. b.Copy the zip file to /tmp/upg12c: –linuxx64_12201_database.zip c.Copy the embedded_upgrade_12.2 to /tmp/upg12c from the temporary folder you created for Disk 3 and Disk 6. d.Create the staging directory by entering the following commands: mkdir /export/home/stg cd /tmp/upg12c e.On both Active and Standby server, as a root user, grant full permission for perl files: chmod 777 upgrade_embedded_oracle_12.1.0.2_to_12.2.0.1.pl chmod 777 standby_db_prepare_for_upgrade12.1.0.2_to_12.2.0.1.pl chmod 777 standby_db_post_upgrade12.1.0.2_to_12.2.0.1.pl f.On the Standby gateway server, ru n the Oracle software upgrade an d prepare the standby server for database upgrade. Navigate to the upgrade sc ripts directory and enter the following command: # perl standby_db_prepare_for_upgrade12.1.0.2_to_12.2.0.1.pl - Enter the name of the OS user of the database [oracle] - Enter the staging/upgrade directory. This directory should have at least 9GB free space [/export/home/stg] - Running pre-upgrade validations - Extracting /tmp/upg12c/linuxx64_12201_database.zipInstalling the software - Copying files to new Oracle home /etc/init.d/dbora: line 17: /selinux/enforce: No such file or directoryBacking up system files - Starting the standby database in mount mode. - Copying PrimeNetwork scripts to new Oracle homeRestarting Oracle cronjobs Standby DB is ready for upgrade. Please run the upgrade procedure for the Primary DB. Logs can be found under /opt/ora/oracle/ana_logs/upgrade Step 4 On Active server, perform the following steps: a.Navigate to the location where the em bedded Oracle softwa re is available. b.Copy zip file to /tmp/upg12c: –linuxx64_12201_database.zip
10-47Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Upgrading the Embedded Database to Oracle 12.2.0.1 in a HA Setup with Geographical Redundancy and c.Create the staging directory by entering the following commands: mkdir /export/home/stg cd /tmp/upg12c d.Start the database upgrade by executing the following command: # perl upgrade_embedded_oracle_12.1.0.2_to_12.2.0.1.pl - Enter the name of the OS user of the database [oracle] - Enter the staging/upgrade directory. This directory should have at least 9GB free space [/export/home/stg] - Running pre-upgrade validations - Extracting /tmp/upg12c/linuxx64_12201_database.zipDiagnosing the database status - Installing the software - Running pre-upgrade tasksCopying files to new Oracle home - Verifying no files needs media recovery and no backup is running - Before proceeding with the upgrade, this procedure will take a backup of the database. you may choose between 1. Offline (Cold) backup (requires database downtime) [default] 2. Online (Hot) backup Enter option: (1-2) 1 The database is about to be shutdown. Please stop PrimeNetwork and any other application using the database.Hit the 'Enter' key when ready to continue - Stopping the database & listener /etc/init.d/dbora: line 17: /selinux/enforce: No such file or directory - Backing up the database. this may take a while.. - Stopping the database & listener/etc/init.d/dbora: line 17: /selinux/enforce: No such file or directory - Backing up system files - Upgrading the database. This step may take at least 40 minutes./etc/init.d/dbora: line 17: /selinux/enforce: No such file or directory - Executing post upgrade tasks. This may take a while.. - Upgrading timezone fileIdentifying new invalid objects - Copying PrimeNetwork scripts to new Oracle home - Restarting Oracle cronjobs Upgrade completed successfully. Logs can be found under /opt/ora/oracle/ana_logs/upgrade - Note. To complete the upgrade, enter the following command as the Prime Network user: cd ~/Main/scripts/embedded_db; emdbctl --update_oracle_home ---------------------------------------------------------------------------------------- .-= Welcome to pn-ha-p1-s5, running Cisco Prime Network gateway ( v5.3 (build 250 )) =-. ----------------------------------------------------------------------------------------+ Checking for services integrity: - Checking if host's time server is up and running [DOWN] - Checking if webserver daemon is up and running [OK] - Checking if secured connectivity daemon is up and running [OK] - Checking Prime Network Web Server Status [DOWN] - Checking Compliance Engine Status [DOWN]- Detected AVM99 is down, skipping AVMs check + Checking for latest installed device packages: - Cisco: PrimeNetwork-5.0-DP0 - Third party: No third party device package installed.
10-48Cisco Prime Network 5.3 Installation GuideUpgrading and Rolling Back Prime Network Upgrading the Embedded Database to Oracle 12.2.0.1 in a HA Setup with Geographical Redundancy and Step 5 In the Standby database server, perform the following steps: a.Enter the following command: cd /tmp/upg12c b.Set back the replication redo by executing the following command: # perl standby_db_post_upgrade12.1.0.2_to_12.2.0.1.pl - Enter the name of the OS user of the database [oracle] - Setting standby DB for redo applyEnter the staging/upgrade directory, same one that was provided earlier [/export/home/stg] - Starting the STANDBY database in mount mode. Standby DB is ready. Please verify replication.

CHAPTER 11-1Cisco Prime Network 5.3 Installation Guide 11 Uninstalling Prime Network This chapter describes how to unins tall Prime Network gatewa ys, units, and clients. For instructions on how to uninstall Prime Network in a gateway high availability deployment, see the Cisco Prime Network 5.3 Gateway High Availability Guide. - Uninstalling a Prime Network Gateway, page 11-1 
- Uninstalling Cisco Prime Network Units, page 11-2 
- Uninstalling the Cisco Prime Network Clients, page 11-3 
- Uninstalling Prime Network Manually, page 11-3 
- Uninstalling the PN-IL Using CLI, page 11-4 
- Uninstalling the PN-IL Using the Wizard, page 11-4 
- Uninstalling Pacemaker Corosy nc Configuration, page 11-4 Uninstalling a Prime Network Gateway The following procedure describes how to uninstall a Prime Network gateway with an external database either locally on the gateway or on a remote serv er. If the uninstallation script fails during the uninstallation process, you can do it manually as described in Uninstalling Prime Network Manually, page 11-3. Note During uninstallation process Prime Network does not remove hidepid=2 entry on the /etc/fstab automatically if updated during installation. You need to manually remove the hidepid entry from /etc/fstab and reboot the system to disable Hidepid=2. To uninstall a gateway: Step 1 To retain customized information (such as user-cr eated A VMs and VNEs and soft properties), back up $PRIME_NETWORK_HOME /Main/registry and its subfolders and save the data to an external device or folder. a.Log on to the gateway as pnuser and run the following commands from the $PRIME_NETWORK_HOME directory: mkdir /tmp/avmFiles cp Main/registry/ConfigurationFiles/127.0.0.1/avm* /tmp/avmFiles
11-2Cisco Prime Network 5.3 Installation Guide Uninstalling Prime Network Uninstalling Cisco Prime Network Units The files are copied to the /tmp/avmFiles folder. b.Copy the files to another file system. Step 2 Log on to the gateway server as root, and use the following command to uninstall Prime Network. [root@pn-d-rh-10-lnx ~]# perl /var/adm/cisco/prime-network/reg/pn53/uninstall.pl Step 3 (Optional) Use the dbca utility to remove the database schemas. For more information, see Table 4-2. Step 4 After the uninstallation procedure is complete, reboot the server. The uninstallation log is available at /var/adm/cisco/prime-network/logs/uninstall-logmmddyy_hhmmss. Uninstalling a Gateway with an Embedded Database The embedded database is automatically uninst alled when you uninstall Cisco Prime Network. Step 1 Log on to the gateway server as root and move to the correct directory. cd /var/adm/cisco/prime-network/reg/ pnuser Step 2 Start the uninstallation: ./uninstall.pl Step 3 Enter yes at the prompt to uninstall Prime Network (and Operations Reports, if installed). The uninstallation begins. Step 4 If the embedded database is on a re mote server, provide the remote serv er details such as the IP address, username, OS admin, and OS root user password. Step 5 If the uninstallation fails, uninstall the database manually: a.As root, enter the following commands: cd $PRIME_NETWORK_HOME /local/scripts perl uninstall_ana_db.pl pnuser PRIME_NETWORK_HOME b.Press Enter to finish the uninstallation. Uninstalling Cisco Prime Network Units Before you uninstall a unit, make sure it is de leted from the gateway (you can do this from the Administration GUI). To uninstall a unit: Step 1 Log on to the unit as root, and move to the correct directory: cd /var/adm/cisco/prime-network/reg/ pnuser 
11-3Cisco Prime Network 5.3 Installation Guide Uninstalling Prime Network Uninstalling the Cisco Prime Network Clients Step 2 Begin the uninstallation: ./uninstall.pl Step 3 At the prompt to uninstall, enter yes. Step 4 The uninstaller checks if the unit is connected to a gateway. If it is, you are prompted to stop the uninstallation and delete from the gateway. Step 5 Delete the working directory: cd .. rm -Rf /var/adm/cisco/prime-network/reg/ pnuser Step 6 After the uninstallation procedure is complete, reboot the unit. The uninstallation log is available at /var/adm/cisco/prime-network/logs/uninstall-logmmddyy_hhmmss. Uninstalling the Cisco Prime Network Clients If you have upgraded from a previous version of Pr ime Network to Prime Network 5.3, you might want to uninstall the old GUI clients, but this is not mandatory. To uninstall the clients: Step 1 Choose Start > All Programs > Cisco Prime Network > Uninstall Cisco Prime Network Products. Step 2 In the Select Uninstall Method window, choose Automatic and click Next. (We recommend you do not use the Custom uninstall option.) Step 3 When the Finish Perform Uninstall window is displayed, click Finish. The progress bar reflects the status of the files being uninstalled. If you click Cancel at any time, the uninstallation process stops. Some stranded files might remain on your computer, and you will have to uninstall the software again. Uninstalling Prime Network Manually To manually uninstall Prime Network, log in as root and remove the user and the user installation registry folder: userdel -r username rm -rf /var/adm/cisco/prime-network/reg/ pnuser To remove information that was mi grated, use the following command: userdel -r username _old
11-4Cisco Prime Network 5.3 Installation Guide Uninstalling Prime Network Uninstalling the PN-IL Using CLI Uninstalling the PN-IL Using CLI This procedure will only uninstall the Prime Networ k Integration Layer (PN-IL). To unregister PN-IL from Prime Central, see the Cisco Prime Central Quick Start Guide. To uninstall the PN-IL: Step 1 As the root user, open a terminal on the Prime Network gateway server where the PN-IL is installed. Step 2 Change to the pnuser: su - pnuser Step 3 Start the uninstallation: $PRIMEHOME/uninstall/uninstall.sh Step 4 At the prompt to uninstall, enter yes. Step 5 After the uninstallation procedure is complete, login to a fresh session. Uninstalling the PN-IL Using the Wizard This procedure will only uninstall the PN-IL. If th e PN-IL was configured with Prime Central, after uninstalling the PN-IL, you must manually delete the PN-IL entry from the Prime Central portal. To uninstall the PN-IL using the wizard: Step 1 Launch the X client application (for example, Xming). Step 2 As the root user, open a terminal on the Prime Network gateway server where the PN-IL is installed. Step 3 Move to the below directory and execute the uninstaller. cd /var/adm/cisco/pnintegrationlayer/Uninstaller/ ./PNILUninstaller Step 4 Click Uninstall to continue the uninstallation process. Step 5 When the uninstallation is complete, click Done to close the wizard. Uninstalling Pacemaker Corosync Configuration This procedure will only uninsta ll the pacemaker Cororsync config uration setup in Prime Network. Step 1 In Prime Network, remove all resour ces from cluster using below commands Disable all running resources (Run any one node) Pcs resource disable Oracle Pcs resource disable PrimeNetwork Pcs resource cleanup
11-5Cisco Prime Network 5.3 Installation Guide Uninstalling Prime Network Uninstalling Pacemaker Corosync Configuration Delete resources once all in stopped state (Run any one Node) Pcs resource delete Oracle Pcs resource delete PrimeNetwork Destroy Cluster entirely (Run on both nodes) Pcs cluster destroy Step 2 Uninstall PN and Oracle (in all nodes) Perl /var/adm/cisco/prime-network/reg/current/uninstall.pl
11-6Cisco Prime Network 5.3 Installation Guide Uninstalling Prime Network Uninstalling Pacemaker Corosync Configuration

CHAPTER 12-1Cisco Prime Network 5.3 Installation Guide 12 Next Steps This chapter provides some steps you should perform after installing the product. After you perform these steps, you can move on to use the Prime Netw ork Administration GUI to a dd users, create device scopes, and so forth. 
- Launching the Prime Network GUI Clients, page 12-1 
- Verifying That Backups Are Set Up, page 12-2 
- Enabling Network Discovery, page 12-3 
- Setting Up Transaction Manager, page 12-4 
- Setting Up VMware vCenter to Forward Events, page 12-4 
- Integration with Cisco Multicast Manager (CMM), page 12-4 Launching the Prime Network GUI Clients Prime Network enables you to access all its GUI clie nts from the Web Start page on the gateway. It provides single sign on for all GUI clients. After you enter your credentials, you can access any of the clients. Before You Begin Verify the following: 
- All the client requirements are met. For more information on the requirements, see Prime Network Client Requirements, page 2-12. - Java 8 update 162 is installed on your computer. If not, download it from the Java download site: http://www.java.com. Note Prime Network was tested on Java 8 update 60, however it is expected to work with lower Java 8 updates as well. 
- Ports 6080 and 6081 are open. For other ports required for Prime Network, see Required Ports for Prime Network, page 2-32. To access the clients using Java Web Start technology: Step 1 Log into the gateway by entering: http://gateway-host-ip :6080/ana/services/install/install/webstart.html
12-2Cisco Prime Network 5.3 Installation Guide Next Steps Verifying That Backups Are Set Up where gateway-host-IP is the gateway host name or IP address. Step 2 Enter your user name and password in the Prime Network login window and click Login. The Prime Network applications launch page is displayed and provides access to all of the Prime Network GUI clients. Step 3 Click on the Prime Network application you want to access. A.jnlp file is downloaded. Step 4 Click Continue in the Security Warning screens. The client application jar fi les are downloaded and the Prime Network application starts. Verifying That Backups Are Set Up The Prime Network backup and restore process includes: 
- Data backup of the registry data, encryption keys, and reports using the operating system cron mechanism. This data is backed up regardless of whether you have an embedded or external database. 
- Embedded database backup. For external database, refer to Oracle documentation. Prime Network performs backups on a regular schedule. The schedule and data that is backed up depends on whether you have a system with an embedded database or an external database. Note Back up to tape on a daily basis. 
12-3Cisco Prime Network 5.3 Installation Guide Next Steps Enabling Network Discovery Verifying the Prime Network Da ta Backup (Gateway Data) To verify that Prime Network is backing up your da ta, check the backup direct ory after you expected a backup to occur. By default the data is saved in $ PRIME_NETWORK_HOME /backup. For information on changing the backup schedule or location, or performing a manual backup, see the Cisco Prime Network 5.3 Administrator Guide. Verifying the Embedded Database Backup Embedded database backups are norm ally enabled during installation. If you did not enable them, use the procedure in Cisco Prime Network 5.3 Administrator Guide. You must enable this mechanism if you want to perform a backup of the embedded database, regardless of whether the backup is manual or automatic. Embedded database is backed up according to the profile select ed at installation: 
- 1-50 actionable events per second —Full backup is performed ever y Saturday at 1:00 a.m.; and incremental backups are performed every Sunday-Friday at 1:00 a.m. 
- 51-250 actionable events per second —Full backup is performed every Tuesday and Saturday at 1:00 a.m. To verify that backups are happening, after a suffic ient amount of time has lapsed, check the backup directory you specified during installation. Operations Reports Data Backup For information on performing a reports data backup, see the Cisco Prime Network 5.3 Administrator Guide. Enabling Network Discovery If you did not configure Prime Network during the initial installation process, you must enable the network discovery functionality manually, as follows: Step 1 As the root user, navigate to the Prime Network home directory/local/scripts/. Be sure to enter the full path to the home directory. Step 2 Execute setFpingPermissions.tcsh. Example: /export/hone/pn52/local/scripts/setFpingPermissions.tcsh
12-4Cisco Prime Network 5.3 Installation Guide Next Steps Setting Up Transaction Manager Setting Up Transaction Manager Transaction Manager replaces the Prime Network Workflow and Activation functionality that was available in previous releases of Prime Network. Transactions are activation workflows that you can create using the XDE Eclipse SDK, and then execute from Transaction Manager. For information on the Transaction Mana ger GUI and how to use it, see the Cisco Prime Network 5.3 Customization Guide. To install the XDE Eclipse SDK, contact Advanced Services. Setting Up VMware vCenter to Forward Events Prime Network uses the VMware vCenter to obtain information about virtualization inventory and events information by modeling the vCenter as an individual VNE. The XMP Datacenter component retrieves events from the VMware vCenter, normalizes them into the CISCO-EPM-NOTIFICATION-MIB trap format, and fo rwards them to the Ev ent Collector (A VM 100). To receive events from the VMware vCenter, you must perform one of the following procedures so that the XMP Datacenter will send UCS events to the correct Event Collector location. Integration with Cisco Multicast Manager (CMM) Prime Network provides multicast support by enabling integration with Cisco Multicast Manager 3.3.2 (CMM). This involves installing CMM on the Prime Network gateway server, and then manually creating the menu options that will enable cross-launching CMM from the Prime Network Administration and Vision GUI clients. Note In an installation scenario, where the Cisco Prime Ne twork is installed first followed by the Cisco Prime Network Operations Report s and the CMM on a gateway server, the application might shutdown. In such case, restart the CMM application and then ente r the following system co mmand as a root user: service mysqld-ib start .If the Event Collector (AVM 100) is running on: You must do the following (as Linux root user): A different server from XMP_DATACENTER1.Go to $PRIME_NETWORK_HOME /Main/XMP_DATACENTER/conf. 2.In the datacenterevent.properties fi le, set the value of the following property to the IP address of the server running A VM 100: datacenterevent.destAddress0 The same server as XMP_DATACENTERiptables -t nat -A OUTPUT -p udp -d localhost --dport 162 -j REDIRECT --to-port 1162
12-5Cisco Prime Network 5.3 Installation Guide Next Steps Integration with Cisco Multicast Manager (CMM) Setting Up Integration with Cisco Multicast Manager To integrate Prime Network with CMM: Step 1 Install CMM on the Prime Network gateway server. Refer to the Installation Guide for Cisco Multicast Manager. Step 2 Log into the gateway as pnuser. Step 3 Change directories to $ PRIME_NETWORK_HOME /Main/ and enter the following command: installCMMLaunchMenu.pl Step 4 At the prompt, enter the port to be used by CMM (default 8080 but this might have been changed during CMM installation). Step 5 When the registry files have been updated, you w ill be notified that the CMM launch menu has been added successfully. Step 6 Restart the Prime Network Administration and Vision GUI clients. Step 7 In Prime Network Administration, verify that the CM M Configuration menu option appears in the Tools menu. In Prime Network Vision, verify that the CMM Dashboard menu option appears in the Tools menu. Setting Up Traps for CMM To receive CMM traps in the Trap Viewer page: Step 1 View the status of IP tables, and verify if the 2162 port is configured by entering the following command: #iptables -t nat -L -n -v Step 2 Change the rules in IP tables in the /usr/sbin directory by enter the following CLI command: #iptables -t nat -A PREROUTING -p UDP --dport 162 -j REDIRECT --to-port 2162 Step 3 In the snmptrapd.conf file, under /usr/local/netman/mmtsys/share/snmp directory, enter the following command in the first line and save. snmpTrapdAddr udp:<server-ip>:<port-no> For example, snmpTrapdAddr udp:10.106.214.116:2162 Note Ensure that the port numb er is provided as 2162. Step 4 Restart CMM by entering the following commands: #/usr/local/netman/K98mmt #/usr/local/netman/S98mmt Step 5 Launch the CMM GUI and verify if the CMM traps are received in the Trap Viewer page.
12-6Cisco Prime Network 5.3 Installation Guide Next Steps Integration with Cisco Multicast Manager (CMM) Removing Cisco Multicast Manager Integration from Prime Network To remove CMM integration from Prime Network: Step 1 Log into the gateway as pnuser. Step 2 Change directories to $ PRIME_NETWORK_HOME /Main/ and enter the following command: uninstallCMMLaunchMenu.pl Step 3 Restart the Prime Network Administration and Vision GUI clients. Step 4 In Prime Network Administration, verify that the CMM Configuration menu option is removed from the Tools menu. In Prime Network Vision, verify that the CMM Dashboard menu option is removed from the Tools menu.
A-1Cisco Prime Network 5.3 Installation Guide APPENDIX A Using Chinese Characters in Business Tags Prime Network Vision lets you attach business tags (customer labels) to the following network objects using traditional and simplified Chinese characters: 
- Location 
- Node name 
- Router name 
- Map aggregation The following business tag functions support Chinese characters: 
- Creating business tags for network objects 
- Searching for business tags 
- Generating a list of business tags 
- Editing business tag details 
- Removing business tags 
- Exporting business tags through the northbound interface (NBI) 
- Writing business tag notes Complete the following sections to use Chinese characters with Prime Network. Using Chinese Characters with Oracle If you are using Chinese characters, make sure the database parameter NLS_CHARACTERSET is set to a value that supports UTF8. Otherwise, Chinese characters will not display correctly after you install or upgrade to Prime Network 5.3. Step 1 Stop Cisco Prime Network before changing the character set of your database. networkctl stop Step 2 To check the value of the NLS_CHARACTERSET parameter, enter the following SQL*PLUS command: sql> SELECT parameter, value FROM v$nls_parameters WHERE parameter='NLS_CHARACTERSET'; If the value is UTF8 or AL32UTF8, no further action is required.
A-2Cisco Prime Network 5.3 Installation Guide Appendix A Using Chinese Characters in Business Tags Step 3 Check the job_queue_processes and aq _tm_processes parameters and reco rd the current values (you will restore them later in this procedure). Complete the following steps: a.To check the job_queue_processes va lue, enter the following command: SQL> show parameter job_queue_processes In the command output, you should see: NAME TYPE VALUE ----- ----- ------ job_queue_processes integer 10 b.To check the aq_tm_processes valu e, enter the following command: SQL> show parameter aq_tm_processes In the command output, you should see: NAME TYPE VALUE ----- ----- ------ aq_tm_processes integer 0 Step 4 Use the Oracle CSALTER script to change the character set to UTF8 or AL32UTF8. The CSALTER script is part of the Oracle Database Character Set Scanner utility. Complete the following steps to change the database character set. For details, see the Oracle Database Globalization Support Guide, section “Migrating a Character Set Using the CSALTER Script.” a.Use either a SHUTDOWN IMMEDIATE or a SHUTDOWN NORMAL statement to shut down the database. b.Perform a full backup of the da tabase (the CSALTER script cannot be rolled back). See the Cisco Prime Network 5.3 Administrator Guide for database backup procedures. c.Start the database. d.Run the Oracle Database Character Set Scanner util ity (the csscan script). The new character set must be UTF8 or AL32UTF8. e.Run the CSALTER script. f.Use either a SHUTDOWN IMMEDIATE or a SHUTDOWN NORMAL statement to shut down the database. g.Start the database. Step 5 If the CSALTER script returns the error “Sorry, only on e session is allowed to ru n this script,” do the following: a.Log into the database with SQL*PLUS. b.Use a SHUTDOWN IMMEDIATE statement to shut down the database. c.Use startup restrict to start the database instance in restricted mode. d.Rerun the CSALTER script. Step 6 Enter the following commands to restore the values that you recorded in Step 3 for the job_queue_processes and aq_t m_processes parameters: sql> alter system set job_queue_processes=10 SCOPE=BOTH; # value sql> alter system set aq_tm_processes=0 SCOPE=BOTH; # value
A-3Cisco Prime Network 5.3 Installation Guide Appendix A Using Chinese Characters in Business Tags Step 7 Start Prime Network: networkctl start Using Chinese Characters with Windows Clients If you are using Chinese characters, East Asian la nguages must be installed on the Windows client workstation (where the Pr ime Network clients are installed). Also, the regional options must support Chinese. Step 1 In the Windows Control Panel, choose Regional and Language Options. Step 2 Click the Languages tab. Step 3 Insert the Windows CD. Step 4 Check the Install files for East Asian languages check box. Step 5 Click OK. Step 6 Reopen the Windows Control Panel and choose Regional and Language Options. Step 7 Click the Regional Options tab. Step 8 In the drop-down list, choose Chinese (PRC). Step 9 Click OK. Step 10 Restart your Windows client workstation. Displaying Chinese Characters in the GUI If Chinese characters are not displayed correctly in the GUI, it is because the synth.xml file contains a physical font (such as Tahoma) that does not support Chinese characters. To modify the synth.xml file: Step 1 Navigate to the $ PRIME_NETWORK_HOME /Main/webstart/jars/xmp-laf directory and open the Cues.jar file. Step 2 Modify the synth.xml file as follows: a.Access the synth.xml file from the directory, com/cisco/plaf. b.Change all instances of “font name=” and/or “font id=” to the desired font. In the below example, the font is set to “Tahoma”. Note Prime Network was tested with the “Dialog” font. <style id="default"> <object id="graphicsUtils" class="com.cisco.plaf.CUESGraphicsUtils"/> <graphicsUtils idref="graphicsUtils"/>
A-4Cisco Prime Network 5.3 Installation Guide Appendix A Using Chinese Characters in Business Tags <object id="syntheticaPainter" class="de.javasoft.plaf.synthetica.painter.SyntheticaPainter"/> <state> <!-- CUES: <font id="SyntheticaDefaultFont" name="Segoe UI" size="12"/> <color type="FOREGROUND" value="#333333"/>--><font id="SyntheticaDefaultFont" name="Tahoma" size="11"/> <color type="FOREGROUND" value="#222222"/> </state> Step 3 To change the font on the title pane, do the following: <style id="internalFrameTitlePane"> <imageIcon id="internalFrameCloseIcon" path="/com/cisco/plaf/images/closeIcon.png"/> <imageIcon id="internalFrameMaximizeIcon" path="/com/cisco/plaf/images/maximizeIcon.png"/> ….. <state> <property key="InternalFrameTitlePane.closeIcon" value="internalFrameCloseIcon"/><property key="InternalFrameTitlePane.minimizeIcon" value="internalFrameMinimizeIcon"/> <property key="InternalFrameTitlePane.maximizeIcon" value="internalFrameMaximizeIcon"/> <property key="InternalFrameTitlePane.iconifyIcon" value="internalFrameIconifyIcon"/> <!-- <font name="Tahoma" size="11" style="BOLD" /> --> <!-- CUES: <font name="Tahoma" size="14" style="PLAIN"/> --> <!-- <font name="Tahoma" size="13" style="BOLD"/> --> <font name="Tahoma" size="13" style="BOLD"/> Step 4 Save and exit the synth.xml file.