mot_cl√©,post_et_reponses
network performance monitoring,"i searched in this sub for the past couple of hours for past posts about network performance and resources to become better at creating performant networks or troubleshooting performance related issues. personally, i feel like i have a good handle on network availability and security in terms of design, implementation, and maintenance. however, i cannot say the same about performance. so does any one have good recommendations in the realm of network performance? i am looking to level up in that area but i dont know where to start. || make sure your mtu sizes are good. anything beyond that is probably not a network issue. || look for the section network performance related resources at the bottom of learn about bdp and nagle algorithm good luck."
network performance monitoring,"my company currently has a security device that sits inbetween our router and our isp. its basically a transparent firewall that will block traffic based on geographic location, security feeds, ports, and ip addresses etc. it reduces the overall load on our firewalls by a drastic amount and its an easy first stop block that i dont really have to think about much. its fantastic...when its working. unfortunately now, this appliance crashes constantly and the vendor cant figure it out. i am at my wits end with it as our internet completely goes down when this device stops working. im browsing around looking for security appliances that sit at the edge of a network that perform a similar function. im wondering if anyone else here uses a similar product described above? im tempted just to have my company buy another firewall i can throw on the edge to do the same thing but managing that is a bit more work than what is currently in place. || any modernappropriately sized firewall should be able to handle that without needing any help. its just another point of failure, as youre currently discovering. just get a single correctlysized box to it ideally an ha pair, but whatever. dont toss in another firewall in front of your firewall. || we just do that on the firewall itself. || if you still have another firewall inline and the vendor cant figure it out, i would be ripping it out immediately so you can stop the outages. if its just geolocationfeeds, and other misc ip blocks then even pfsense with pfblockerng could handle that."
network performance monitoring,"hi all i am having an issues with vlans on some dell n1548p switches with unifi access points and cant work out what i am missing. when i migrate the access points to the management vlan they are giving out incorrect ips to clients. general users, management, doors and guests scenario is we used to have a flat network using the native vlan1 172.50.1.016. i have amended the original to a 24 and created some new vlans 10, 20 and 50 for various things. these are present on the firewall and the switches, and when on cable this works perfectly fine for everything, so happy with the vlan configuration. each vlan has dhcp on the firewall just for ease. also while i perform the work all vlans can talk to each other as the firewall policies are open, these will be locked down later. i have a unifi cloudkey on vlan10 reip and working and have moved the access points also to vlan10. the ports for the access points are configured as general ports with vlan 1tagged, 10untagged, 20tagged, 50tagged. they are untagged on 10 so they get a ip on this range when plugged in, correct? at this point the ap would not get a dhcp address until i changed the pvid value on the port to 10 which makes sense. ap connects and gets an ip from dhcp on vlan10 which is great. ssids are setup in unifi cloudkey with the correct vlan ids but anything that connects on the wifi get a 172.50.10.xx address and not a 172.50.1.xx or 172.50.20.xx???? if i put the aps back onto vlan1 as they were before it all works? which is 1untagged, 20tagged, 50tagged and pvid back to 1. i feel im missing something but unsure what it is? if the reddit community has anything i could try or ideas let me know as i going to replicate it tomorrow on some test kit and im no expert have a great day! || do you have your unifi ssids tagged to the vlans? || you should really consider not using vlan 1, especially when its not the native vlanpvid. it can cause some weird stuff to happen. || did you set the network override to your management vlan for your unifi aps? avoid using vlan 1."
network performance monitoring,"i have a customer who we did a network design for just over a year ago. we talked them through all the pros and cons as part of the design process and they selected to terminate all the vlans onto their cisco switches and then just have a layer 3 transit up to the firewall. this firewall was easy to spec as it was essentially just a case of how big are your internet pipes, how much might they grow over the next 56 years. boom there is a firewall. we are now 12 months layer and they are saying we want to terminate all the vlans and they have a lot, and want more onto the firewall. i agree this is a superior and potentially more secure design but i suspect if we do this it will just overload the firewall as it just wasnt speced for that use case. the customer, and rightfully so, is saying give us some figures to backup that statement. that got me thinking.... what is the best way to do this? my initial thought process is put netflow in on the core switch and look at the traffic levels between the various vlans. we could also monitor the traffic levels on the svis its a cisco core switch and see what traffic levels they get. currently the customer is using prtg but is there some other tools that could give us better reporting? but what does reddit think? what have i missed? what else could i consider? ||  || you dont say anything about the fw capabilities. its very difficult to answer the question in the title if you dont specify the firewall itself. and i do agree with other comments it all depends what you want to do with the traffic when it hits the firewall. do you just want to do regular l4 filtering or are they going with something like l7 filtering appid with pa, ssl decryption? are you going to employ security profiles to filter ew traffic as well? is the firewall doing any ipsec tunneling or ravpn? basically, its not just the amount of traffic, its also what youre going to do with it. newer fortigates and pa series starting with 400 series are small beasts and can handle a lot of abuse of course, the more you need, the higher you go on the ladder when speccing the fw as well. as for routing, i disagree with some of the comments unless youre talking about very specific routing usually reserved for datacenters, firewalls are more than capable of doing it, at least major vendors in the field are. if youre talking about just intervlan routing, then double that. ive been in networking field for past 20 years, last 10 years mostly security engineering firewalls and unless im working with a very specific type of a company that absolutely needs to have line speed for intervlan traffic, all vlans are terminated on the firewall, no exception im done with the days of 2010 years ago when i was trying to figure out which acl on a switch is blocking something. || group networks inside a vrf and use the firewall as the gateway. this reduces the number of vlans on the firewall and allows east west between like networks with minimal security concern."
network performance monitoring,"hey all, i dont have a plethora of experience in specifics in networking. ive used and set up vlans, nats, and subnets multiple times. i work in the industrial automatic space for an oem that makes packaging equipment. our customers are often bigger companies that have their own specifications for networking. generally it makes sense and aligns with my understanding of networking hierarchy and security. but we have one customer who requires us to use managed switches, and will dictate to us which ip addresses we can use and often get down to the specifics of which deviceip is connected to which port on the switch. they require us to ship them the switch were using so they can provision and configure it, then they ship it back. all of that is fine, and makes sense. the confusing part for me is that in their specifications documentation, it specifies that a nat cannot be used anywhere in the system. what inevitably happens is the systems principal controller plc first port is on a specified subnet with the rest of the equipmentdevices. the controllers second port is configured to a different subnet, which then connects to the customers intranet through the managed switch to be monitored and maintained. i recently asked the person who essentially leads all automation equipment purchasing for that customer, and i asked if he knew why the company has a firm requirement of not using a nat. he just said, ohhh, no no no. nats are a big nono. since then, ive been reading and i, for the life of me, cannot understand why this could be. but i also admit i dont know enough to know where to look. in my mind, the way the second port is configured and then connected through the switch mimics the actions of a nat. can someone explain how im a silly goose thats overlooking something? thanks in advance! || ot equipment and their vendors are notoriously bad at anything security related. especially the vpn devices the vendors love to try to sneak on to the network to have remote access to their stuff. there is no need for nat if i give you the address space to use and a gateway to route traffic to. also, when i have to yank that vpn device out because the vendor has been hacked again i can easily replace it with my own. ifwhen we want to expand or connect or add additional automation or collect data i can do that with out having to rely on you to come back and readdress the equipment so that its routable on my network. ive seen ot equipment using insane subnets that are routable over the public internet. no your plc cannot have an address of 1.1.1.1 or 1.2.3.4 and no your hmi cannot be 8.8.8.8 or any other random address ive seen outside of rfc1918. long story short, its our network, if your equipment cant handle different ip addresses from whatever you think it should be, it is not welcome in our environment. that being said i bend over backwards to get ot vendors to see the light and do things the right way. || nat sometimes breaks applications. || for mei can see a couple reasons. one is to make sure devices stay physically isolated. no gateway to the outside world. only the plc and its endpoints. i also know plcs and vfds can be harsh on a network and having nat manage that net can cause issues with its broadcast multicast storms. and it may be a security red safety system policy that isolated networks are in place with no possible way to interfere with the safety control endpoints. the absence of nat also means no openvpn, openssl, wireguard, ipsec etc. can possibly gain access."
network performance monitoring,"i currently work as a net admin for a large health care organization, 4 years experience. i am paid 72kyr no benefits but good teammates and manager, get to touch a lot and learn a lot palo alto firewall, nac, routeswitch, sdwan, solarwinds, linux servers, certificates, active directory, data center, cloud, voip, etc. got an offer for a network engineer role at a large f500 company. after the interview i learned that this network team doesnt touch firewall, nac, monitoring, servers, ad etc, its purely onsite traditional routeswitchwireless. the pay is 95k100k with full benefits. wondering what i should value more at this point in my career. if i stay at the current organization i will learn a lot more, have the chance to work my way up to engineer within the next 23 years with a good team i trust. on the other hand if i jump ship to the new f500, i would have a very prestigious title at a very prestigious company and make a ton more money. my only concern is im afraid i may be siloed into traditional networking when ive been trying to inch my way more into cloud, and network security. what would you do? what is more valuable? money or experience? edit i also want to mention job stability because thats important in this economy. the current organization is recession proof in a way, i have full job security here, never any layoffs in 80 years, whereas the f500 is in an economy dependent industry that is known for mass layoffs. should this should be taken into consideration due to the current state of the economy? || why would you wait 23 years for a title bump to network engineer when youre already doing network engineer things. if you are making changes to firewalls andor switches then youre already a network engineer. shouldnt even been thinking about this, take the new job and work on some cloud certs and use it as leverage for an even higher paying cloud architect job in the future. edit if you really like your current job and team ask them to match the offer benefits title now. || in a perfect world youd get it all, right? but i can say i notice the benefits of money everyday, and of experience once in awhile. || make the switch and take the money. keep learning and building your skill set. once you feel things are stagnating then make another switch. education is important but youre working for money."
network performance monitoring,"hello fellow networking folks, im currently trying to build a small monitoring solution for multicasts. in our lab we have a nexus9000 c93108tcex running version 7.0. i want to start with this device and maybe later continue supporting others. the goal is to see for each interface which multicasts are entering and which are leaving. sflow seems to be a viable solution for this problem since it just samples a defined subset of all the packets passing through the monitored interfaces. for each sampled packets sflow provides some additional information. for me the source id index and the input interface value are most interesting. i am keeping to the field descriptions provided by wireshark since different sources call them differently. when a packets arrives from outside the switch on one monitored interface, everything works flawlessly. i can compare the two values to the values in the mibii interface description. both values match as they should. when a packets is leaving the switch the story goes differently. the input interface value is correct so i can still see, on which physical interface a packet entered the switch. source id index always displays hex 0x80000000. it should show the interface i am monitoring right now, the interface from wich the packet was sampled. if the situation stays like that i can only properly monitor incoming multicasts but i cannot monitor through which interfaces packets leave the switch. in my opinion the cisco documentation is not really clear if this behavior is expected or not. for nxos 10.5 i found sflow does not support egress sampling for multicast, broadcast, or unknown unicast packets. but the nxos 7 documentation states egress sflow of multicast traffic requires hardware multicast globaltxspan configuration. which i tried. the other sentence in there drove me totally nuts for an ingress sflow sample of multicast packets, the out port is reported as multiple ports with the exact number of egress ports. this is not supported on cisco nexus 9300ex and fxp platform switches. like, what does this even mean? i would interpret it as you can see how many interfaces an incoming packet will go to, but not on your device. but that should not affect what i can see on the sampled egress packet, right? i assume that either i am not smart enough to read the documentation correctly or the documentation is not coherent. so my question is is it possible to correctly sample the information for egress multicast traffic with my switch and if so, what needs to be done. if it is not possible i am interested how well other vendors support sflow monitoring of multicast packet especially arista. is it only cisco implementing it weirdly or is there a bigger reason for this. im also thinking about possible alternatives for my implementation and if you think they could be possible 1. combine the snooping and group report with the input data show ip igmp snooping groups. this would be possible but is no true monitoring. i wouldnt know when the switch does not pass a packet. 2. cycle the sflow monitoring port. if i monitor only one port at a time i always know where a one multicast enters and where it leaves 3. i look at some other interface data counters or something similar if there are any correlations i can use to match output multicasts to interfaces in some way. if you have any ideas id appreciate your help. || "
network performance monitoring,"hello all need some guidance here. i currently manage a smallmedium enterprise network with nexus 3k, nexus 2348 and nexus 9k switches in the datacenter. theres some intermittent slowness observed with some legacy applications and i need to identify whats causing it. we use solarwinds to monitor the infrastructure and nothing jumps out to me as the culprit. no oversubscription, no bottlenecks, no interface errors on the hosts where the application or database server is hosted. tried to show packet captures to prove that theres no network latency but nobody listens. is there any tool out there that can help really dissect this issue and point us in the right direction? at this point, i just need the problem to get resolved. thanks. || nexusshow interface counters errors the column all the way to the right is outdiscards. pay very close attention to that column. hit the space bar a bunch of times until you see indiscards. pay very close attention to that column, just to be thorough. solarwinds isnt precise enough to tell you if congestion is occurring. if eth11 is a 10gbe interface and eth12 is a 10gbe interface, and they both are receiving a 6gbps stream of traffic destined to a device on eth13, which is also a 10gbe port then you have 12gbps of traffic trying to fit into a 10gbps interface. this is congestion in a lan switch. since not all the traffic can fit, some of it must be buffered and sent when time allows. no switch has unlimited buffer memory. when buffer exhaustion occurs, and a packet must be dropped it will show up as an outdiscard. nexusshow interface flowcontrol flowcontrol is dumb. in my opinion, flow control should be disabled on every switch interface unless the device connected to that interface specifically says flow control is a bestpractice in its implementation guide. flowcontrol is a primitive form of early congestion control. when enabled on both ends, if either device estimates that it is about to run out of buffer memory capacity it can fire a pause frame at the connected device and demand that that device stop sending any traffic for some number of microseconds. from your switchs perspective, an rxpause is a pause frame received from the device connected on that switchport. a server is ashing this switch to hold up for a second. from your switchs perspective an txpause is a pause frame sent from this switch to the connected device asking that device to hold up for a second. flowcontrol doesnt care about qos prioritization. flowcontrol doesnt understand that some packets are more important than others. this is because flowcontrol is dumb. if your switch and the connected server have both negotiated flowcontrol to be on and you are not seeing any pause requests then neither device is crying for help to manage congestion. this suggests no congestion in the network is occurring. if your switch has flowcontrol disabled but you are receiving assloads of pause requests from the connected device, that device is the problem. he cant handle all the traffic you are sending him. send less traffic, or tune optimize that device so he can handle traffic better. here is the story you are trying to establish and support using data. the nexus 93180 switch only has 40mbytes of packet buffer memory in the whole box. that is the sum total of all possible storage in the switch for application traffic. solarwinds can help you depict how much total traffic is flowing through the switch at any given time. 40mb of storage is a very slim fraction of one second before it runs out of buffer capacity and starts dropping packets. if you arent dropping packets then the packets must be entering and exiting the switch really damned fast, if they werent youd fill the buffer and start dropping. a solarwinds graph might not be granular enough to show that interface utilization hit 135 utilization for eight seconds, but it is granular enough to show that you dropped 800 packets in the past 5 minutes on the switch port the server is connected to. if you arent dropping packets then you delivered them in a timely manner. if the network delivered the sql query request to the sql server in a tiny fraction of one second, and then you had to wait 37 seconds to receive the database response the problem isnt the network, the problem is inside the sql server. the usual suspects inside a database server are inefficient query bad programming cpu too busy inefficient query bad programming not enough ram inefficient query bad programming disk response time too slow inefficient query bad programming record locking multiple db operations are fighting over the exact same data at the same time inefficient query bad programming in case i forgot to mention it, more often than any other rootcause for a database performance problem is the developer is hitting the sql server with an inefficient database query. now, to answer your other question is there a product that can solve this? yes, but its expensive as fuck. what youre asking about is an application performance monitoring tool. the products listed in the topright quadrant are considered by gartner to be the bestofbreed products. if you engage cisco to watch a demo of appdynamics, or engage the dynatrace people for a demo of their product your whole department should start foaming at the mouth over how fantastically useful the data is. they can tell you exactly why your application is so slow. right down to the query string that is causing the problem, and can suggest a way to write a new string that might work better. this is gonna cost you an arm, a leg and somebodys kidney. but thats not your problem. let them make their sales pitch and let the big boss say no. you will have done your job bringing in a toptier solution to the problem. || sounds like the appdatabase teams need to do more digging instead of blaming the network || i recommend taking 2 concurrent packet captures, then analyze in wireshark 1 capture at the sourceclient and 2 capture at the destination serverapplication"
network performance monitoring,"traditionally, network programmingworking with sockets, transport protocols, dns, writing protocolaware appshas been considered part of software engineering. but lately, ive seen it getting grouped more with cloud infrastructure and sysadmin topics. this feels like a shift. writing code that deeply interacts with the network stack still feels like a devheavy taskconcurrency, performance, abstractionsnot just configuring services or managing networks. what do you think? is network programming still a software engineering discipline? has the rise of cloud platforms changed how we think about it? where does it belong todayengineering, cloud, both? || id see networking more grouped into systems programing ie interacting with the os system at a deep level. networking programming in the cloud feels more like devops or automation, since thats mostly provisioning deprovisioning all the cloud services. though at the end of the day, these are all labels. what matters most is what people mean when they talk to each other. ive seen these terms mean different things to different people, businesses, sectors, etc. || maybe im old and jaded but why does any of this matter? all of these things are part of a much wider system and the deeper you understand how said system works, the more valuable you will be. if youre looking to draw lines around where your knowledge stops, youre only hurting yourself. || theres always weird exceptions, but heres what ive seen is network programming still a software engineering discipline? when youre talking about writing software that works on top of the networking stack software engineering yes, its still a software discipline. has the rise of cloud platforms changed how we think about it? no, not really. weve had almost 2 decades of aws. theres still a distinct line between infrastructure and applicationsoftware engineering. theres a lot more programmability in infrastructure apis, ansible, etc. but were not doing concurrency on udp streams in rust. where does it belong todayengineering, cloud, both? that kind of programming is a separate discipline. you might see it in vendors or in certain realms, like what netflix does with their cdn. but in the network and cloud world, theres a discipline that is infrastructure and infrastructure programmability, and it doesnt involve sockets, protocol aware apps, etc. all with the preface it depends, but generally...."
network performance monitoring,"hey everyone, im running a fortigate 200e with multiple vdoms. one specific vdom keeps flapping i get alarmresolved notifications constantly, but the firewall itself never goes fully down. interestingly, the flapping only stops when a device is physically connected to the port that vdoms vlans are on. there are no linkmonitor or performance sla configs on this vdom. all vlan interfaces are subinterfaces. no other vdoms behave this way. has anyone run into this behavior before? is there a way to keep the vdom stable without plugging in a dummy device? open to cli tweaks or hardware workarounds. || could you elaborate on what you exactly mean by flapping? first time ever hearing about a vdom that flaps.. what happens exactly when it flaps and what are the notifications you get? || i havent seen that before and it sounds like an odd use case but what if you throw a loopback interface in the vdom and use that as your monitoring endpoint? a lot is probably going to depend on how exactly your monitoring system is connecting and what your touchpoint is i.e. the internal vlan interface"
